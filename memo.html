<!-- IMPORTANT: Ne pas modifier ce fichier directement, mais modifier le fichier '/doc/memo_installation.md', puis export sur ce fichier - Éventuellent, juste remettre ici ce commentaire, et modifier dans le 'head', le 'title' de la page -->

<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets@11.8.0/styles/default.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.17.2/dist/style.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.8.5/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.17.2/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.17.2/dist/index.js"></script><script>(r => {
                setTimeout(r);
              })(() => {
  const {
    markmap,
    mm
  } = window;
  const {
    el
  } = markmap.Toolbar.create(mm);
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
            })(() => window.markmap,null,{"content":"Mon CMS","children":[{"content":"MANUEL → Mode d'Emploi","children":[{"content":"Mode d'emploi","children":[{"content":"Explorer les branches","children":[{"content":"\n<p data-lines=\"17,18\">... Successivement en mode étude.</p>\n<pre data-lines=\"19,24\"><code>  Développer le noeud le plus haut que vous n'avez pas encore visité\n  (Si vous démarrez juste, c'est... Ce '**Manuel**' v1.0.1 ! ),\n  et aller jusqu'au bout de la branche avant de passer à la suivante.\n  (Vous êtes 'au bout' d'un flux lorsqu'il n'y a plus de ligne à la droite\n  du dernier sujet déployé.).\n</code></pre>","children":[],"payload":{"lines":"17,25"}},{"content":"\n<p data-lines=\"25,26\">... Selon la thématique de la racine en mode recherche.</p>","children":[],"payload":{"lines":"25,27"}},{"content":"\n<p data-lines=\"27,29\">Et surtout: Utiliser une 'vraie' souris (Et pas le paddle si notebook)<br>\npour naviguer aisément (Molette pour zoomer/dé-zoomer)</p>","children":[],"payload":{"lines":"27,30"}},{"content":"\n<p data-lines=\"30,31\">Enfin, considérer que ce Mémo est optimisé pour être utilisé en mode 'Preview'</p>","children":[],"payload":{"lines":"30,31"}},{"content":"\n<p data-lines=\"31,32\">Bonne exploration, et... Bon code !</p>","children":[],"payload":{"lines":"31,33"}}],"payload":{"lines":"15,16"}},{"content":"Coder... Oui... Mais pas de suite","children":[{"content":"<pre data-lines=\"35,38\"><code>(Pour Momo, mais pas que... ;-) :) Commencer par survoler les généralités, simplement en les lisant toutes.\n\nNe commencer à coder qu'à partir du noeud racine 'Le projet (Mon CMS)' !\n</code></pre>","children":[],"payload":{"lines":"35,38"}}],"payload":{"lines":"33,34"}}],"payload":{"lines":"13,14"}},{"content":"Philosophie","children":[{"content":"<pre data-lines=\"41,54\"><code>Ce type de présentation peut vous sembler surprenante de prime abord...\n\n... Mais passé le cap de la surprise et de la découverte... :\n\nAu delà de l'aspect qui peut sembler ludique, et plutôt sympa sur le plan esthétique,\ncar étant coloré, animé et dynamique, ce Mémo peut vite devenir, au fil du temps,\nvotre allié le plus puissant pour avoir une vision quasi synoptique du sujet étudié.\n\nDonc, si vous parvenez à réussir à l'utiliser, ne serait-ce dans un premier temps,\npour découvrir, apprendre, voire réviser vos connaissances, vous observerez\nen principe assez rapidement dans l'avenir que vous saurez y revenir, et y retrouver,\nparce qu'organisées, facilement et rapidement, les infos dont vous aurez alors\nponctuellement besoin :-) ! Bon usage... Et bon code !\n</code></pre>","children":[],"payload":{"lines":"41,54"}}],"payload":{"lines":"39,40","fold":1}}],"payload":{"lines":"11,12","fold":1}},{"content":"LARAVEL VOLT - Généralités","children":[{"content":"1 / Bases Laravel","children":[{"content":"<strong>composer  create-project laravel/laravel monapp --prefer-dist</strong>","children":[],"payload":{"lines":"59,60"}},{"content":"Paramètres .env file (APP_NAME, APP_URL &amp; DB_DATABASE)","children":[],"payload":{"lines":"60,61"}},{"content":"Ajout Fr :<br>\n<strong>composer require --dev laravel-lang/common<br>\nphp artisan lang:update</strong>","children":[],"payload":{"lines":"61,64"}},{"content":"Ajout Debugbar : <strong>composer require barryvdh/laravel-debugbar --dev</strong>","children":[],"payload":{"lines":"64,66"}}],"payload":{"lines":"57,58","fold":1}},{"content":"2 / Gestion des Models et Tables","children":[{"content":"Tables:","children":[{"content":"Migration seule : <em>php artisan make:migration create_nnn_table</em>","children":[],"payload":{"lines":"69,70"}},{"content":"Factory : <em>php artisan make:factory MmmFactory</em>","children":[],"payload":{"lines":"70,71"}},{"content":"Seeders : <em>php artisan make:seeder MmmSeeder</em>","children":[],"payload":{"lines":"71,72"}},{"content":"Penser à appeler les seeders dans database/seeders/DataBaseSeeder.php:<br>\n<em>$this-&gt;call([<br>\nMmm1Seeder::class,<br>\nMmm2Seeder::class,<br>\netc...]);</em>","children":[],"payload":{"lines":"72,77"}},{"content":"Puis les exécuter : <em>php artisan db:seed</em>","children":[],"payload":{"lines":"77,78"}}],"payload":{"lines":"68,78","fold":1}},{"content":"Models + migration :","children":[{"content":"Migrations","children":[{"content":"<em>php artisan make:model Mmm --migration</em> ou<br>\n<em>php artisan make:model Mmm -m</em>","children":[],"payload":{"lines":"80,82"}},{"content":"<em>php artisan migrate</em> la 1ère fois","children":[],"payload":{"lines":"82,83"}},{"content":"<em>php artisan migrate:refresh --seed</em> ensuite","children":[],"payload":{"lines":"83,84"}}],"payload":{"lines":"79,84"}},{"content":"Model (Mmm) :","children":[{"content":"<em>protected $timestamps = false;</em>","children":[],"payload":{"lines":"85,86"}},{"content":"<em>protected $fillable = ['name', 'email', 'password', 'role', 'valid'];</em>","children":[],"payload":{"lines":"86,87"}}],"payload":{"lines":"84,87"}},{"content":"Relations :","children":[{"content":"1:n :","children":[{"content":"(1) : Dans MmmN","children":[{"content":"<em>use Illuminate\\Database\\Eloquent\\Relations\\BelongsTo;</em>","children":[],"payload":{"lines":"90,91"}},{"content":"<em>public function Mmm1(): BelongsTo {<br>\nreturn $this-&gt;belongsTo(Mmm1::class);}</em>","children":[],"payload":{"lines":"91,93"}}],"payload":{"lines":"89,93"}},{"content":"(n) : Dans Mmm1","children":[{"content":"<em>use Illuminate\\Database\\Eloquent\\Relations\\HasMany;</em>","children":[],"payload":{"lines":"94,95"}},{"content":"<em>public function MmmN(): HasMany {<br>\nreturn $this-&gt;HasMany(MmmN::class);}</em>","children":[],"payload":{"lines":"95,98"}}],"payload":{"lines":"93,98"}}],"payload":{"lines":"88,98"}}],"payload":{"lines":"87,98"}}],"payload":{"lines":"78,98","fold":1}}],"payload":{"lines":"66,67","fold":1}},{"content":"3 / Divers","children":[{"content":"<pre data-lines=\"100,104\"><code>Les Helpers (app/helpers.php)\n(Y écrire les fonctions appelées souvent d'un peu n'importe où ensuite)\n\ncomposer.json :\n</code></pre>","children":[],"payload":{"lines":"100,104"}},{"content":"<pre><code class=\"language-php\">  ...\n  <span class=\"hljs-string\">\"autoload\"</span>: {\n    <span class=\"hljs-string\">\"files\"</span>: [\n      <span class=\"hljs-string\">\"app/helpers.php\"</span>\n    ],\n    ...\n  },\n  ...\n</code></pre>","children":[]},{"content":"<pre><code class=\"language-php\">  composer dumpautoload\n</code></pre>","children":[]}],"payload":{"lines":"98,99","fold":1}},{"content":"Extrait de: <em><strong><a href=\"https://laravel.sillo.org/posts/mon-cms-les-donnees\">https://laravel.sillo.org/posts/mon-cms-les-donnees</a></strong></em>","children":[],"payload":{"lines":"120,121"}},{"content":"Technos","children":[{"content":"MaryUI","children":[{"content":"Installation de MaryUI","children":[{"content":"<pre><code class=\"language-php\">  composer <span class=\"hljs-keyword\">require</span> robsontenorio/mary\n  php artisan mary:install\n</code></pre>","children":[]},{"content":"<pre data-lines=\"133,135\"><code>  → 0 (livewire/Volt)\n  → npm install --save-dev (npm)\n</code></pre>","children":[],"payload":{"lines":"133,135"}}],"payload":{"lines":"126,127"}},{"content":"Réf.: <strong><a href=\"https://mary-ui.com\">Doc complète MaryUI</a></strong>","children":[],"payload":{"lines":"136,137"}}],"payload":{"lines":"124,125","fold":1}},{"content":"Volt","children":[{"content":"Bases VOLT","children":[{"content":"<pre data-lines=\"142,145\"><code>UNE FONCTIONNALITÉ avec UN COMPOSANT VOLT (LOGIQUE + VUE) :\n\n1) Définir une route (./route/web.php) :\n</code></pre>","children":[],"payload":{"lines":"142,145"}},{"content":"<pre><code class=\"language-php\">  <span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Livewire</span>\\<span class=\"hljs-title\">Volt</span>\\<span class=\"hljs-title\">Volt</span>\n  ...\n  <span class=\"hljs-title\">Volt</span>::<span class=\"hljs-title\">route</span>('/<span class=\"hljs-title\">url</span>', '<span class=\"hljs-title\">dossier</span>(<span class=\"hljs-title\">s</span>).<span class=\"hljs-title\">fichier</span>')-&gt;<span class=\"hljs-title\">name</span>('<span class=\"hljs-title\">dossier</span>.<span class=\"hljs-title\">fichier</span>');\n</code></pre>","children":[]},{"content":"<pre data-lines=\"152,153\"><code>→ Recommandé à chaque changement des routes :\n</code></pre>","children":[],"payload":{"lines":"152,153"}},{"content":"<pre><code class=\"language-php\">  php artisan view:clear &amp; php artisan route:clear\n</code></pre>","children":[]},{"content":"<pre data-lines=\"158,159\"><code>→ Pour contrôle, liste de toutes les routes :\n</code></pre>","children":[],"payload":{"lines":"158,159"}},{"content":"<pre><code class=\"language-php\">  php artisan route:list\n</code></pre>","children":[]},{"content":"<pre data-lines=\"164,165\"><code>2) Créer le composant :\n</code></pre>","children":[],"payload":{"lines":"164,165"}},{"content":"<pre><code class=\"language-php\">  php artisan make:volt dossier/fichier --<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span>\n</span></code></pre>","children":[]},{"content":"<pre data-lines=\"170,173\"><code>Y définir :\n- Le Logique (La classe PHP)\n- La Vue (HTML - Template Blade)\n</code></pre>","children":[],"payload":{"lines":"170,173"}},{"content":"<pre><code class=\"language-php\">3) Souvent, besoin de traduire certains termes :\n\n→ Définir les clés:valeurs pour le fichier de langue (lang/fr.json)\n</code></pre>","children":[]}],"payload":{"lines":"140,141"}},{"content":"Réf.: <strong><a href=\"https://livewire.laravel.com/docs/quickstart\">Doc complète LIVEWIRE, compris VOLT</a></strong>","children":[],"payload":{"lines":"180,181"}}],"payload":{"lines":"138,139","fold":1}},{"content":"Extraits de : <em><strong><a href=\"https://laravel.sillo.org/posts/mon-cms-lauthentification\">https://laravel.sillo.org/posts/mon-cms-lauthentification</a></strong></em>","children":[],"payload":{"lines":"182,183"}}],"payload":{"lines":"122,123"}}],"payload":{"lines":"55,56","fold":1}},{"content":"Le projet (Mon CMS)","children":[{"content":"Installation de Laravel","children":[{"content":"Commande de base","children":[{"content":"<pre><code class=\"language-php\"><span class=\"hljs-comment\">// En CLI :</span>\n  composer  create-project laravel/laravel moncms --prefer-dist\n</code></pre>","children":[]},{"content":"<pre data-lines=\"195,199\"><code>Cette commande inclue l'installation des dépendances (PHP) et librairies (JS)\n(Que vous pouvez relancer régulièrement pour mises à jour) :\n- composer update\n- npm i\n</code></pre>","children":[],"payload":{"lines":"195,199"}}],"payload":{"lines":"188,189"}},{"content":"Settings - (.env)","children":[{"content":"<pre data-lines=\"202,203\"><code>Copier/coller le .env_exemple et l'adapter :\n</code></pre>","children":[],"payload":{"lines":"202,203"}},{"content":"<pre><code class=\"language-php\">  APP_NAME=<span class=\"hljs-string\">\"Mon CMS\"</span>\n  ...\n  APP_URL=http:<span class=\"hljs-comment\">//moncms (là ajustez selon votre serveur local)</span>\n  ...\n  APP_LOCALE=fr\n  ...\n  DB_CONNECTION=mysql OU <span class=\"hljs-title function_ invoke__\">sqlite</span> (Alors, pas besoin des lignes ci-dessous)\n  DB_HOST=<span class=\"hljs-number\">127.0</span>.<span class=\"hljs-number\">0.1</span>\n  DB_PORT=<span class=\"hljs-number\">3306</span>\n  DB_DATABASE=moncms\n  DB_USERNAME=root\n  DB_PASSWORD=\n  ...\n  MAIL_FROM_USER=<span class=\"hljs-string\">\"MonPseudo\"</span>\n  MAIL_FROM_ADDRESS=<span class=\"hljs-string\">\"MonEmail@example.com\"</span>\n  ...\n</code></pre>","children":[]},{"content":"<pre><code class=\"language-php\">  php artisan about\n</code></pre>","children":[]}],"payload":{"lines":"200,201"}}],"payload":{"lines":"186,187","fold":1}},{"content":"Exécuter votre script","children":[{"content":"Start &amp; / || Restart les serveurs","children":[{"content":"<pre data-lines=\"231,232\"><code>- PHP, dans une première console (CLI):\n</code></pre>","children":[],"payload":{"lines":"231,232"}},{"content":"<pre><code class=\"language-php\">  php artisan serv\n</code></pre>","children":[]},{"content":"<pre data-lines=\"237,238\"><code>- VITE!, dans une seconde CLI :\n</code></pre>","children":[],"payload":{"lines":"237,238"}},{"content":"<pre><code class=\"language-php\">  npm run dev\n</code></pre>","children":[]}],"payload":{"lines":"229,230"}},{"content":"Ouvrir votre navigateur sur <a href=\"http://127.0.0.1:8000\">http://127.0.0.1:8000</a>","children":[],"payload":{"lines":"243,244"}}],"payload":{"lines":"227,228","fold":1}},{"content":"Outil recommandé (Debugbar)","children":[{"content":"<pre data-lines=\"247,249\"><code>Installer la debugbar, active qu'en développement\n(Dans ./.env : APP_DEBUG = true) :\n</code></pre>","children":[],"payload":{"lines":"247,249"}},{"content":"<pre><code class=\"language-php\">  composer <span class=\"hljs-keyword\">require</span> barryvdh/laravel-debugbar --dev\n</code></pre>","children":[]},{"content":"<pre data-lines=\"254,255\"><code>Restart les serveurs\n</code></pre>","children":[],"payload":{"lines":"254,255"}}],"payload":{"lines":"245,246","fold":1}},{"content":"Package des langues","children":[{"content":"<pre><code class=\"language-php\">  composer <span class=\"hljs-keyword\">require</span> --dev laravel-lang/common\n  php artisan lang:update\n</code></pre>","children":[]},{"content":"<pre data-lines=\"263,264\"><code>Et Modifier dans le fichier généré: lang/fr.Json :\n</code></pre>","children":[],"payload":{"lines":"263,264"}},{"content":"<pre><code class=\"language-json\">  <span class=\"hljs-attr\">\"Home\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Maison\"</span><span class=\"hljs-punctuation\">,</span>\n</code></pre>","children":[]},{"content":"<pre data-lines=\"269,270\"><code>en :\n</code></pre>","children":[],"payload":{"lines":"269,270"}},{"content":"<pre><code class=\"language-json\">  <span class=\"hljs-attr\">\"Home\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Accueil\"</span><span class=\"hljs-punctuation\">,</span>\n</code></pre>","children":[]}],"payload":{"lines":"256,257","fold":1}},{"content":"Les données","children":[{"content":"Tables users","children":[{"content":"database/migrations/0001_01_01_000000_create_users_table.php","children":[{"content":"<pre><code class=\"language-php\">  public function up(): void {\n    Schema::create('users', function (Blueprint $table) {\n      $table-&gt;id();\n      $table-&gt;string('name')-&gt;unique();\n      $table-&gt;string('email')-&gt;unique();\n      $table-&gt;string('password');\n      $table-&gt;enum('role', ['user', 'redac', 'admin'])-&gt;default('user');\n      $table-&gt;boolean('valid')-&gt;default(false);\n      $table-&gt;rememberToken();\n      $table-&gt;timestamps();\n    });\n    ...\n  }\n</code></pre>","children":[]}],"payload":{"lines":"279,280","fold":1}},{"content":"database/factories/UserFactory.php","children":[{"content":"<pre><code class=\"language-php\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">definition</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">array</span>\n</span>{\n    <span class=\"hljs-variable\">$name</span> = <span class=\"hljs-title function_ invoke__\">fake</span>(<span class=\"hljs-string\">'fr_FR'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">lastname</span>();\n    <span class=\"hljs-keyword\">return</span> [\n        <span class=\"hljs-string\">'name'</span>           =&gt; <span class=\"hljs-variable\">$name</span>,\n        <span class=\"hljs-string\">'email'</span>          =&gt; <span class=\"hljs-title function_ invoke__\">strtolower</span>(<span class=\"hljs-variable\">$name</span>).<span class=\"hljs-string\">'@example.com'</span>,\n        <span class=\"hljs-string\">'password'</span>       =&gt; <span class=\"hljs-built_in\">static</span>::<span class=\"hljs-variable\">$password</span> ??= <span class=\"hljs-title class_\">Hash</span>::<span class=\"hljs-title function_ invoke__\">make</span>(<span class=\"hljs-string\">'password'</span>),\n        <span class=\"hljs-string\">'remember_token'</span> =&gt; <span class=\"hljs-title class_\">Str</span>::<span class=\"hljs-title function_ invoke__\">random</span>(<span class=\"hljs-number\">10</span>),\n        <span class=\"hljs-string\">'valid'</span>          =&gt; <span class=\"hljs-literal\">true</span>,\n    ];\n}\n</code></pre>","children":[]}],"payload":{"lines":"297,298","fold":1}},{"content":"app/Models/User.php","children":[{"content":"<pre><code class=\"language-php\">  ...\n  <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">User</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">Authenticatable</span>\n  </span>{   \n    ...\n    <span class=\"hljs-keyword\">protected</span> <span class=\"hljs-variable\">$fillable</span> = [<span class=\"hljs-string\">'name'</span>, <span class=\"hljs-string\">'email'</span>, <span class=\"hljs-string\">'password'</span>, <span class=\"hljs-string\">'role'</span>, <span class=\"hljs-string\">'valid'</span>];\n  }\n</code></pre>","children":[]}],"payload":{"lines":"313,314","fold":1}}],"payload":{"lines":"277,278","fold":1}},{"content":"Tables categories","children":[{"content":"Model &amp; migration des categories","children":[{"content":"<pre><code class=\"language-php\">  php artisan make:model Category --migration\n</code></pre>","children":[]}],"payload":{"lines":"326,327","fold":1}},{"content":"Migrations des categories","children":[{"content":"<pre><code class=\"language-php\">  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">up</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">void</span> </span>{\n    <span class=\"hljs-title class_\">Schema</span>::<span class=\"hljs-title function_ invoke__\">create</span>(<span class=\"hljs-string\">'categories'</span>, function (Blueprint <span class=\"hljs-variable\">$table</span>) {\n      <span class=\"hljs-variable\">$table</span>-&gt;<span class=\"hljs-title function_ invoke__\">id</span>();\n      <span class=\"hljs-variable\">$table</span>-&gt;<span class=\"hljs-keyword\">string</span>(<span class=\"hljs-string\">'title'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">unique</span>();\n      <span class=\"hljs-variable\">$table</span>-&gt;<span class=\"hljs-keyword\">string</span>(<span class=\"hljs-string\">'slug'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">unique</span>();\n    });\n  }\n</code></pre>","children":[]}],"payload":{"lines":"332,333","fold":1}},{"content":"app/Models/Category","children":[{"content":"<pre><code class=\"language-php\">  <span class=\"hljs-meta\">&lt;?php</span>\n  ...\n  <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Category</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">Model</span>\n  </span>{\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-variable\">$timestamps</span> = <span class=\"hljs-literal\">false</span>;\n  \n    <span class=\"hljs-keyword\">protected</span> <span class=\"hljs-variable\">$fillable</span> = [<span class=\"hljs-string\">'title'</span>, <span class=\"hljs-string\">'slug'</span>];\n  }\n</code></pre>","children":[]}],"payload":{"lines":"344,345","fold":1}}],"payload":{"lines":"324,325","fold":1}},{"content":"Tables posts (Articles)","children":[{"content":"Création model &amp; migration des articles","children":[{"content":"<pre><code class=\"language-php\">  php artisan make:model Post --migration\n</code></pre>","children":[]}],"payload":{"lines":"359,360","fold":1}},{"content":"Migration des articles","children":[{"content":"<pre><code class=\"language-php\">  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">up</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">void</span> </span>{\n    <span class=\"hljs-title class_\">Schema</span>::<span class=\"hljs-title function_ invoke__\">create</span>(<span class=\"hljs-string\">'posts'</span>, function (Blueprint <span class=\"hljs-variable\">$table</span>) {\n    <span class=\"hljs-variable\">$table</span>-&gt;<span class=\"hljs-title function_ invoke__\">id</span>();\n    <span class=\"hljs-variable\">$table</span>-&gt;<span class=\"hljs-title function_ invoke__\">timestamps</span>();\n    <span class=\"hljs-variable\">$table</span>-&gt;<span class=\"hljs-keyword\">string</span>(<span class=\"hljs-string\">'title'</span>);\n    <span class=\"hljs-variable\">$table</span>-&gt;<span class=\"hljs-keyword\">string</span>(<span class=\"hljs-string\">'slug'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">unique</span>();\n    <span class=\"hljs-variable\">$table</span>-&gt;<span class=\"hljs-title function_ invoke__\">mediumText</span>(<span class=\"hljs-string\">'body'</span>);\n    <span class=\"hljs-variable\">$table</span>-&gt;<span class=\"hljs-keyword\">boolean</span>(<span class=\"hljs-string\">'active'</span>)-&gt;<span class=\"hljs-keyword\">default</span>(<span class=\"hljs-literal\">false</span>);\n    <span class=\"hljs-variable\">$table</span>-&gt;<span class=\"hljs-keyword\">string</span>(<span class=\"hljs-string\">'image'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">nullable</span>();\n    <span class=\"hljs-variable\">$table</span>-&gt;<span class=\"hljs-keyword\">string</span>(<span class=\"hljs-string\">'seo_title'</span>);\n    <span class=\"hljs-variable\">$table</span>-&gt;<span class=\"hljs-title function_ invoke__\">text</span>(<span class=\"hljs-string\">'meta_description'</span>);\n    <span class=\"hljs-variable\">$table</span>-&gt;<span class=\"hljs-title function_ invoke__\">text</span>(<span class=\"hljs-string\">'meta_keywords'</span>);\n    <span class=\"hljs-variable\">$table</span>-&gt;<span class=\"hljs-keyword\">boolean</span>(<span class=\"hljs-string\">'pinned'</span>)-&gt;<span class=\"hljs-keyword\">default</span>(<span class=\"hljs-literal\">false</span>);\n\n    <span class=\"hljs-variable\">$table</span>-&gt;<span class=\"hljs-title function_ invoke__\">foreignId</span>(<span class=\"hljs-string\">'user_id'</span>)\n      -&gt;<span class=\"hljs-title function_ invoke__\">constrained</span>()\n      -&gt;<span class=\"hljs-title function_ invoke__\">onDelete</span>(<span class=\"hljs-string\">'cascade'</span>)\n      -&gt;<span class=\"hljs-title function_ invoke__\">onUpdate</span>(<span class=\"hljs-string\">'cascade'</span>);\n\n    <span class=\"hljs-variable\">$table</span>-&gt;<span class=\"hljs-title function_ invoke__\">foreignId</span>(<span class=\"hljs-string\">'category_id'</span>)\n      -&gt;<span class=\"hljs-title function_ invoke__\">constrained</span>()\n      -&gt;<span class=\"hljs-title function_ invoke__\">onDelete</span>(<span class=\"hljs-string\">'cascade'</span>)\n      -&gt;<span class=\"hljs-title function_ invoke__\">onUpdate</span>(<span class=\"hljs-string\">'cascade'</span>);\n    });\n  }\n</code></pre>","children":[]}],"payload":{"lines":"365,366","fold":1}},{"content":"Création Factory des articles","children":[{"content":"<pre><code class=\"language-php\">  php artisan make:factory PostFactory\n</code></pre>","children":[]}],"payload":{"lines":"395,396","fold":1}},{"content":"Code factory articles","children":[{"content":"<pre><code class=\"language-php\">  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">definition</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">array</span> </span>{\n    <span class=\"hljs-keyword\">return</span> [\n      <span class=\"hljs-string\">'body'</span>             =&gt; <span class=\"hljs-title function_ invoke__\">fake</span>()-&gt;<span class=\"hljs-title function_ invoke__\">paragraphs</span>(<span class=\"hljs-variable\">$nb</span> = <span class=\"hljs-number\">8</span>, <span class=\"hljs-variable\">$asText</span> = <span class=\"hljs-literal\">true</span>),\n      <span class=\"hljs-string\">'meta_description'</span> =&gt; <span class=\"hljs-title function_ invoke__\">fake</span>()-&gt;<span class=\"hljs-title function_ invoke__\">sentence</span>(<span class=\"hljs-variable\">$nbWords</span> = <span class=\"hljs-number\">6</span>, <span class=\"hljs-variable\">$variableNbWords</span> = <span class=\"hljs-literal\">true</span>),\n      <span class=\"hljs-string\">'meta_keywords'</span>    =&gt; <span class=\"hljs-title function_ invoke__\">implode</span>(<span class=\"hljs-string\">','</span>, <span class=\"hljs-title function_ invoke__\">fake</span>()-&gt;<span class=\"hljs-title function_ invoke__\">words</span>(<span class=\"hljs-variable\">$nb</span> = <span class=\"hljs-number\">3</span>, <span class=\"hljs-variable\">$asText</span> = <span class=\"hljs-literal\">false</span>)),\n      <span class=\"hljs-string\">'active'</span>           =&gt; <span class=\"hljs-literal\">true</span>,\n    ];\n  }\n</code></pre>","children":[]}],"payload":{"lines":"401,402","fold":1}},{"content":"app/Models/Post","children":[{"content":"<pre><code class=\"language-php\">  ...\n  <span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Database</span>\\<span class=\"hljs-title\">Eloquent</span>\\<span class=\"hljs-title\">Factories</span>\\<span class=\"hljs-title\">HasFactory</span>;\n  ...\n  <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Post</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">Model</span>\n  </span>{\n    <span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">HasFactory</span>;\n    <span class=\"hljs-keyword\">protected</span> <span class=\"hljs-variable\">$fillable</span> = [<span class=\"hljs-string\">'title'</span>, <span class=\"hljs-string\">'slug'</span>, <span class=\"hljs-string\">'body'</span>, <span class=\"hljs-string\">'active'</span>, <span class=\"hljs-string\">'image'</span>, <span class=\"hljs-string\">'user_id'</span>, <span class=\"hljs-string\">'category_id'</span>, <span class=\"hljs-string\">'seo_title'</span>, <span class=\"hljs-string\">'meta_description'</span>, <span class=\"hljs-string\">'meta_keywords'</span>, <span class=\"hljs-string\">'pinned'</span>];\n  }\n</code></pre>","children":[]}],"payload":{"lines":"414,415","fold":1}}],"payload":{"lines":"357,358","fold":1}},{"content":"Les relations","children":[{"content":"Les relations dans Models/Post.php","children":[{"content":"<pre><code class=\"language-php\">  <span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Database</span>\\<span class=\"hljs-title\">Eloquent</span>\\<span class=\"hljs-title\">Relations</span>\\<span class=\"hljs-title\">BelongsTo</span>;\n  \n  <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Post</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">Model</span>\n  </span>{\n    ...\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">user</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">BelongsTo</span> </span>{\n      <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">belongsTo</span>(<span class=\"hljs-title class_\">User</span>::<span class=\"hljs-variable language_\">class</span>);\n    }\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">category</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">BelongsTo</span> </span>{\n      <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">belongsTo</span>(<span class=\"hljs-title class_\">Category</span>::<span class=\"hljs-variable language_\">class</span>);\n    }\n  }\n</code></pre>","children":[]}],"payload":{"lines":"429,430","fold":1}},{"content":"La relation dans Models/User.php","children":[{"content":"<pre><code class=\"language-php\">  <span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Database</span>\\<span class=\"hljs-title\">Eloquent</span>\\<span class=\"hljs-title\">Relations</span>\\<span class=\"hljs-title\">HasMany</span>;\n  \n  <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">User</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">Authenticatable</span>\n  </span>{\n    ...\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">posts</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">HasMany</span> </span>{\n      <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">hasMany</span>(<span class=\"hljs-title class_\">Post</span>::<span class=\"hljs-variable language_\">class</span>);\n    }\n    ...\n  }\n</code></pre>","children":[]}],"payload":{"lines":"446,447","fold":1}},{"content":"La relation dans Models/Category.php","children":[{"content":"<pre><code class=\"language-php\">  <span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Database</span>\\<span class=\"hljs-title\">Eloquent</span>\\<span class=\"hljs-title\">Relations</span>\\<span class=\"hljs-title\">HasMany</span>;\n  \n  <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Category</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">Model</span>\n  </span>{\n    ...\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">posts</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">HasMany</span> </span>{\n      <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">hasMany</span>(<span class=\"hljs-title class_\">Post</span>::<span class=\"hljs-variable language_\">class</span>);\n    }\n  }\n</code></pre>","children":[]}],"payload":{"lines":"461,462","fold":1}}],"payload":{"lines":"427,428","fold":1}},{"content":"Exécution des migrations","children":[{"content":"<strong>php artisan migrate</strong>","children":[],"payload":{"lines":"477,478"}},{"content":"<strong><a href=\"https://laravel.sillo.org/storage/photos/2024/08/XIVfqMqmJ7OUNl9kwGWNk5duv0U0nweTIz2nbI1E.png\">Voir diagramme UML des 3 tables</a></strong>","children":[],"payload":{"lines":"479,480"}}],"payload":{"lines":"475,476","fold":1}},{"content":"Population de users","children":[{"content":"Création du seeder User","children":[{"content":"<pre><code class=\"language-php\">  php artisan make:seeder UserSeeder\n</code></pre>","children":[]}],"payload":{"lines":"483,484"}},{"content":"Code du seeder des fake users","children":[{"content":"<pre><code class=\"language-php\">  <span class=\"hljs-meta\">&lt;?php</span>\n  <span class=\"hljs-keyword\">namespace</span> <span class=\"hljs-title class_\">Database</span>\\<span class=\"hljs-title class_\">Seeders</span>;\n  \n  <span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Carbon</span>\\<span class=\"hljs-title\">Carbon</span>;\n  <span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">App</span>\\<span class=\"hljs-title\">Models</span>\\<span class=\"hljs-title\">User</span>;\n  <span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Database</span>\\<span class=\"hljs-title\">Seeder</span>;\n  \n  <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">UserSeeder</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">Seeder</span> </span>{\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">run</span>(<span class=\"hljs-params\"></span>) </span>{\n      <span class=\"hljs-variable\">$users</span> = [\n        [\n            <span class=\"hljs-string\">'name'</span>       =&gt; <span class=\"hljs-string\">'Admin'</span>,\n            <span class=\"hljs-string\">'email'</span>      =&gt; <span class=\"hljs-string\">'admin@example.com'</span>,\n            <span class=\"hljs-string\">'role'</span>       =&gt; <span class=\"hljs-string\">'admin'</span>,\n            <span class=\"hljs-string\">'created_at'</span> =&gt; <span class=\"hljs-title class_\">Carbon</span>::<span class=\"hljs-title function_ invoke__\">now</span>()-&gt;<span class=\"hljs-title function_ invoke__\">subYears</span>(<span class=\"hljs-number\">3</span>),\n            <span class=\"hljs-string\">'updated_at'</span> =&gt; <span class=\"hljs-title class_\">Carbon</span>::<span class=\"hljs-title function_ invoke__\">now</span>()-&gt;<span class=\"hljs-title function_ invoke__\">subYears</span>(<span class=\"hljs-number\">3</span>),\n        ],\n        [\n            <span class=\"hljs-string\">'name'</span>       =&gt; <span class=\"hljs-string\">'Redac'</span>,\n            <span class=\"hljs-string\">'email'</span>      =&gt; <span class=\"hljs-string\">'redac@example.com'</span>,\n            <span class=\"hljs-string\">'role'</span>       =&gt; <span class=\"hljs-string\">'redac'</span>,\n            <span class=\"hljs-string\">'created_at'</span> =&gt; <span class=\"hljs-title class_\">Carbon</span>::<span class=\"hljs-title function_ invoke__\">now</span>()-&gt;<span class=\"hljs-title function_ invoke__\">subYears</span>(<span class=\"hljs-number\">3</span>),\n            <span class=\"hljs-string\">'updated_at'</span> =&gt; <span class=\"hljs-title class_\">Carbon</span>::<span class=\"hljs-title function_ invoke__\">now</span>()-&gt;<span class=\"hljs-title function_ invoke__\">subYears</span>(<span class=\"hljs-number\">3</span>),\n        ],\n        [\n            <span class=\"hljs-string\">'name'</span>       =&gt; <span class=\"hljs-string\">'User'</span>,\n            <span class=\"hljs-string\">'email'</span>      =&gt; <span class=\"hljs-string\">'user@example.com'</span>,\n            <span class=\"hljs-string\">'role'</span>       =&gt; <span class=\"hljs-string\">'user'</span>,\n            <span class=\"hljs-string\">'created_at'</span> =&gt; <span class=\"hljs-title class_\">Carbon</span>::<span class=\"hljs-title function_ invoke__\">now</span>()-&gt;<span class=\"hljs-title function_ invoke__\">subYears</span>(<span class=\"hljs-number\">2</span>),\n            <span class=\"hljs-string\">'updated_at'</span> =&gt; <span class=\"hljs-title class_\">Carbon</span>::<span class=\"hljs-title function_ invoke__\">now</span>()-&gt;<span class=\"hljs-title function_ invoke__\">subYears</span>(<span class=\"hljs-number\">2</span>),\n        ],\n        [\n            <span class=\"hljs-string\">'name'</span>       =&gt; <span class=\"hljs-title function_ invoke__\">env</span>(<span class=\"hljs-string\">'MAIL_FROM_USER'</span>, <span class=\"hljs-string\">'Moi'</span>),\n            <span class=\"hljs-string\">'email'</span>      =&gt; <span class=\"hljs-title function_ invoke__\">env</span>(<span class=\"hljs-string\">'MAIL_FROM_ADDRESS'</span>, <span class=\"hljs-string\">'moi@example.com'</span>),\n            <span class=\"hljs-string\">'role'</span>       =&gt; <span class=\"hljs-string\">'admin'</span>,\n            <span class=\"hljs-string\">'created_at'</span> =&gt; <span class=\"hljs-title class_\">Carbon</span>::<span class=\"hljs-title function_ invoke__\">now</span>()-&gt;<span class=\"hljs-title function_ invoke__\">subYears</span>(<span class=\"hljs-number\">3</span>),\n            <span class=\"hljs-string\">'updated_at'</span> =&gt; <span class=\"hljs-title class_\">Carbon</span>::<span class=\"hljs-title function_ invoke__\">now</span>()-&gt;<span class=\"hljs-title function_ invoke__\">subYears</span>(<span class=\"hljs-number\">3</span>),\n        ],\n      ];\n      <span class=\"hljs-keyword\">foreach</span> (<span class=\"hljs-variable\">$users</span> <span class=\"hljs-keyword\">as</span> <span class=\"hljs-variable\">$userData</span>) {\n        <span class=\"hljs-title class_\">User</span>::<span class=\"hljs-title function_ invoke__\">factory</span>()-&gt;<span class=\"hljs-title function_ invoke__\">create</span>(<span class=\"hljs-variable\">$userData</span>);\n      }\n      <span class=\"hljs-title class_\">User</span>::<span class=\"hljs-title function_ invoke__\">factory</span>(<span class=\"hljs-number\">3</span>)-&gt;<span class=\"hljs-title function_ invoke__\">create</span>();\n    }\n  }\n</code></pre>","children":[]}],"payload":{"lines":"489,490"}}],"payload":{"lines":"481,482","fold":1}},{"content":"Population de categories","children":[{"content":"Création du seeder Category","children":[{"content":"<pre><code class=\"language-php\">  php artisan make:seeder CategorySeeder\n</code></pre>","children":[]}],"payload":{"lines":"541,542"}},{"content":"Code du seeder des fake categories","children":[{"content":"<pre><code class=\"language-php\">  <span class=\"hljs-meta\">&lt;?php</span>\n  <span class=\"hljs-keyword\">namespace</span> <span class=\"hljs-title class_\">Database</span>\\<span class=\"hljs-title class_\">Seeders</span>;\n  \n  <span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Database</span>\\<span class=\"hljs-title\">Seeder</span>;\n  <span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">App</span>\\<span class=\"hljs-title\">Models</span>\\<span class=\"hljs-title\">Category</span>;\n  \n  <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">CategorySeeder</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">Seeder</span>\n  </span>{\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">run</span>(<span class=\"hljs-params\"></span>) </span>{\n      <span class=\"hljs-variable\">$categories</span> = [\n        [\n          <span class=\"hljs-string\">'title'</span> =&gt; <span class=\"hljs-string\">'Categorie 1'</span>,\n          <span class=\"hljs-string\">'slug'</span>  =&gt; <span class=\"hljs-string\">'category-1'</span>,\n        ],\n        [\n          <span class=\"hljs-string\">'title'</span> =&gt; <span class=\"hljs-string\">'Categorie 2'</span>,\n          <span class=\"hljs-string\">'slug'</span>  =&gt; <span class=\"hljs-string\">'category-2'</span>,\n        ],\n        [\n          <span class=\"hljs-string\">'title'</span> =&gt; <span class=\"hljs-string\">'Categorie 3'</span>,\n          <span class=\"hljs-string\">'slug'</span>  =&gt; <span class=\"hljs-string\">'category-3'</span>,\n        ],\n      ];\n  \n      <span class=\"hljs-keyword\">foreach</span> (<span class=\"hljs-variable\">$categories</span> <span class=\"hljs-keyword\">as</span> <span class=\"hljs-variable\">$categoryData</span>) {\n        <span class=\"hljs-title class_\">Category</span>::<span class=\"hljs-title function_ invoke__\">create</span>(<span class=\"hljs-variable\">$categoryData</span>);\n      }\n    }\n  }\n</code></pre>","children":[]}],"payload":{"lines":"547,548"}}],"payload":{"lines":"539,540","fold":1}},{"content":"Population de posts","children":[{"content":"Créer app/helpers.php","children":[{"content":"Y copier : generateRandomDateInRange()","children":[{"content":"<pre><code class=\"language-php\">  <span class=\"hljs-meta\">&lt;?php</span>\n  <span class=\"hljs-keyword\">if</span> (!<span class=\"hljs-title function_ invoke__\">function_exists</span>(<span class=\"hljs-string\">'generateRandomDateInRange'</span>)) {\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">generateRandomDateInRange</span>(<span class=\"hljs-params\"><span class=\"hljs-variable\">$startDate</span>, <span class=\"hljs-variable\">$endDate</span></span>) </span>{\n      <span class=\"hljs-variable\">$start</span> = <span class=\"hljs-title class_\">Carbon\\Carbon</span>::<span class=\"hljs-title function_ invoke__\">parse</span>(<span class=\"hljs-variable\">$startDate</span>);\n      <span class=\"hljs-variable\">$end</span>   = <span class=\"hljs-title class_\">Carbon\\Carbon</span>::<span class=\"hljs-title function_ invoke__\">parse</span>(<span class=\"hljs-variable\">$endDate</span>);\n  \n      <span class=\"hljs-variable\">$difference</span> = <span class=\"hljs-variable\">$end</span>-&gt;timestamp - <span class=\"hljs-variable\">$start</span>-&gt;timestamp;\n  \n      <span class=\"hljs-variable\">$randomSeconds</span> = <span class=\"hljs-title function_ invoke__\">rand</span>(<span class=\"hljs-number\">0</span>, <span class=\"hljs-variable\">$difference</span>);\n  \n      <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable\">$start</span>-&gt;<span class=\"hljs-title function_ invoke__\">copy</span>()-&gt;<span class=\"hljs-title function_ invoke__\">addSeconds</span>(<span class=\"hljs-variable\">$randomSeconds</span>);\n    }\n  }\n</code></pre>","children":[]}],"payload":{"lines":"585,586"}},{"content":"Activation de ce helper dans composer.json","children":[{"content":"<pre><code class=\"language-php\">  <span class=\"hljs-string\">\"autoload\"</span>: {\n      <span class=\"hljs-string\">\"files\"</span>: [\n        <span class=\"hljs-string\">\"app/helpers.php\"</span>\n      ],\n      ...\n  },\n</code></pre>","children":[]}],"payload":{"lines":"603,604"}},{"content":"Update de l'autoload","children":[{"content":"<pre><code class=\"language-php\">  composer dumpautoload\n</code></pre>","children":[]}],"payload":{"lines":"614,615"}}],"payload":{"lines":"583,584","fold":1}},{"content":"Création du seeder de fake posts","children":[{"content":"<pre><code class=\"language-php\">  php artisan make:seeder PostSeeder\n</code></pre>","children":[]}],"payload":{"lines":"620,621"}},{"content":"Code du seeder des fake posts","children":[{"content":"<pre><code class=\"language-php\">  <span class=\"hljs-meta\">&lt;?php</span>\n  <span class=\"hljs-keyword\">namespace</span> <span class=\"hljs-title class_\">Database</span>\\<span class=\"hljs-title class_\">Seeders</span>;\n  \n  <span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">App</span>\\<span class=\"hljs-title\">Models</span>\\<span class=\"hljs-title\">Post</span>;\n  <span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Database</span>\\<span class=\"hljs-title\">Seeder</span>;\n  <span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Support</span>\\<span class=\"hljs-title\">Str</span>;\n  \n  <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">PostSeeder</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">Seeder</span>\n  </span>{\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-built_in\">static</span> <span class=\"hljs-variable\">$nbrPosts</span>;\n\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">run</span>(<span class=\"hljs-params\"></span>) </span>{\n      <span class=\"hljs-variable\">$nbrCategories</span> = <span class=\"hljs-number\">3</span>;\n  \n      <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">createPost</span>(<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">1</span>);\n      <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">createPost</span>(<span class=\"hljs-number\">2</span>, <span class=\"hljs-title function_ invoke__\">rand</span>(<span class=\"hljs-number\">1</span>, <span class=\"hljs-variable\">$nbrCategories</span>));\n      <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">createPost</span>(<span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">1</span>);\n      <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">createPost</span>(<span class=\"hljs-number\">4</span>, <span class=\"hljs-number\">1</span>);\n      <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">createPost</span>(<span class=\"hljs-number\">5</span>, <span class=\"hljs-title function_ invoke__\">rand</span>(<span class=\"hljs-number\">1</span>, <span class=\"hljs-variable\">$nbrCategories</span>));\n      <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">createPost</span>(<span class=\"hljs-number\">6</span>, <span class=\"hljs-number\">1</span>);\n      <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">createPost</span>(<span class=\"hljs-number\">7</span>, <span class=\"hljs-number\">1</span>);\n      <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">createPost</span>(<span class=\"hljs-number\">8</span>, <span class=\"hljs-title function_ invoke__\">rand</span>(<span class=\"hljs-number\">1</span>, <span class=\"hljs-variable\">$nbrCategories</span>));\n      <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">createPost</span>(<span class=\"hljs-number\">9</span>, <span class=\"hljs-title function_ invoke__\">rand</span>(<span class=\"hljs-number\">1</span>, <span class=\"hljs-variable\">$nbrCategories</span>));\n    }\n  \n    <span class=\"hljs-keyword\">protected</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">createPost</span>(<span class=\"hljs-params\"><span class=\"hljs-variable\">$id</span>, <span class=\"hljs-variable\">$category_id</span></span>) </span>{\n      <span class=\"hljs-variable\">$months</span> = [<span class=\"hljs-string\">'03'</span>, <span class=\"hljs-string\">'03'</span>, <span class=\"hljs-string\">'03'</span>, <span class=\"hljs-string\">'04'</span>, <span class=\"hljs-string\">'04'</span>, <span class=\"hljs-string\">'06'</span>, <span class=\"hljs-string\">'06'</span>, <span class=\"hljs-string\">'06'</span>, <span class=\"hljs-string\">'06'</span>];\n  \n      <span class=\"hljs-variable\">$date</span> = <span class=\"hljs-title function_ invoke__\">generateRandomDateInRange</span>(<span class=\"hljs-string\">'2022-01-01'</span>, <span class=\"hljs-string\">'2024-11-07'</span>);\n  \n      <span class=\"hljs-variable\">$postId</span> = <span class=\"hljs-string\">\"Post <span class=\"hljs-subst\">{$id}</span>\"</span>;\n  \n      <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title class_\">Post</span>::<span class=\"hljs-title function_ invoke__\">factory</span>()-&gt;<span class=\"hljs-title function_ invoke__\">create</span>([\n        <span class=\"hljs-string\">'title'</span>       =&gt; <span class=\"hljs-variable\">$postId</span>,\n        <span class=\"hljs-string\">'seo_title'</span>   =&gt; <span class=\"hljs-variable\">$postId</span>,\n        <span class=\"hljs-string\">'slug'</span>        =&gt; <span class=\"hljs-title class_\">Str</span>::<span class=\"hljs-title function_ invoke__\">of</span>(<span class=\"hljs-variable\">$postId</span>)-&gt;<span class=\"hljs-title function_ invoke__\">slug</span>(<span class=\"hljs-string\">'-'</span>),\n        <span class=\"hljs-string\">'user_id'</span>     =&gt; <span class=\"hljs-title function_ invoke__\">rand</span>(<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>),\n        <span class=\"hljs-string\">'image'</span>       =&gt; <span class=\"hljs-string\">'2024/'</span> . <span class=\"hljs-variable\">$months</span>[<span class=\"hljs-variable\">$id</span> - <span class=\"hljs-number\">1</span>] . <span class=\"hljs-string\">'/img0'</span> . <span class=\"hljs-variable\">$id</span> . <span class=\"hljs-string\">'.jpg'</span>,\n        <span class=\"hljs-string\">'category_id'</span> =&gt; <span class=\"hljs-variable\">$category_id</span>,\n        <span class=\"hljs-string\">'created_at'</span>  =&gt; <span class=\"hljs-variable\">$date</span>,\n        <span class=\"hljs-string\">'updated_at'</span>  =&gt; <span class=\"hljs-variable\">$date</span>,\n        <span class=\"hljs-string\">'pinned'</span>      =&gt; <span class=\"hljs-number\">5</span> == <span class=\"hljs-variable\">$id</span>,\n      ]);\n    }\n  }\n</code></pre>","children":[]}],"payload":{"lines":"626,627"}}],"payload":{"lines":"581,582","fold":1}},{"content":"Activation des seeders","children":[{"content":"<pre data-lines=\"678,679\"><code>database/seeders/DatabaseSeeder.php :\n</code></pre>","children":[],"payload":{"lines":"678,679"}},{"content":"<pre><code class=\"language-php\">  <span class=\"hljs-meta\">&lt;?php</span>\n  <span class=\"hljs-keyword\">namespace</span> <span class=\"hljs-title class_\">Database</span>\\<span class=\"hljs-title class_\">Seeders</span>;\n  \n  <span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Database</span>\\<span class=\"hljs-title\">Seeder</span>;\n  \n  <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">DatabaseSeeder</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">Seeder</span>\n  </span>{\n    <span class=\"hljs-comment\">/**\n     * Seed the application's database.\n     */</span>\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">run</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">void</span> </span>{\n      <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">call</span>([\n        <span class=\"hljs-title class_\">UserSeeder</span>::<span class=\"hljs-variable language_\">class</span>,\n        <span class=\"hljs-title class_\">CategorySeeder</span>::<span class=\"hljs-variable language_\">class</span>,\n        <span class=\"hljs-title class_\">PostSeeder</span>::<span class=\"hljs-variable language_\">class</span>,          \n      ]);\n  \n      <span class=\"hljs-title function_ invoke__\">printf</span>(<span class=\"hljs-string\">'%s%s'</span>, <span class=\"hljs-title function_ invoke__\">str_repeat</span>(<span class=\"hljs-string\">' '</span>, <span class=\"hljs-number\">2</span>), <span class=\"hljs-string\">\"Data tables properly filled.\\n\\n\"</span>);\n    }\n  }\n</code></pre>","children":[]},{"content":"<pre><code class=\"language-php\">  php artisan db:seed\n<span class=\"hljs-comment\">// Ou, reset complet :</span>\n  php artisan migrate:refresh --seed\n</code></pre>","children":[]}],"payload":{"lines":"676,677","fold":1}},{"content":"Les pages","children":[{"content":"Création Model &amp; migration Page","children":[{"content":"<pre><code class=\"language-php\">  php artisan make:model Page --migration\n</code></pre>","children":[]}],"payload":{"lines":"711,712","fold":1}},{"content":"Code migration Page","children":[{"content":"<pre><code class=\"language-php\">  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">up</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">void</span>\n  </span>{\n    <span class=\"hljs-title class_\">Schema</span>::<span class=\"hljs-title function_ invoke__\">create</span>(<span class=\"hljs-string\">'pages'</span>, function (Blueprint <span class=\"hljs-variable\">$table</span>) {\n      <span class=\"hljs-variable\">$table</span>-&gt;<span class=\"hljs-title function_ invoke__\">id</span>();\n      <span class=\"hljs-variable\">$table</span>-&gt;<span class=\"hljs-keyword\">string</span>(<span class=\"hljs-string\">'slug'</span>);\n      <span class=\"hljs-variable\">$table</span>-&gt;<span class=\"hljs-keyword\">string</span>(<span class=\"hljs-string\">'title'</span>);\n      <span class=\"hljs-variable\">$table</span>-&gt;<span class=\"hljs-title function_ invoke__\">mediumText</span>(<span class=\"hljs-string\">'body'</span>);\n      <span class=\"hljs-variable\">$table</span>-&gt;<span class=\"hljs-keyword\">boolean</span>(<span class=\"hljs-string\">'active'</span>)-&gt;<span class=\"hljs-keyword\">default</span>(<span class=\"hljs-literal\">false</span>);\n      <span class=\"hljs-variable\">$table</span>-&gt;<span class=\"hljs-keyword\">string</span>(<span class=\"hljs-string\">'seo_title'</span>);\n      <span class=\"hljs-variable\">$table</span>-&gt;<span class=\"hljs-title function_ invoke__\">text</span>(<span class=\"hljs-string\">'meta_description'</span>);\n      <span class=\"hljs-variable\">$table</span>-&gt;<span class=\"hljs-title function_ invoke__\">text</span>(<span class=\"hljs-string\">'meta_keywords'</span>);\n    });\n  }\n</code></pre>","children":[]}],"payload":{"lines":"717,718","fold":1}},{"content":"Code app/models/Page","children":[{"content":"<pre><code class=\"language-php\">  <span class=\"hljs-meta\">&lt;?php</span>\n  <span class=\"hljs-keyword\">namespace</span> <span class=\"hljs-title class_\">App</span>\\<span class=\"hljs-title class_\">Models</span>;\n  \n  <span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Database</span>\\<span class=\"hljs-title\">Eloquent</span>\\<span class=\"hljs-title\">Model</span>;\n  <span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Database</span>\\<span class=\"hljs-title\">Eloquent</span>\\<span class=\"hljs-title\">Factories</span>\\<span class=\"hljs-title\">HasFactory</span>;\n  \n  <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Page</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">Model</span>\n  </span>{\n    <span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">HasFactory</span>;\n  \n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-variable\">$timestamps</span>  = <span class=\"hljs-literal\">false</span>;\n    <span class=\"hljs-keyword\">protected</span> <span class=\"hljs-variable\">$fillable</span> = [\n      <span class=\"hljs-string\">'title'</span>,\n      <span class=\"hljs-string\">'slug'</span>,\n      <span class=\"hljs-string\">'body'</span>,\n      <span class=\"hljs-string\">'active'</span>,\n      <span class=\"hljs-string\">'seo_title'</span>,\n      <span class=\"hljs-string\">'meta_description'</span>,\n      <span class=\"hljs-string\">'meta_keywords'</span>,\n    ];\n  }\n</code></pre>","children":[]}],"payload":{"lines":"735,736","fold":1}},{"content":"Création factory Page","children":[{"content":"<pre><code class=\"language-php\">  php artisan make:factory PageFactory\n</code></pre>","children":[]}],"payload":{"lines":"761,762","fold":1}},{"content":"Code factory Page","children":[{"content":"<pre><code class=\"language-php\">  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">definition</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">array</span> </span>{\n    <span class=\"hljs-keyword\">return</span> [\n      <span class=\"hljs-string\">'body'</span>             =&gt; <span class=\"hljs-title function_ invoke__\">fake</span>()-&gt;<span class=\"hljs-title function_ invoke__\">paragraph</span>(<span class=\"hljs-number\">10</span>),\n      <span class=\"hljs-string\">'meta_description'</span> =&gt; <span class=\"hljs-title function_ invoke__\">fake</span>()-&gt;<span class=\"hljs-title function_ invoke__\">sentence</span>(<span class=\"hljs-variable\">$nbWords</span> = <span class=\"hljs-number\">6</span>, <span class=\"hljs-variable\">$variableNbWords</span> = <span class=\"hljs-literal\">true</span>),\n      <span class=\"hljs-string\">'meta_keywords'</span>    =&gt; <span class=\"hljs-title function_ invoke__\">implode</span>(<span class=\"hljs-string\">','</span>, <span class=\"hljs-title function_ invoke__\">fake</span>()-&gt;<span class=\"hljs-title function_ invoke__\">words</span>(<span class=\"hljs-variable\">$nb</span> = <span class=\"hljs-number\">3</span>, <span class=\"hljs-variable\">$asText</span> = <span class=\"hljs-literal\">false</span>)),\n    ];\n  }\n</code></pre>","children":[]}],"payload":{"lines":"767,768","fold":1}},{"content":"Création seeder Page","children":[{"content":"<pre><code class=\"language-php\">  php artisan make:seeder PageSeeder\n</code></pre>","children":[]}],"payload":{"lines":"779,780","fold":1}},{"content":"Code du seeder Page","children":[{"content":"<pre><code class=\"language-php\">  <span class=\"hljs-meta\">&lt;?php</span>\n  <span class=\"hljs-keyword\">namespace</span> <span class=\"hljs-title class_\">Database</span>\\<span class=\"hljs-title class_\">Seeders</span>;\n  \n  <span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">App</span>\\<span class=\"hljs-title\">Models</span>\\<span class=\"hljs-title\">Page</span>;\n  <span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Database</span>\\<span class=\"hljs-title\">Seeder</span>;\n  \n  <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">PageSeeder</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">Seeder</span>\n  </span>{\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">run</span>(<span class=\"hljs-params\"></span>) </span>{\n      <span class=\"hljs-variable\">$items</span> = [\n        [<span class=\"hljs-string\">'slug'</span> =&gt; <span class=\"hljs-string\">'terms'</span>, <span class=\"hljs-string\">'title'</span> =&gt; <span class=\"hljs-string\">'Terms'</span>],\n        [<span class=\"hljs-string\">'slug'</span> =&gt; <span class=\"hljs-string\">'privacy-policy'</span>, <span class=\"hljs-string\">'title'</span> =&gt; <span class=\"hljs-string\">'Privacy Policy'</span>],\n      ];\n  \n      <span class=\"hljs-keyword\">foreach</span> (<span class=\"hljs-variable\">$items</span> <span class=\"hljs-keyword\">as</span> <span class=\"hljs-variable\">$item</span>) {\n        <span class=\"hljs-title class_\">Page</span>::<span class=\"hljs-title function_ invoke__\">factory</span>()-&gt;<span class=\"hljs-title function_ invoke__\">create</span>([\n          <span class=\"hljs-string\">'title'</span>     =&gt; <span class=\"hljs-variable\">$item</span>[<span class=\"hljs-string\">'title'</span>],\n          <span class=\"hljs-string\">'seo_title'</span> =&gt; <span class=\"hljs-string\">'Page '</span> . <span class=\"hljs-variable\">$item</span>[<span class=\"hljs-string\">'title'</span>],\n          <span class=\"hljs-string\">'slug'</span>      =&gt; <span class=\"hljs-variable\">$item</span>[<span class=\"hljs-string\">'slug'</span>],\n          <span class=\"hljs-string\">'active'</span>    =&gt; <span class=\"hljs-literal\">true</span>,\n        ]);\n      }\n    }\n  }\n</code></pre>","children":[]}],"payload":{"lines":"785,786","fold":1}},{"content":"Ajout de ce seeder dans DatabaseSeeder.php","children":[{"content":"<pre><code class=\"language-php\">  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">run</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">void</span> </span>{\n    <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">call</span>([\n      ...\n      <span class=\"hljs-title class_\">PageSeeder</span>::<span class=\"hljs-variable language_\">class</span>,   \n    ]);\n    ...\n  }\n</code></pre>","children":[]}],"payload":{"lines":"814,815","fold":1}},{"content":"Rafraîchissement de la base","children":[{"content":"<pre><code class=\"language-php\">  php artisan migrate:fresh --seed\n</code></pre>","children":[]}],"payload":{"lines":"826,827","fold":1}}],"payload":{"lines":"709,710","fold":1}}],"payload":{"lines":"275,276","fold":1}},{"content":"Réf.: <em><strong><a href=\"https://laravel.sillo.org/posts/mon-cms-les-donnees\">https://laravel.sillo.org/posts/mon-cms-les-donnees</a></strong></em>","children":[],"payload":{"lines":"832,833"}}],"payload":{"lines":"184,185","fold":1}},{"content":"&nbsp;<strong>I &nbsp;/ &nbsp; F R O N T &nbsp;- &nbsp;E N D &nbsp;:</strong>","children":[],"payload":{"lines":"834,835"}},{"content":"- L'authentification","children":[{"content":"Installer MaryUI (Avec Volt et npm)","children":[{"content":"Revoir ci-avant : ' Généralités / Technos / MaryUI ' pour l'installation","children":[],"payload":{"lines":"840,841"}},{"content":"Sont alors créés (Entre autres...)","children":[{"content":"Une route (routes/web.php)","children":[],"payload":{"lines":"844,845"}},{"content":"Un layout (resources\\views\\components\\layouts\\app.blade.php)","children":[],"payload":{"lines":"845,846"}},{"content":"Un composant Volt (resources\\views\\livewire\\users\\index.blade.php)","children":[],"payload":{"lines":"846,848"}}],"payload":{"lines":"842,843"}},{"content":"Rappel : Dorénavant, bien lancer aussi le serveur Vite","children":[{"content":"<strong><a href=\"http://127.0.0.1:8000\">URL du rendu</a></strong>","children":[],"payload":{"lines":"854,855"}}],"payload":{"lines":"848,849"}}],"payload":{"lines":"838,839","fold":1}},{"content":"Layout pour l'authentification","children":[{"content":"<pre data-lines=\"858,859\"><code>./resources/views/components/layouts/auth.blade.php\n</code></pre>","children":[],"payload":{"lines":"858,859"}},{"content":"<pre><code class=\"language-php\">&lt;!DOCTYPE html&gt;\n&lt;html lang=\"{{ str_replace('_', '-', app()-&gt;getLocale()) }}\"&gt;\n\n&lt;head&gt;\n    &lt;meta charset=\"utf-8\"&gt;\n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, viewport-fit=cover\"&gt;\n    &lt;meta name=\"csrf-token\" content=\"{{ csrf_token() }}\"&gt;\n    &lt;title&gt;{{ (isset($title) ? $title . ' | ' : (View::hasSection('title') ? View::getSection('title') . ' | ' : '')) . config('app.name') }}&lt;/title&gt;\n    @vite(['resources/css/app.css', 'resources/js/app.js'])\n&lt;/head&gt;\n\n&lt;body class=\"min-h-screen font-sans antialiased bg-base-200/50 dark:bg-base-200\"&gt;\n\n    &lt;x-main full-width&gt;\n        &lt;x-slot:content&gt;\n            {{ $slot }}\n        &lt;/x-slot:content&gt;\n    &lt;/x-main&gt;\n\n    &lt;x-toast /&gt;\n&lt;/body&gt;\n\n&lt;/html&gt;\n</code></pre>","children":[]}],"payload":{"lines":"856,857","fold":1}},{"content":"Composants VOLT pour authentification","children":[{"content":"Composant Register","children":[{"content":"Route pour Register","children":[{"content":"<pre data-lines=\"892,893\"><code>./routes/web.php :\n</code></pre>","children":[],"payload":{"lines":"892,893"}},{"content":"<pre><code class=\"language-php\">  <span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Support</span>\\<span class=\"hljs-title\">Facades</span>\\<span class=\"hljs-title\">Route</span>;\n  ...\n  <span class=\"hljs-title class_\">Route</span>::<span class=\"hljs-title function_ invoke__\">middleware</span>(<span class=\"hljs-string\">'guest'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">group</span>(function () {\n    <span class=\"hljs-title class_\">Volt</span>::<span class=\"hljs-title function_ invoke__\">route</span>(<span class=\"hljs-string\">'/register'</span>, <span class=\"hljs-string\">'auth.register'</span>);\n  });\n</code></pre>","children":[]}],"payload":{"lines":"890,891","fold":1}},{"content":"Création composant Register","children":[{"content":"<pre><code class=\"language-php\">  php artisan make:volt auth/register --<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span>\n</span></code></pre>","children":[]}],"payload":{"lines":"902,903","fold":1}},{"content":"Code register","children":[{"content":"<pre><code class=\"language-php\">  &lt;?php\n  use App\\Models\\User;\n  use Mary\\Traits\\Toast;\n  use Livewire\\Volt\\Component;\n  use Illuminate\\Support\\Facades\\Hash;\n  use App\\Notifications\\UserRegistered;\n  use Livewire\\Attributes\\{Layout, Validate, Title};\n  \n  new #[Layout('components.layouts.auth')] \n  class extends Component {\n      use Toast;\n\n    #[Validate('required|string|max:255|unique:users')]\n    public string $name = '';\n    #[Validate('required|email|unique:users')]\n    public string $email = '';\n    #[Validate('required|confirmed')]\n    public string $password = '';\n    #[Validate('required')]\n    public string $password_confirmation = '';\n    #[Validate('sometimes|nullable')]\n    public ?string $gender = null;\n\n    public function register() {\n      if ($this-&gt;gender) {\n          abort(403);\n      }\n      $data = $this-&gt;validate();\n      $user = $this-&gt;createUser($data);\n      auth()-&gt;login($user);\n      request()-&gt;session()-&gt;regenerate();\n      $this-&gt;success(__('Registration successful!'), redirectTo: '/');\n    }\n\n    protected function createUser(array $data): User {\n      $data['password'] = Hash::make($data['password']);\n      return User::create($data);\n    }\n  \n  }; ?&gt;\n  @section('title', __('Register'))\n  &lt;div&gt;\n    &lt;x-card class=\"flex items-center justify-center h-[96vh]\"&gt;\n      &lt;a href=\"/\" title=\"{{ __('Return on site') }}\"&gt;\n        &lt;x-card class=\"items-center\" title=\"{{ __('Register') }}\" shadow separator progress-indicator /&gt;\n      &lt;/a&gt;\n      &lt;x-form wire:submit=\"register\" class=\"w-full sm:min-w-[30vw]\"&gt;\n        &lt;x-input label=\"{{ __('Name') }} *\" wire:model=\"name\" icon=\"o-user\" inline required /&gt;\n        &lt;x-input label=\"{{ __('E-mail') }} *\" wire:model=\"email\" icon=\"o-envelope\" inline required /&gt;\n        &lt;x-input label=\"{{ __('Password') }} *\" wire:model=\"password\" type=\"password\" icon=\"o-key\" inline required /&gt;\n        &lt;x-input label=\"{{ __('Confirm Password') }} *\" wire:model=\"password_confirmation\" type=\"password\" icon=\"o-key\" inline required /&gt;\n        &lt;p class=\"text-[12px] text-right italic my-[-10px]\"&gt;* : {{__('Required information') }}&lt;/p&gt;\n        &lt;div style=\"display: none;\"&gt;\n            &lt;x-input wire:model=\"gender\" type=\"text\" inline /&gt;\n        &lt;/div&gt;\n        &lt;x-slot:actions&gt;\n          &lt;x-button label=\"{{ __('Already registered?') }}\" class=\"btn-ghost\" link=\"/login\" /&gt;\n          &lt;x-button label=\"{{ __('Register') }}\" type=\"submit\" icon=\"o-paper-airplane\" class=\"btn-primary\" spinner=\"login\" /&gt;\n        &lt;/x-slot:actions&gt;\n        &lt;/x-form&gt;\n  \n    &lt;/x-card&gt;\n  &lt;/div&gt;\n</code></pre>","children":[]}],"payload":{"lines":"908,909","fold":1}},{"content":"Traduction pour formulaire Register","children":[{"content":"<pre data-lines=\"978,979\"><code>./lang/fr.json\n</code></pre>","children":[],"payload":{"lines":"978,979"}},{"content":"<pre><code class=\"language-json\">  <span class=\"hljs-attr\">\"Password\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Mot de passe\"</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">\"Confirm Password\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Confirmation du mot de passe\"</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">\"Register\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Créer un compte\"</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">\"Already registered?\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Déjà enregistré ?\"</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">\"Name\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Nom\"</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">\"E-mail\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Courriel\"</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">\"Required information\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Information requise\"</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">\"Registration successful!\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Compte créé avec succès !\"</span>\n</code></pre>","children":[]}],"payload":{"lines":"976,977","fold":1}},{"content":"Particularité : Pot de miel","children":[{"content":"<pre data-lines=\"993,995\"><code>À noter: ∃ un champs caché (gender) pour identifier les robots...\nVoir dans le code du composant: if ($this-&gt;gender) abort(403);\n</code></pre>","children":[],"payload":{"lines":"993,995"}}],"payload":{"lines":"991,992","fold":1}},{"content":"<strong><a href=\"http://127.0.0.1:8000/register\">Rendu Register</a></strong> (Tester la validation des champs)","children":[],"payload":{"lines":"996,997"}}],"payload":{"lines":"888,889"}},{"content":"Composant Login","children":[{"content":"Route pour Login","children":[{"content":"<pre><code class=\"language-php\">  ...\n  <span class=\"hljs-title class_\">Route</span>::<span class=\"hljs-title function_ invoke__\">middleware</span>(<span class=\"hljs-string\">'guest'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">group</span>(function () {\n    ...\n    <span class=\"hljs-title class_\">Volt</span>::<span class=\"hljs-title function_ invoke__\">route</span>(<span class=\"hljs-string\">'/login'</span>, <span class=\"hljs-string\">'auth.login'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">name</span>(<span class=\"hljs-string\">'login'</span>);\n  });\n</code></pre>","children":[]}],"payload":{"lines":"1000,1001","fold":1}},{"content":"Création composant Login","children":[{"content":"<pre><code class=\"language-php\">  php artisan make:volt auth/login --<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span>\n</span></code></pre>","children":[]}],"payload":{"lines":"1010,1011","fold":1}},{"content":"Code Login","children":[{"content":"<pre><code class=\"language-php\">&lt;?php\n  use Livewire\\Attributes\\{Layout, Validate, Title};\n  use Livewire\\Volt\\Component;\n  use Illuminate\\Support\\Str;\n  use Illuminate\\Auth\\Events\\Lockout;\n  use Illuminate\\Support\\Facades\\Auth;\n  use Illuminate\\Support\\Facades\\RateLimiter;\n  use Illuminate\\Validation\\ValidationException;\n  \n  new\n  #[Layout('components.layouts.auth')]\n  class extends Component {\n  \n    #[Validate('required|string|email')]\n    public string $email = '';\n    #[Validate('required|string')]\n    public string $password = '';\n    #[Validate('boolean')]\n    public bool $remember = false;\n\n  \tpublic function login() {\n      $this-&gt;validate();\n      $this-&gt;authenticate();\n      Session::regenerate();\n      if (auth()-&gt;user()-&gt;isAdmin()) {\n          return redirect()-&gt;intended('/admin/dashboard');\n      }\n      $this-&gt;redirectIntended(default: url('/'), navigate: true);\n  \t}\n  \n    public function authenticate(): void {\n      $this-&gt;ensureIsNotRateLimited();\n      if (! Auth::attempt($this-&gt;only(['email', 'password']), $this-&gt;remember)) {\n        RateLimiter::hit($this-&gt;throttleKey());\n        throw ValidationException::withMessages([\n            'email' =&gt; __('auth.failed'),\n        ]);\n      }\n      RateLimiter::clear($this-&gt;throttleKey());\n    }\n  \n    protected function ensureIsNotRateLimited(): void {\n      if (! RateLimiter::tooManyAttempts($this-&gt;throttleKey(), 5)) {\n        return;\n      }\n      event(new Lockout(request()));\n      $seconds = RateLimiter::availableIn($this-&gt;throttleKey());\n      throw ValidationException::withMessages([\n        'email' =&gt; trans('auth.throttle', [\n          'seconds' =&gt; $seconds,\n          'minutes' =&gt; ceil($seconds / 60),\n        ]),\n      ]);\n    }\n\n    protected function throttleKey(): string {\n      return Str::transliterate(Str::lower($this-&gt;email).'|'. request()-&gt;ip());\n    }\n  \n  }; ?&gt;\n  \n  @section('title', __('Login'))\n  &lt;div&gt;\n    &lt;x-card class=\"flex items-center justify-center h-screen\"&gt;\n      &lt;a href=\"/\" title=\"{{ __('Return on site') }}\"&gt;\n        &lt;x-card class=\"items-center\" title=\"{{ __('Login') }}\" shadow separator progress-indicator /&gt;\n      &lt;/a&gt;\n      &lt;x-form wire:submit=\"login\"&gt;\n        &lt;x-input label=\"{{ __('E-mail') }} *\" wire:model=\"email\" icon=\"o-envelope\" type=\"email\" inline /&gt;\n        &lt;x-input label=\"{{ __('Password') }} *\" wire:model=\"password\" type=\"password\" icon=\"o-key\" type=\"password\" inline /&gt;\n        &lt;x-checkbox label=\"{{ __('Remember me') }}\" wire:model=\"remember\" /&gt;\n        &lt;p class=\"text-[12px] text-right italic my-[-10px]\"&gt;* : {{__('Required information') }}&lt;/p&gt; \n        &lt;x-slot:actions&gt;\n          &lt;div class=\"flex flex-col space-y-2 flex-end sm:flex-row sm:space-y-0 sm:space-x-2\"&gt;\n            &lt;x-button label=\"{{ __('Login') }}\" type=\"submit\" icon=\"o-paper-airplane\" class=\"ml-2 btn-primary sm:order-1\" /&gt;\n            &lt;div class=\"flex flex-col space-y-2 flex-end sm:flex-row sm:space-y-0 sm:space-x-2\"&gt;\n              &lt;x-button label=\"{{ __('Forgot your password?') }}\" class=\"btn-ghost\" link=\"/forgot-password\" /&gt;\n              &lt;x-button label=\"{{ __('Register') }}\" class=\"btn-ghost\" link=\"/register\" /&gt;\n            &lt;/div&gt;\n          &lt;/div&gt;\n        &lt;/x-slot:actions&gt;\n      &lt;/x-form&gt;\n    &lt;/x-card&gt;\n  &lt;/div&gt;\n</code></pre>","children":[]}],"payload":{"lines":"1016,1017","fold":1}},{"content":"Traduction pour formulaire Login","children":[{"content":"<pre><code class=\"language-json\">  <span class=\"hljs-attr\">\"Forgot your password?\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Mot de passe oublié ?\"</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">\"Remember me\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Se rappeler de moi\"</span>\n</code></pre>","children":[]}],"payload":{"lines":"1105,1106","fold":1}},{"content":"<strong><a href=\"http://127.0.0.1:8000/login\">Rendu Login</a></strong> (Tester la validation des champs)","children":[],"payload":{"lines":"1112,1113"}}],"payload":{"lines":"998,999"}},{"content":"Oubli et reset du mot de passe","children":[{"content":"Gestion des sessions","children":[{"content":"Création composant messages en session","children":[{"content":"<pre><code class=\"language-php\">  php artisan make:component session-status --view\n</code></pre>","children":[]}],"payload":{"lines":"1118,1119"}},{"content":"Code composant Session","children":[{"content":"<pre><code class=\"language-php\">  @<span class=\"hljs-title function_ invoke__\">props</span>([<span class=\"hljs-string\">'status'</span>])\n  \n  @<span class=\"hljs-keyword\">if</span> (<span class=\"hljs-variable\">$status</span>)\n    &lt;div {{ <span class=\"hljs-variable\">$attributes</span>-&gt;<span class=\"hljs-title function_ invoke__\">merge</span>([<span class=\"hljs-string\">'class'</span> =&gt; <span class=\"hljs-string\">'font-medium text-sm text-green-600'</span>]) }}&gt;\n      {{ <span class=\"hljs-variable\">$status</span> }}\n    &lt;/div&gt;\n  @<span class=\"hljs-keyword\">endif</span>\n</code></pre>","children":[]}],"payload":{"lines":"1124,1125"}}],"payload":{"lines":"1116,1117","fold":1}},{"content":"Gestion de l'oubli du mot de passe","children":[{"content":"Route pour forgot-password","children":[{"content":"<pre><code class=\"language-php\">  <span class=\"hljs-title class_\">Route</span>::<span class=\"hljs-title function_ invoke__\">middleware</span>(<span class=\"hljs-string\">'guest'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">group</span>(function () {\n    ...\n    <span class=\"hljs-title class_\">Volt</span>::<span class=\"hljs-title function_ invoke__\">route</span>(<span class=\"hljs-string\">'/forgot-password'</span>, <span class=\"hljs-string\">'auth.forgot-password'</span>);\n  });\n</code></pre>","children":[]}],"payload":{"lines":"1138,1139","fold":1}},{"content":"Création composant oubli mot de passe","children":[{"content":"<pre><code class=\"language-php\">  php artisan make:volt auth/forgot-password --<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span>\n</span></code></pre>","children":[]}],"payload":{"lines":"1147,1148","fold":1}},{"content":"Composant forgot-password","children":[{"content":"<pre><code class=\"language-php\">  &lt;?php\n  use Illuminate\\Support\\Facades\\Password;\n  use Livewire\\Attributes\\{ Layout, Title };\n  use Livewire\\Volt\\Component;\n  \n  new\n  #[Layout('components.layouts.auth')]\n  class extends Component {\n  \n    public string $email = '';\n    public function sendPasswordResetLink(): void {\n      $this-&gt;validate([\n        'email' =&gt; ['required', 'string', 'email'],\n      ]);\n      $status = Password::sendResetLink(\n          $this-&gt;only('email')\n      );\n      if (Password::RESET_LINK_SENT != $status) {\n          $this-&gt;addError('email', __($status));\n\n          return;\n      }\n  \n      $this-&gt;reset('email');\n      session()-&gt;flash('status', __($status));\n    }\n  }; ?&gt;\n  \n@section('title', __('Password renewal'))\n&lt;div&gt;\n  &lt;x-card class=\"flex items-center justify-center h-[96vh]\" data-link='/' data-tip=\"{{  __('Return on site') }}\" title=\"{{ __('Password renewal') }}\" subtitle=\"{{ __('Forgot your password? No problem. Just let us know your email address and we will email you a password reset link that will allow you to choose a new one.') }}\" shadow separator progress-indicator id='my-title'&gt;\n    &lt;x-session-status class=\"mb-4\" :status=\"session('status')\" /&gt;\n    &lt;x-form wire:submit=\"sendPasswordResetLink\"&gt;\n      &lt;x-input label=\"{{ __('E-mail') }} *\" wire:model=\"email\" icon=\"o-envelope\" inline required /&gt;\n      &lt;x-slot:actions&gt;\n        &lt;x-button label=\"{{ __('Email Password Reset Link') }}\" type=\"submit\" icon=\"o-paper-airplane\" class=\"btn-primary\" /&gt;\n      &lt;/x-slot:actions&gt;\n    &lt;/x-form&gt;\n  &lt;/x-card&gt;\n  &lt;script&gt;\n  document.addEventListener('DOMContentLoaded', function() {\n    const card = document.getElementById('my-title');\n    const link = card.getAttribute('data-link');\n    const tip = card.getAttribute('data-tip');\n    const divs = card.getElementsByTagName('div');\n    // console.log(divs)\n    const titleElement = card.querySelector('title');\n    if (divs.length &gt;= 4) {\n      const titleElement = divs[3]; // Cible le quatrième &lt;div&gt;\n      titleElement.innerHTML = `&lt;a href=\"${link}\" title=\"${tip}\"&gt;${titleElement.innerHTML}&lt;/a&gt;`;\n    }\n  });\n  &lt;/script&gt;\n&lt;/div&gt;\n</code></pre>","children":[]}],"payload":{"lines":"1153,1154","fold":1}},{"content":"Traduction pour forgot-password","children":[{"content":"<pre><code class=\"language-json\">  <span class=\"hljs-attr\">\"Password renewal\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Renouvellement du mot de passe\"</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">\"Forgot your password? No problem. Just let us know your email address and we will email you a password reset link that will allow you to choose a new one.\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Mot de passe oublié ? Pas de problème. Indiquez-nous simplement votre adresse courriel et nous vous enverrons par courriel un lien de réinitialisation du mot de passe pour en choisir un nouveau.\"</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">\"Email Password Reset Link\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Envoi du lien de renouvellement\"</span>\n</code></pre>","children":[]}],"payload":{"lines":"1212,1213","fold":1}},{"content":"<strong><a href=\"http://127.0.0.1:8000/forgot-password\">Rendu forgot-password</a></strong> (Tester la validation du champs - Ne pas soumettre le Formulaire)","children":[],"payload":{"lines":"1220,1221"}}],"payload":{"lines":"1136,1137","fold":1}},{"content":"Gestion du reset du mot de passe","children":[{"content":"Route pour reset-password","children":[{"content":"<pre><code class=\"language-php\">  <span class=\"hljs-title class_\">Route</span>::<span class=\"hljs-title function_ invoke__\">middleware</span>(<span class=\"hljs-string\">'guest'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">group</span>(function () {\n    ...\n    <span class=\"hljs-title class_\">Volt</span>::<span class=\"hljs-title function_ invoke__\">route</span>(<span class=\"hljs-string\">'/reset-password/{token}'</span>, <span class=\"hljs-string\">'auth.reset-password'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">name</span>(<span class=\"hljs-string\">'password.reset'</span>);\n  });\n</code></pre>","children":[]}],"payload":{"lines":"1224,1225","fold":1}},{"content":"Création composant reset-password","children":[{"content":"<pre><code class=\"language-php\">  php artisan make:volt auth/reset-password --<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span>\n</span></code></pre>","children":[]}],"payload":{"lines":"1233,1234","fold":1}},{"content":"Composant reset-password","children":[{"content":"<pre><code class=\"language-php\">  &lt;?php\n  use Illuminate\\Support\\Str;\n  use Livewire\\Volt\\Component;\n  use Illuminate\\Validation\\Rules;\n  use Livewire\\Attributes\\{Layout, Locked};\n  use Illuminate\\Auth\\Events\\PasswordReset;\n  use Illuminate\\Support\\Facades\\{Hash, Password, Session};\n  \n  new\n  #[Layout('components.layouts.auth')]\n  class extends Component {\n    #[Locked]\n    public string $token                 = '';\n\n    public string $email                 = '';\n    public string $password              = '';\n    public string $password_confirmation = '';\n    \n    public function mount(string $token): void {\n      $this-&gt;token = $token;\n      $this-&gt;email = request()-&gt;input('email');\n    }\n    \n    public function resetPassword(): void {\n      $this-&gt;validate([\n        'token'    =&gt; ['required'],\n        'email'    =&gt; ['required', 'string', 'email'],\n        'password' =&gt; ['required', 'string', 'confirmed', Rules\\Password::defaults()],\n      ]);\n  \n      $status = Password::reset(\n        $this-&gt;only('email', 'password', 'password_confirmation', 'token'),\n        function ($user) {\n          $user-&gt;forceFill([\n              'password'       =&gt; Hash::make($this-&gt;password),\n              'remember_token' =&gt; Str::random(60),\n          ])-&gt;save();\n          event(new PasswordReset($user));\n        }\n      );\n  \n      if (Password::PASSWORD_RESET != $status) {\n          $this-&gt;addError('email', __($status));\n\n          return;\n      }\n  \n      Session::flash('status', __($status));\n      $this-&gt;redirectRoute('login', navigate: true);\n    }\n  }; ?&gt;\n  \n  @section('title', __('Reset Password'))\n  &lt;div&gt;\n    &lt;x-card class=\"flex items-center justify-center h-[96vh]\" shadow separator progress-indicator&gt;\n      &lt;a href=\"/\" title=\"{{ __('Return on site') }}\"&gt;\n          &lt;x-card class=\"items-center\" title=\"{{__('Reset Password')}}\" shadow separator progress-indicator /&gt;\n      &lt;/a&gt;\n      &lt;x-session-status class=\"mb-4\" :status=\"session('status')\" /&gt;\n      &lt;x-form wire:submit=\"resetPassword\"&gt;\n        &lt;x-input label=\"{{ __('E-mail') }} *\" wire:model=\"email\" icon=\"o-envelope\" inline /&gt;\n        &lt;x-input label=\"{{ __('Password') }} *\" wire:model=\"password\" type=\"password\" icon=\"o-key\" inline /&gt;\n        &lt;x-input label=\"{{ __('Confirm Password') }} *\" wire:model=\"password_confirmation\" type=\"password\" icon=\"o-key\" inline required autocomplete=\"new-password\" /&gt;\n        &lt;p class=\"text-[12px] text-right italic my-[-10px]\"&gt;* : {{__('Required information') }}&lt;/p&gt;\n        &lt;x-slot:actions&gt;\n          &lt;x-button label=\"{{ __('Reset Password') }}\" type=\"submit\" icon=\"o-paper-airplane\" class=\"btn-primary\" /&gt;\n        &lt;/x-slot:actions&gt;\n      &lt;/x-form&gt;\n    &lt;/x-card&gt;\n&lt;/div&gt;\n</code></pre>","children":[]}],"payload":{"lines":"1239,1240","fold":1}},{"content":"<strong><a href=\"http://127.0.0.1:8000/forgot-password\">Rendu forgot-password</a></strong> (Tester la soumission du Formulaire)","children":[],"payload":{"lines":"1314,1315"}},{"content":"Voir le email reçu","children":[{"content":"<pre data-lines=\"1318,1321\"><code>- Par défaut: Dans storage\\logs\\laravel.log (Tout à la fin du fichier, le code HTML du courriel)\n\n- OU, pour avoir le vrai rendu de ce courriel, une très bonne solution GRATUITE est MailHog :\n</code></pre>","children":[],"payload":{"lines":"1318,1321"}}],"payload":{"lines":"1316,1317","fold":1}},{"content":"<a href=\"https://github.com/mailhog/MailHog\">Installer MailHog</a>","children":[{"content":"<pre data-lines=\"1324,1325\"><code>- Dans .env :\n</code></pre>","children":[],"payload":{"lines":"1324,1325"}},{"content":"<pre><code class=\"language-php\">  <span class=\"hljs-comment\"># Start MailHog</span>\n  <span class=\"hljs-comment\"># Go to: http://localhost:8025</span>\n  MAIL_MAILER=smtp\n  MAIL_HOST=localhost\n  MAIL_PORT=<span class=\"hljs-number\">1025</span>\n  MAIL_USERNAME=Admin\n  MAIL_PASSWORD=<span class=\"hljs-literal\">null</span>\n  MAIL_ENCRYPTION=<span class=\"hljs-literal\">null</span>\n  MAIL_FROM_ADDRESS=<span class=\"hljs-string\">\"admin@example.com\"</span>\n  MAIL_FROM_NAME=<span class=\"hljs-string\">\"${APP_NAME}\"</span>\n</code></pre>","children":[]},{"content":"<pre data-lines=\"1339,1341\"><code>- Lancer le serveur MailHog :\n  → Exécuter le fichier éxécutable récupéré\n</code></pre>","children":[],"payload":{"lines":"1339,1341"}}],"payload":{"lines":"1322,1323","fold":1}},{"content":"<strong><a href=\"http://127.0.0.1:8025\">URL du rendu des courriels avec MailHog</a></strong>","children":[],"payload":{"lines":"1342,1343"}}],"payload":{"lines":"1222,1223","fold":1}}],"payload":{"lines":"1114,1115"}},{"content":"Réf.: <em><strong><a href=\"https://laravel.sillo.org/posts/mon-cms-lauthentification\">https://laravel.sillo.org/posts/mon-cms-lauthentification</a></strong></em>","children":[],"payload":{"lines":"1344,1345"}}],"payload":{"lines":"886,887","fold":1}},{"content":"Réf.: <em><strong><a href=\"https://laravel.sillo.org/posts/mon-cms-lauthentification\">https://laravel.sillo.org/posts/mon-cms-lauthentification</a></strong></em>","children":[],"payload":{"lines":"1346,1347"}}],"payload":{"lines":"836,837","fold":1}},{"content":"- La page d'accueil (HomePage)","children":[{"content":"Route index &amp; category","children":[{"content":"<pre><code class=\"language-php\">  <span class=\"hljs-title class_\">Volt</span>::<span class=\"hljs-title function_ invoke__\">route</span>(<span class=\"hljs-string\">'/'</span>, <span class=\"hljs-string\">'index'</span>);\n<span class=\"hljs-comment\">// Supprimer : Volt::route('/', 'users.index');</span>\n  <span class=\"hljs-title class_\">Volt</span>::<span class=\"hljs-title function_ invoke__\">route</span>(<span class=\"hljs-string\">'/category/{slug}'</span>, <span class=\"hljs-string\">'index'</span>);\n</code></pre>","children":[]}],"payload":{"lines":"1350,1351","fold":1}},{"content":"Création composant index","children":[{"content":"<pre><code class=\"language-php\">  php artisan make:volt index --<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> \n</span></code></pre>","children":[]}],"payload":{"lines":"1358,1359","fold":1}},{"content":"Les images","children":[{"content":"<strong>php artisan storage:link</strong><br>\n<em>(Crée un lien symbolique de public/storage vers storage/app/public)</em>","children":[],"payload":{"lines":"1366,1368"}},{"content":"<a href=\"https://laravel.sillo.org/tuto/moncms3.zip\">Télécharger le projet et copier storage/app/public/**/*.*</a>","children":[],"payload":{"lines":"1368,1369"}},{"content":"Pour avoir vos images dans votre dépôt git, vu que publiques, supprimer :<br>\n- storage/app/.gitignore<br>\n- storage/app/public/.gitignore","children":[],"payload":{"lines":"1369,1373"}}],"payload":{"lines":"1364,1365","fold":1}},{"content":"Layout app","children":[{"content":"<pre><code class=\"language-php\">  &lt;!DOCTYPE html&gt;\n  &lt;html lang=\"{{ str_replace('_', '-', app()-&gt;getLocale()) }}\"&gt;\n  &lt;head&gt;\n    &lt;meta charset=\"utf-8\"&gt;\n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, viewport-fit=cover\"&gt;\n    &lt;meta name=\"csrf-token\" content=\"{{ csrf_token() }}\"&gt;\n    &lt;title&gt;\n      {{ (isset($title) ? $title . ' | ' : (View::hasSection('title') ? View::getSection('title') . ' | ' : '')) . config('app.name') }}\n    &lt;/title&gt;\n    &lt;meta name=\"description\" content=\"@yield('description')\"&gt;\n    &lt;meta name=\"keywords\" content=\"@yield('keywords')\"&gt;\n    @vite(['resources/css/app.css', 'resources/js/app.js'])\n  &lt;/head&gt;\n  \n  &lt;body class=\"min-h-screen font-sans antialiased bg-base-200/50 dark:bg-base-200\"&gt;\n    {{-- HERO --}}\n    &lt;div class=\"min-h-[10vw] hero\" style=\"background-image: url({{ asset('storage/hero.jpg') }});\"&gt;\n      &lt;div class=\"bg-opacity-60 hero-overlay\"&gt;\n      &lt;/div&gt;\n      &lt;a href=\"{{ '/' }}\"&gt;\n      &lt;div class=\"text-center hero-content text-neutral-content\"&gt;\n        &lt;div&gt;\n          &lt;h1 class=\"mb-5 text-4xl font-bold sm:text-4xl md:text-5xl lg:text-6xl xl:text-7xl\"&gt;\n              Mon Titre\n          &lt;/h1&gt;\n          &lt;p class=\"mb-1 text-lg sm:text-xl md:text-1xl lg:text-2xl xl:text-3xl\"&gt;\n              Mon sous-titre\n          &lt;/p&gt;\n        &lt;/div&gt;              \n      &lt;/div&gt;\n    &lt;/a&gt;\n    &lt;/div&gt;\n  &lt;/body&gt;\n</code></pre>","children":[]}],"payload":{"lines":"1373,1374","fold":1}},{"content":"La barre de navigation","children":[{"content":"La Navbar (Grand écran ou bouton burger)","children":[{"content":"Création composant navbar","children":[{"content":"<pre><code class=\"language-php\">  php artisan make:volt navigation/navbar --<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span>\n</span></code></pre>","children":[]}],"payload":{"lines":"1415,1416","fold":1}},{"content":"Code composant navbar","children":[{"content":"<pre><code class=\"language-php\">&lt;?php\n  use Illuminate\\Support\\Facades\\{Auth, Session};\n  use Livewire\\Volt\\Component;\n  \n  new class extends Component {\n  \n    public function logout(): void {\n      Auth::guard('web')-&gt;logout();\n      Session::invalidate();\n      Session::regenerateToken();\n      $this-&gt;redirect('/');\n    }\n  }; ?&gt;\n  \n  &lt;x-nav sticky full-width &gt;\n    &lt;x-slot:brand&gt;\n      &lt;label for=\"main-drawer\" class=\"mr-3 sm:hidden\"&gt;\n        &lt;x-icon name=\"o-bars-3\" class=\"cursor-pointer\" /&gt;\n      &lt;/label&gt;\n    &lt;/x-slot:brand&gt;\n    \n    &lt;x-slot:actions&gt;\n      &lt;span class=\"hidden sm:block\"&gt;\n        @if ($user = auth()-&gt;user())\n          &lt;x-dropdown&gt;\n            &lt;x-slot:trigger&gt;\n              &lt;x-button label=\"{{ $user-&gt;name }}\" class=\"btn-ghost\" /&gt;\n            &lt;/x-slot:trigger&gt;\n          &lt;x-menu-item title=\"{{ __('Logout') }}\" wire:click=\"logout\" /&gt;\n          &lt;/x-dropdown&gt;\n          @else\n            &lt;x-button label=\"{{ __('Login') }}\" link=\"/login\" class=\"btn-ghost\" /&gt;\n        @endif\n      &lt;/span&gt;\n    &lt;/x-slot:actions&gt;\n  &lt;/x-nav&gt;\n</code></pre>","children":[]}],"payload":{"lines":"1421,1422","fold":1}},{"content":"Layout pour le composant navbar","children":[{"content":"<pre data-lines=\"1464,1470\"><code>Attention: À ce stade, se connecter fait apparaître une erreur...\n(Juste rafraîchir, et tester responsivité - Réduire taille de l'écran...)\n\nDans components/layouts/app.blade.php :\n\nRemplacer le bloc :\n</code></pre>","children":[],"payload":{"lines":"1464,1470"}},{"content":"<pre><code class=\"language-php\">  {{-- NAVBAR mobile only --}}\n  &lt;x-nav&gt;\n    ...\n  &lt;x-nav&gt;\n</code></pre>","children":[]},{"content":"<pre data-lines=\"1478,1479\"><code>Par :\n</code></pre>","children":[],"payload":{"lines":"1478,1479"}},{"content":"<pre><code class=\"language-php\">  ...\n  {{-- NAVBAR --}}\n  &lt;livewire:navigation.navbar/&gt;\n&lt;/body&gt;\n</code></pre>","children":[]}],"payload":{"lines":"1462,1463","fold":1}}],"payload":{"lines":"1413,1414","fold":1}},{"content":"La Sidebar (Petit écran)","children":[{"content":"Création composant sidebar","children":[{"content":"<pre><code class=\"language-php\">  php artisan make:volt navigation/sidebar --<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span>\n</span></code></pre>","children":[]}],"payload":{"lines":"1489,1490","fold":1}},{"content":"Code composant sidebar","children":[{"content":"<pre><code class=\"language-php\">  &lt;?php\n  use Illuminate\\Support\\Facades\\{Auth, Session};\n  use Livewire\\Volt\\Component;\n  \n  new class() extends Component {\n  \n    public function logout(): void {\n      Auth::guard('web')-&gt;logout();\n      Session::invalidate();\n      Session::regenerateToken();\n      $this-&gt;redirect('/');\n    }\n  };\n  ?&gt;\n  \n  &lt;div&gt;\n    &lt;x-menu activate-by-route&gt;\n      @if($user = auth()-&gt;user())\n        &lt;x-menu-separator /&gt;\n        &lt;x-list-item :item=\"$user\" value=\"name\" sub-value=\"email\" no-separator no-hover class=\"-mx-2 !-my-2 rounded\"&gt;\n          &lt;x-slot:actions&gt;\n            &lt;x-button icon=\"o-power\" wire:click=\"logout\" class=\"btn-circle btn-ghost btn-xs\" tooltip-left=\"{{ __('Logout') }}\" no-wire-navigate /&gt;\n          &lt;/x-slot:actions&gt;\n        &lt;/x-list-item&gt;\n        &lt;x-menu-separator /&gt;\n      @else\n        &lt;x-menu-item title=\"{{ __('Login') }}\" link=\"/login\" /&gt;\n      @endif\n    &lt;/x-menu&gt;\n  &lt;/div&gt;\n</code></pre>","children":[]}],"payload":{"lines":"1495,1496","fold":1}},{"content":"Layout pour le composant sidebar","children":[{"content":"<pre><code class=\"language-php\">  ...\n  {{-- MAIN --}}\n  &lt;x-main full-width&gt;\n  \n    {{-- SIDEBAR --}}\n    &lt;x-slot:sidebar drawer=\"main-drawer\" collapsible class=\"bg-base-100 lg:bg-inherit lg:hidden\"&gt;\n      &lt;livewire:navigation.sidebar /&gt;\n    &lt;/x-slot:sidebar&gt;\n\n    {{-- SLOT --}}\n    &lt;x-slot:content&gt;\n      {{ $slot }}\n    &lt;/x-slot:content&gt;\n  \n  &lt;/x-main&gt;\n\n&lt;/body&gt;\n</code></pre>","children":[]}],"payload":{"lines":"1530,1531","fold":1}}],"payload":{"lines":"1487,1488","fold":1}}],"payload":{"lines":"1411,1412","fold":1}},{"content":"Bloc central : Les articles","children":[{"content":"Création app/Repositories/PostRepository.php","children":[{"content":"<pre><code class=\"language-php\">  <span class=\"hljs-meta\">&lt;?php</span>\n  <span class=\"hljs-keyword\">namespace</span> <span class=\"hljs-title class_\">App</span>\\<span class=\"hljs-title class_\">Repositories</span>;\n  \n  <span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">App</span>\\<span class=\"hljs-title\">Models</span>\\{<span class=\"hljs-title\">Category</span>, <span class=\"hljs-title\">Post</span>};\n  <span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Database</span>\\<span class=\"hljs-title\">Eloquent</span>\\<span class=\"hljs-title\">Builder</span>;\n  <span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Pagination</span>\\<span class=\"hljs-title\">LengthAwarePaginator</span>;\n  \n  <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">PostRepository</span>\n  </span>{\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">getPostsPaginate</span>(<span class=\"hljs-params\">?Category <span class=\"hljs-variable\">$category</span></span>): <span class=\"hljs-title\">LengthAwarePaginator</span> </span>{\n      <span class=\"hljs-variable\">$query</span> = <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">getBaseQuery</span>()-&gt;<span class=\"hljs-title function_ invoke__\">orderBy</span>(<span class=\"hljs-string\">'pinned'</span>, <span class=\"hljs-string\">'desc'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">latest</span>();\n      \n      <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-variable\">$category</span>) {\n        <span class=\"hljs-variable\">$query</span>-&gt;<span class=\"hljs-title function_ invoke__\">whereBelongsTo</span>(<span class=\"hljs-variable\">$category</span>);\n      }\n      \n      <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable\">$query</span>-&gt;<span class=\"hljs-title function_ invoke__\">paginate</span>(<span class=\"hljs-title function_ invoke__\">config</span>(<span class=\"hljs-string\">'app.pagination'</span>));\n    }\n  \n    <span class=\"hljs-keyword\">protected</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">getBaseQuery</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">Builder</span> </span>{\n      <span class=\"hljs-variable\">$specificReqs</span> = [\n        <span class=\"hljs-string\">'mysql'</span>  =&gt; <span class=\"hljs-string\">\"LEFT(body, LOCATE(' ', body, 700))\"</span>,\n        <span class=\"hljs-string\">'sqlite'</span> =&gt; <span class=\"hljs-string\">'substr(body, 1, 700)'</span>,\n        <span class=\"hljs-string\">'pgsql'</span>  =&gt; <span class=\"hljs-string\">'substring(body from 1 for 700)'</span>,\n      ];\n      \n      <span class=\"hljs-variable\">$usedDbSystem</span> = <span class=\"hljs-title function_ invoke__\">env</span>(<span class=\"hljs-string\">'DB_CONNECTION'</span>, <span class=\"hljs-string\">'mysql'</span>);\n      \n      <span class=\"hljs-keyword\">if</span> (!<span class=\"hljs-keyword\">isset</span>(<span class=\"hljs-variable\">$specificReqs</span>[<span class=\"hljs-variable\">$usedDbSystem</span>])) {\n        <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">\\Exception</span>(<span class=\"hljs-string\">\"Base de données non supportée: <span class=\"hljs-subst\">{$usedDbSystem}</span>\"</span>);\n      }\n  \n    <span class=\"hljs-variable\">$adaptedReq</span> = <span class=\"hljs-variable\">$specificReqs</span>[<span class=\"hljs-variable\">$usedDbSystem</span>];\n    \n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title class_\">Post</span>::<span class=\"hljs-title function_ invoke__\">select</span>(<span class=\"hljs-string\">'id'</span>, <span class=\"hljs-string\">'slug'</span>, <span class=\"hljs-string\">'image'</span>, <span class=\"hljs-string\">'title'</span>, <span class=\"hljs-string\">'user_id'</span>, <span class=\"hljs-string\">'category_id'</span>, <span class=\"hljs-string\">'created_at'</span>, <span class=\"hljs-string\">'pinned'</span>)\n      -&gt;<span class=\"hljs-title function_ invoke__\">selectRaw</span>(<span class=\"hljs-string\">\"\n        CASE\n          WHEN LENGTH(body) &lt;= 300 THEN body\n          ELSE <span class=\"hljs-subst\">{$adaptedReq}</span>\n        END AS excerpt\n      \"</span>,)\n    -&gt;<span class=\"hljs-title function_ invoke__\">with</span>(<span class=\"hljs-string\">'user:id,name'</span>, <span class=\"hljs-string\">'category'</span>)\n    -&gt;<span class=\"hljs-title function_ invoke__\">whereActive</span>(<span class=\"hljs-literal\">true</span>);\n    }\n  }\n</code></pre>","children":[]}],"payload":{"lines":"1554,1555","fold":1}},{"content":"config/app.php","children":[{"content":"<pre><code class=\"language-php\"><span class=\"hljs-keyword\">return</span> [\n  ...\n  <span class=\"hljs-string\">'pagination'</span>  =&gt;  <span class=\"hljs-number\">6</span>,\n  <span class=\"hljs-string\">'excerptSize'</span> =&gt; <span class=\"hljs-number\">30</span>,\n]\n</code></pre>","children":[]}],"payload":{"lines":"1604,1605","fold":1}},{"content":"Code composant index","children":[{"content":"<pre><code class=\"language-php\">  &lt;?php\n  use App\\Models\\Category;\n  use Livewire\\Volt\\Component;\n  use Livewire\\WithPagination;\n  use App\\Repositories\\PostRepository;\n  use Illuminate\\Pagination\\LengthAwarePaginator;\n  \n  new class extends Component {\n    use WithPagination;\n  \n    public ?Category $category = null;\n  \n    public function mount(string $slug = ''): void {\n      if (request()-&gt;is('category/*')) {\n        $this-&gt;category = $this-&gt;getCategoryBySlug($slug);\n      } \n    }\n  \n    public function getPosts(): LengthAwarePaginator {\n      $postRepository = new PostRepository();\n\n      return $postRepository-&gt;getPostsPaginate($this-&gt;category);\n    }\n  \n    protected function getCategoryBySlug(string $slug): ?Category {\n\n      return 'category' === request()-&gt;segment(1) ? Category::whereSlug($slug)-&gt;firstOrFail() : null;\n    }\n  \n    public function with(): array {\n\n      return ['posts' =&gt; $this-&gt;getPosts()];\n    }\n  }; ?&gt;\n\n  @section('title',__('Home'))\n  &lt;div class=\"relative grid items-center w-full py-5 mx-auto md:px-6 max-w-12xl\"&gt;\n    @if ($category)\n      &lt;x-header title=\"{{ __('Posts for category ') }} {{ $category-&gt;title }}\" size=\"text-2xl sm:text-3xl   md:text-4xl\" /&gt;\n    @endif\n    &lt;div class=\"mb-5 mary-table-pagination\"&gt;\n      {{ $posts-&gt;links() }}\n    &lt;/div&gt;\n    &lt;div class=\"container mx-auto\"&gt;\n      &lt;div class=\"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3\"&gt;\n        @forelse($posts as $post)\n          &lt;x-card class=\"w-full transition duration-5500 ease-in-out shadow-md shadow-gray-500 hover:shadow-xl hover:shadow-orange-400\" title=\"{!! $post-&gt;title !!}\"&gt;\n            &lt;div class=\"text-justify\"&gt;\n              {!! str(strip_tags($post-&gt;excerpt))-&gt;words(config('app.excerptSize')) !!}\n            &lt;/div&gt;\n            &lt;br&gt;\n            &lt;hr&gt;\n            &lt;div class=\"flex justify-between\"&gt;\n              &lt;p wire:click=\"\" class=\"text-left cursor-pointer\"&gt;{{ $post-&gt;user-&gt;name }}&lt;/p&gt;\n              &lt;p class=\"text-right\"&gt;&lt;em&gt;{{ $post-&gt;created_at-&gt;isoFormat('LL') }}&lt;/em&gt;&lt;/p&gt;\n            &lt;/div&gt;\n            @if($post-&gt;image)\n              &lt;x-slot:figure&gt;\n                &lt;a href=\"{{ url('/posts/' . $post-&gt;slug) }}\"&gt;\n                  &lt;img src=\"{{ asset('storage/photos/' . $post-&gt;image) }}\" alt=\"{{ $post-&gt;title }}\" /&gt;\n                &lt;/a&gt;\n              &lt;/x-slot:figure&gt;\n            @endif\n            &lt;x-slot:menu&gt;\n              @if ($post-&gt;pinned)\n                &lt;x-badge value=\"{{ __('Pinned') }}\" class=\"p-3 badge-warning\" /&gt;\n              @endif\n            &lt;/x-slot:menu&gt;\n            &lt;x-slot:actions&gt;\n              &lt;div class=\"flex flex-col items-end space-y-2 sm:items-start sm:flex-row sm:space-y-0 sm:space-x-2\"&gt;\n                &lt;x-popover&gt;\n                  &lt;x-slot:trigger&gt;\n                    &lt;x-button label=\"{{ $post-&gt;category-&gt;title }}\" link=\"{{ url('/category/' . $post-&gt;category-&gt;slug) }}\" class=\"mt-1 btn-outline btn-sm\" /&gt;\n                  &lt;/x-slot:trigger&gt;\n                  &lt;x-slot:content class=\"pop-small\"&gt;\n                      @lang('Show this category')\n                  &lt;/x-slot:content&gt;\n                &lt;/x-popover&gt;\n                &lt;x-popover&gt;\n                  &lt;x-slot:trigger&gt;\n                    &lt;x-button label=\"{{ __('Read') }}\" link=\"{{ url('/posts/' . $post-&gt;slug) }}\" class=\"mt-1 btn-outline btn-sm\" /&gt;\n                  &lt;/x-slot:trigger&gt;\n                  &lt;x-slot:content class=\"pop-small\"&gt;\n                    @lang('Read this post')\n                  &lt;/x-slot:content&gt;\n                &lt;/x-popover&gt;\n              &lt;/div&gt;\n            &lt;/x-slot:actions&gt;\n          &lt;/x-card&gt;\n            @empty\n              &lt;div class=\"col-span-3\"&gt;\n                &lt;x-card title=\"{{ __('Nothing to show !') }}\"&gt;\n                  {{ __('No Post found with these criteria') }}\n                &lt;/x-card&gt;\n              &lt;/div&gt;\n            @endforelse\n          &lt;/div&gt;\n      &lt;/div&gt;\n    &lt;!-- Pagination inférieure --&gt;\n    &lt;div class=\"mt-5 mary-table-pagination\"&gt;\n      {{ $posts-&gt;links() }}\n    &lt;/div&gt;\n  &lt;/div&gt;\n</code></pre>","children":[]}],"payload":{"lines":"1614,1615","fold":1}},{"content":"Traduction pour les articles","children":[{"content":"<pre><code class=\"language-json\">  <span class=\"hljs-attr\">\"Show this category\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Voir cette catégorie\"</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">\"Read this post\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Lire cet article\"</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">\"Posts for category \"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Articles pour la catégorie \"</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">\"Read\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Lire\"</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">\"Nothing to show !\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Rien à montrer !\"</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">\"No Post found with these criteria\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Aucun article trouvé avec ces critères\"</span>\n</code></pre>","children":[]}],"payload":{"lines":"1722,1723","fold":1}}],"payload":{"lines":"1552,1553","fold":1}},{"content":"Styles pagination &amp; popups","children":[{"content":"<pre data-lines=\"1735,1736\"><code>- Pour le menu pagination : ./tailwind.config.js\n</code></pre>","children":[],"payload":{"lines":"1735,1736"}},{"content":"<pre><code class=\"language-php\">  export <span class=\"hljs-keyword\">default</span> {\n    content: [\n      ...\n      <span class=\"hljs-string\">\"./vendor/laravel/framework/src/Illuminate/Pagination/resources/views/*.blade.php\"</span>,\n    ],\n    ...\n  }\n</code></pre>","children":[]},{"content":"<pre data-lines=\"1747,1748\"><code>- Pour les Popups : ./resources/css/app.css :\n</code></pre>","children":[],"payload":{"lines":"1747,1748"}},{"content":"<pre><code class=\"language-php\">  .pop-small {\n    @apply !p-1 !px-2 text-sm border-warning text-center\n}\n</code></pre>","children":[]}],"payload":{"lines":"1733,1734","fold":1}},{"content":"Référence: <em><strong><a href=\"https://laravel.sillo.org/posts/mon-cms-la-page-daccueil\">https://laravel.sillo.org/posts/mon-cms-la-page-daccueil</a></strong></em>","children":[],"payload":{"lines":"1755,1756"}}],"payload":{"lines":"1348,1349","fold":1}},{"content":"- Les articles &amp; les pages","children":[{"content":"Composant posts.show","children":[{"content":"Route posts.show","children":[{"content":"<pre><code class=\"language-php\">  <span class=\"hljs-title class_\">Volt</span>::<span class=\"hljs-title function_ invoke__\">route</span>(<span class=\"hljs-string\">'/posts/{slug}'</span>, <span class=\"hljs-string\">'posts.show'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">name</span>(<span class=\"hljs-string\">'posts.show'</span>);\n</code></pre>","children":[]}],"payload":{"lines":"1761,1762","fold":1}},{"content":"PostRepository","children":[{"content":"<pre><code class=\"language-php\">  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">getPostBySlug</span>(<span class=\"hljs-params\"><span class=\"hljs-keyword\">string</span> <span class=\"hljs-variable\">$slug</span></span>): <span class=\"hljs-title\">Post</span> </span>{\n      \n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title class_\">Post</span>::<span class=\"hljs-title function_ invoke__\">with</span>(<span class=\"hljs-string\">'user:id,name'</span>, <span class=\"hljs-string\">'category'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">whereSlug</span>(<span class=\"hljs-variable\">$slug</span>)-&gt;<span class=\"hljs-title function_ invoke__\">firstOrFail</span>();\n  }\n</code></pre>","children":[]}],"payload":{"lines":"1767,1768","fold":1}},{"content":"Création composant posts.show","children":[{"content":"<pre><code class=\"language-php\">  php artisan make:volt posts/show --<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span>\n</span></code></pre>","children":[]}],"payload":{"lines":"1776,1777","fold":1}},{"content":"Code composant posts.show","children":[{"content":"<pre><code class=\"language-php\">  &lt;?php\n  use App\\Models\\Post;\n  use App\\Repositories\\PostRepository;\n  use Livewire\\Volt\\Component;\n  \n  new class extends Component {\n    public Post $post;\n    public function mount($slug): void {\n      $postRepository = new PostRepository();\n      $this-&gt;post     = $postRepository-&gt;getPostBySlug($slug);\n    }\n  }; ?&gt;\n\n  &lt;div&gt;\n    @section('title', $post-&gt;seo_title ?? $post-&gt;title)\n    @section('description', $post-&gt;meta_description)\n    @section('keywords', $post-&gt;meta_keywords)\n    &lt;div id=\"top\" class=\"flex justify-end gap-4\"&gt;\n      &lt;x-popover&gt;\n        &lt;x-slot:trigger&gt;\n          &lt;x-button class=\"btn-sm\"&gt;&lt;a href=\"{{ url('/category/' . $post-&gt;category-&gt;slug) }}\"&gt;{{ $post-&gt;category-&gt;title }}&lt;/a&gt;&lt;/x-button&gt;\n        &lt;/x-slot:trigger&gt;\n        &lt;x-slot:content class=\"pop-small\"&gt;\n          @lang('Show this category')\n        &lt;/x-slot:content&gt;\n      &lt;/x-popover&gt;\n    &lt;/div&gt;\n    &lt;x-header title=\"{!! $post-&gt;title !!}\" subtitle=\"{{ ucfirst($post-&gt;created_at-&gt;isoFormat('LLLL')) }} \" size=\"text-2xl sm:text-3xl md:text-4xl\" /&gt;\n    &lt;div class=\"relative items-center w-full py-5 mx-auto prose md:px-12 max-w-7xl\"&gt;\n      @if ($post-&gt;image)\n        &lt;div class=\"flex flex-col items-center mb-4\"&gt;\n          &lt;img src=\"{{ asset('storage/photos/' . $post-&gt;image) }}\" /&gt;\n        &lt;/div&gt;\n        &lt;br&gt;\n      @endif\n      &lt;div class=\"text-justify\"&gt;\n        {!! $post-&gt;body !!}\n      &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;br&gt;\n    &lt;hr&gt;\n    &lt;p&gt;@lang('By') {{ $post-&gt;user-&gt;name }}&lt;/p&gt;\n  &lt;/div&gt;\n</code></pre>","children":[]}],"payload":{"lines":"1782,1783","fold":1}},{"content":"Traduction posts.show","children":[{"content":"<pre><code class=\"language-json\">  <span class=\"hljs-attr\">\"By\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Par\"</span>\n</code></pre>","children":[]}],"payload":{"lines":"1830,1831","fold":1}}],"payload":{"lines":"1759,1760","fold":1}},{"content":"Dynamic Title/Description/Keywords (S.E.O.)","children":[{"content":"Dans le <strong>Layout</strong>","children":[{"content":"<pre data-lines=\"1840,1841\"><code>Rappel extrait title &amp; meta:\n</code></pre>","children":[],"payload":{"lines":"1840,1841"}},{"content":"<pre><code class=\"language-php\">  &lt;title&gt;{{ (<span class=\"hljs-keyword\">isset</span>(<span class=\"hljs-variable\">$title</span>) ? <span class=\"hljs-variable\">$title</span> . <span class=\"hljs-string\">' | '</span> :\n  (<span class=\"hljs-title class_\">View</span>::<span class=\"hljs-title function_ invoke__\">hasSection</span>(<span class=\"hljs-string\">'title'</span>) ? <span class=\"hljs-title class_\">View</span>::<span class=\"hljs-title function_ invoke__\">getSection</span>(<span class=\"hljs-string\">'title'</span>) . <span class=\"hljs-string\">' | '</span> :\n   <span class=\"hljs-string\">''</span>)) . <span class=\"hljs-title function_ invoke__\">config</span>(<span class=\"hljs-string\">'app.name'</span>) }}&lt;/title&gt;\n  &lt;meta name=<span class=\"hljs-string\">\"description\"</span> content=<span class=\"hljs-string\">\"@yield('description')\"</span>&gt;\n  &lt;meta name=<span class=\"hljs-string\">\"keywords\"</span> content=<span class=\"hljs-string\">\"@yield('keywords')\"</span>&gt;\n</code></pre>","children":[]}],"payload":{"lines":"1838,1839"}},{"content":"Dans la Vue","children":[{"content":"Bloc PHP","children":[{"content":"<pre><code class=\"language-php\">  <span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Livewire</span>\\<span class=\"hljs-title\">Attributes</span>\\<span class=\"hljs-title\">Title</span>;\n  <span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">App</span>\\<span class=\"hljs-title\">Repositories</span>\\<span class=\"hljs-title\">PostRepository</span>;\n  <span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Pagination</span>\\<span class=\"hljs-title\">LengthAwarePaginator</span>;\n  \n  <span class=\"hljs-keyword\">new</span> \n  <span class=\"hljs-meta\">#[Title</span>(__(<span class=\"hljs-string\">'Contact'</span>)<span class=\"hljs-meta\">]</span>\n  <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">Component</span> </span>{\n  ...\n  }\n</code></pre>","children":[]}],"payload":{"lines":"1852,1853"}},{"content":"OU","children":[],"payload":{"lines":"1866,1867"}},{"content":"Bloc Blade","children":[{"content":"<pre><code class=\"language-php\">  @php\n    <span class=\"hljs-variable\">$title</span>=<span class=\"hljs-string\">'TitrePage'</span>\n  @endphp\n</code></pre>","children":[]},{"content":"<pre data-lines=\"1875,1876\"><code>OU :\n</code></pre>","children":[],"payload":{"lines":"1875,1876"}},{"content":"<pre><code class=\"language-php\">  @<span class=\"hljs-title function_ invoke__\">section</span>(<span class=\"hljs-string\">'title'</span>, <span class=\"hljs-variable\">$post</span>-&gt;seo_title ?? <span class=\"hljs-variable\">$post</span>-&gt;title)\n  @<span class=\"hljs-title function_ invoke__\">section</span>(<span class=\"hljs-string\">'description'</span>, <span class=\"hljs-variable\">$post</span>-&gt;meta_description)\n  @<span class=\"hljs-title function_ invoke__\">section</span>(<span class=\"hljs-string\">'keywords'</span>, <span class=\"hljs-variable\">$post</span>-&gt;meta_keywords\n</code></pre>","children":[]}],"payload":{"lines":"1868,1869"}}],"payload":{"lines":"1850,1851"}}],"payload":{"lines":"1836,1837","fold":1}},{"content":"Typographie: Plugin <strong>prose</strong> de Tailwind","children":[{"content":"<strong>npm install -D @tailwindcss/typography</strong>","children":[],"payload":{"lines":"1885,1886"}},{"content":"./tailwind.config.js :","children":[],"payload":{"lines":"1886,1887"}},{"content":"exports default {<br>\n&nbsp;&nbsp;...<br>\n&nbsp;&nbsp;plugins: [<br>\n&nbsp;&nbsp;&nbsp;&nbsp;plugins: [require(\"@tailwindcss/typography\"), require(\"daisyui\")],<br>\n&nbsp;&nbsp;],<br>\n}","children":[],"payload":{"lines":"1887,1893"}},{"content":"<em>Utilisation : &lt;div class=\"relative items-center w-full py-5 mx-auto <strong>prose</strong> md:px-12 max-w-7xl\"&gt;</em>","children":[],"payload":{"lines":"1893,1895"}}],"payload":{"lines":"1883,1884","fold":1}},{"content":"Style avec Librairie <strong>prismjs</strong>","children":[{"content":"Configurer <strong>prism.css</strong> et <strong>prism.js</strong> : <a href=\"https://prismjs.com/download.html\">https://prismjs.com/download.html</a><br>\nOU<br>\nRécupérer ceux du site Sillo: <a href=\"https://laravel.sillo.org/storage/css/prism.css\">CSS</a> et <a href=\"https://laravel.sillo.org/storage/scripts/prism.js\">JS</a>","children":[],"payload":{"lines":"1897,1900"}},{"content":"Poser dans le layout:<br>\n...<br>\n&lt;head&gt;<br>\n...<br>\n&nbsp;&nbsp;<strong>&lt;link rel=\"stylesheet\" href=\"{{ asset('storage/css/prism.css') }}\"&gt;</strong><br>\n... @vite(...)<br>\n&lt;/head&gt;<br>\n&lt;body class=\"min-h-screen font-sans antialiased bg-base-200/50 dark:bg-base-200\"&gt;<br>\n...<br>\n&nbsp;&nbsp;<strong>&lt;script src=\"{{ asset('storage/scripts/prism.js') }}\"&gt;&lt;/script&gt;</strong><br>\n&lt;/body&gt;","children":[],"payload":{"lines":"1900,1912"}}],"payload":{"lines":"1895,1896","fold":1}},{"content":"Mode clair/sombre (MaryIU)","children":[{"content":"\n<p data-lines=\"1914,1915\">./tailwind.config.js :</p>","children":[{"content":"<strong>export default {<br>\n...<br>\n&nbsp;&nbsp;theme: {<br>\n&nbsp;&nbsp;&nbsp;&nbsp;extend: {},<br>\n&nbsp;&nbsp;},<br>\n&nbsp;&nbsp;darkMode: 'class',<br>\n}</strong>","children":[],"payload":{"lines":"1915,1923"}}],"payload":{"lines":"1914,1923"}},{"content":"\n<p data-lines=\"1923,1924\">navigation/navbar.blade.php :</p>","children":[{"content":"<strong>&nbsp;&nbsp;&nbsp;&nbsp;&lt;x-theme-toggle title=\"{{ __('Toggle theme') }}\" class=\"w-4 h-8\" /&gt;<br>\n&nbsp;&nbsp;<a href=\"/x-slot:actions\">/x-slot:actions</a><br>\n&lt;/x-nav&gt;</strong>","children":[],"payload":{"lines":"1924,1928"}}],"payload":{"lines":"1923,1928"}},{"content":"\n<p data-lines=\"1928,1929\">lang/fr.json :</p>","children":[{"content":"\"Toggle theme\": \"Basculer le thème\"","children":[],"payload":{"lines":"1929,1931"}}],"payload":{"lines":"1928,1931"}},{"content":"\n<p data-lines=\"1931,1932\">Doc MaryUI <em><strong><a href=\"https://mary-ui.com/docs/components/theme-toggle\">https://mary-ui.com/docs/components/theme-toggle</a></strong></em></p>","children":[],"payload":{"lines":"1931,1933"}}],"payload":{"lines":"1912,1913","fold":1}},{"content":"Search bar","children":[{"content":"La route (routes/web.php)","children":[{"content":"<pre><code class=\"language-bash\">  Volt::route(<span class=\"hljs-string\">'/search/{param}'</span>, <span class=\"hljs-string\">'index'</span>)-&gt;name(<span class=\"hljs-string\">'posts.search'</span>);\n</code></pre>","children":[]}],"payload":{"lines":"1935,1936","fold":1}},{"content":"Composant search","children":[{"content":"<pre data-lines=\"1945,1946\"><code>Création composant Search :\n</code></pre>","children":[],"payload":{"lines":"1945,1946"}},{"content":"<pre><code class=\"language-php\">  php artisan make:volt search --<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span>\n</span></code></pre>","children":[]},{"content":"<pre data-lines=\"1951,1952\"><code>PHP (La logique) :\n</code></pre>","children":[],"payload":{"lines":"1951,1952"}},{"content":"<pre><code class=\"language-bash\">  &lt;?php\n  use Livewire\\Attributes\\Validate;\n  use Livewire\\Volt\\Component;\n  \n  new class extends Component {\n  \n    <span class=\"hljs-comment\">#[Validate('required|string|max:100')]</span>\n    public string <span class=\"hljs-variable\">$search</span> = <span class=\"hljs-string\">''</span>;\n\n    public <span class=\"hljs-keyword\">function</span> <span class=\"hljs-function\"><span class=\"hljs-title\">save</span></span>() {\n      <span class=\"hljs-variable\">$data</span> = <span class=\"hljs-variable\">$this</span>-&gt;validate();\n\n      <span class=\"hljs-built_in\">return</span> redirect(<span class=\"hljs-string\">'/search/'</span> . <span class=\"hljs-variable\">$data</span>[<span class=\"hljs-string\">'search'</span>]);\n    }\n  }; ?&gt;\n</code></pre>","children":[]},{"content":"<pre data-lines=\"1971,1972\"><code>HTML (Blade - La Vue) :\n</code></pre>","children":[],"payload":{"lines":"1971,1972"}},{"content":"<pre><code class=\"language-bash\">  &lt;div&gt;\n    &lt;form wire:submit.prevent=<span class=\"hljs-string\">\"save\"</span>&gt;\n    &lt;x-input placeholder=<span class=\"hljs-string\">\"{{ __('Search') }}...\"</span> wire:model=<span class=\"hljs-string\">\"search\"</span> clearable icon=<span class=\"hljs-string\">\"o-magnifying-glass\"</span> /&gt;\n    &lt;/form&gt;\n  &lt;/div&gt;\n</code></pre>","children":[]}],"payload":{"lines":"1943,1944","fold":1}},{"content":"Vue HTML - navigation/navbar.php","children":[{"content":"<pre><code class=\"language-php\">    ...\n    &lt;livewire:search /&gt;\n  &lt;/x-slot:actions&gt;\n&lt;/x-nav&gt;\n</code></pre>","children":[]}],"payload":{"lines":"1981,1982","fold":1}},{"content":"Ajouter search() dans app/Repositories/PostRepository.php","children":[{"content":"<pre data-lines=\"1992,1993\"><code>La fonction qui inclue la chaîne du formulaire pour gérer la recherche :\n</code></pre>","children":[],"payload":{"lines":"1992,1993"}},{"content":"<pre><code class=\"language-php\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">search</span>(<span class=\"hljs-params\"><span class=\"hljs-keyword\">string</span> <span class=\"hljs-variable\">$search</span></span>): <span class=\"hljs-title\">LengthAwarePaginator</span> </span>{\n  \n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">getBaseQuery</span>()\n    -&gt;<span class=\"hljs-title function_ invoke__\">latest</span>()\n    -&gt;<span class=\"hljs-title function_ invoke__\">where</span>(function (<span class=\"hljs-variable\">$query</span>) <span class=\"hljs-keyword\">use</span> ($<span class=\"hljs-title\">search</span>) {\n    $<span class=\"hljs-title\">query</span>-&gt;<span class=\"hljs-title\">where</span>('<span class=\"hljs-title\">title</span>', '<span class=\"hljs-title\">like</span>', \"%{$<span class=\"hljs-title\">search</span>}%\")\n    -&gt;<span class=\"hljs-title\">orWhere</span>('<span class=\"hljs-title\">body</span>', '<span class=\"hljs-title\">like</span>', \"%{$<span class=\"hljs-title\">search</span>}%\");\n    })\n    -&gt;<span class=\"hljs-title function_ invoke__\">paginate</span>(<span class=\"hljs-title function_ invoke__\">config</span>(<span class=\"hljs-string\">'app.pagination'</span>));\n  }\n</code></pre>","children":[]}],"payload":{"lines":"1990,1991","fold":1}},{"content":"Composant index (Homepage (Page d'accueil))","children":[{"content":"<strong>Bloc PHP</strong> : Quand on récupère les posts..","children":[{"content":"<pre data-lines=\"2011,2013\"><code>...On déclenche le composant search\nsi l'URI comporte un paramètre (function getPosts()) :\n</code></pre>","children":[],"payload":{"lines":"2011,2013"}},{"content":"<pre><code class=\"language-php\">  ...\n  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">string</span> <span class=\"hljs-variable\">$param</span> = <span class=\"hljs-string\">''</span>;\n  \n  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">mount</span>(<span class=\"hljs-params\"><span class=\"hljs-keyword\">string</span> <span class=\"hljs-variable\">$slug</span> = <span class=\"hljs-string\">''</span>, <span class=\"hljs-keyword\">string</span> <span class=\"hljs-variable\">$param</span> = <span class=\"hljs-string\">''</span></span>): <span class=\"hljs-title\">void</span> </span>{\n    <span class=\"hljs-variable language_\">$this</span>-&gt;param = <span class=\"hljs-variable\">$param</span>;\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title function_ invoke__\">request</span>()-&gt;<span class=\"hljs-title function_ invoke__\">is</span>(<span class=\"hljs-string\">'category/*'</span>)) {\n      <span class=\"hljs-variable language_\">$this</span>-&gt;category = <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">getCategoryBySlug</span>(<span class=\"hljs-variable\">$slug</span>);\n    }\n  }\n  \n  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">getPosts</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">LengthAwarePaginator</span> </span>{\n    <span class=\"hljs-variable\">$postRepository</span> = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">PostRepository</span>();\n\n    <span class=\"hljs-keyword\">if</span> (!<span class=\"hljs-keyword\">empty</span>(<span class=\"hljs-variable language_\">$this</span>-&gt;param)) {\n      <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable\">$postRepository</span>-&gt;<span class=\"hljs-title function_ invoke__\">search</span>(<span class=\"hljs-variable\">$this</span>-&gt;param);\n    }\n\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable\">$postRepository</span>-&gt;<span class=\"hljs-title function_ invoke__\">getPostsPaginate</span>(<span class=\"hljs-variable\">$this</span>-&gt;category);\n  }\n</code></pre>","children":[]}],"payload":{"lines":"2009,2010","fold":1}},{"content":"<strong>Bloc Vue Blade</strong> : S'il y a une recherche...","children":[{"content":"<pre data-lines=\"2038,2039\"><code>...Alors, on affiche le titre de la page adapté :\n</code></pre>","children":[],"payload":{"lines":"2038,2039"}},{"content":"<pre><code class=\"language-php\">  @<span class=\"hljs-keyword\">if</span> (<span class=\"hljs-variable\">$category</span>)\n    &lt;x-header title=<span class=\"hljs-string\">\"{{ __('Posts for category ') }} {{ <span class=\"hljs-subst\">$category</span>-&gt;title }}\"</span> size=<span class=\"hljs-string\">\"text-2xl sm:text-3xl md:text-4xl\"</span> /&gt;\n  @<span class=\"hljs-keyword\">elseif</span>(<span class=\"hljs-variable\">$param</span> !== <span class=\"hljs-string\">''</span>)\n    &lt;x-header title=<span class=\"hljs-string\">\"{{ __('Posts for search ') }} '{{ <span class=\"hljs-subst\">$param</span> }}'\"</span> size=<span class=\"hljs-string\">\"text-2xl sm:text-3xl md:text-4xl\"</span> /&gt;\n  @<span class=\"hljs-keyword\">endif</span>\n</code></pre>","children":[]}],"payload":{"lines":"2036,2037","fold":1}}],"payload":{"lines":"2007,2008","fold":1}},{"content":"Traductions nécessaires (<strong>lang/fr.json</strong>)","children":[{"content":"<pre><code class=\"language-json\">  <span class=\"hljs-attr\">\"Search...\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Rechercher...\"</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">\"Posts for search \"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Articles pour la recherche\"</span><span class=\"hljs-punctuation\">,</span>\n</code></pre>","children":[]}],"payload":{"lines":"2048,2049","fold":1}}],"payload":{"lines":"1933,1934","fold":1}},{"content":"Affichage d'une page","children":[{"content":"Route pages.show","children":[{"content":"<pre><code class=\"language-php\">  <span class=\"hljs-title class_\">Volt</span>::<span class=\"hljs-title function_ invoke__\">route</span>(<span class=\"hljs-string\">'/pages/{page:slug}'</span>, <span class=\"hljs-string\">'pages.show'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">name</span>(<span class=\"hljs-string\">'pages.show'</span>);\n</code></pre>","children":[]}],"payload":{"lines":"2057,2058"}},{"content":"Créer composant pages.show","children":[{"content":"<pre><code class=\"language-php\">  php artisan make:volt pages/show --<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span>\n</span></code></pre>","children":[]}],"payload":{"lines":"2063,2064"}},{"content":"Composant pages.show","children":[{"content":"<pre><code class=\"language-php\">  &lt;?php\n  use App\\Models\\Page;\n  use Livewire\\Volt\\Component;\n  \n  new class extends Component {\n  public Page $page;\n  \n  public function mount(Page $page): void {\n    if (!$page-&gt;active) {\n      abort(404);\n    }\n  \n    $this-&gt;page = $page;\n  }\n  }; ?&gt;\n  \n  &lt;div&gt;\n    @section('title', $page-&gt;seo_title ?? $page-&gt;title)\n    @section('description', $page-&gt;meta_description)\n    @section('keywords', $page-&gt;meta_keywords)\n\n    &lt;div class=\"flex justify-end gap-4\"&gt;\n      @auth\n        @if (Auth::user()-&gt;isAdmin())\n          &lt;x-popover&gt;\n            &lt;x-slot:trigger&gt;\n              &lt;x-button icon=\"c-pencil-square\" link=\"#\" spinner class=\"btn-ghost btn-sm\" /&gt;\n            &lt;/x-slot:trigger&gt;\n            &lt;x-slot:content class=\"pop-small\"&gt;\n              @lang('Edit this page')\n            &lt;/x-slot:content&gt;\n          &lt;/x-popover&gt;\n        @endif\n      @endauth\n    &lt;/div&gt;\n\n    &lt;x-header title=\"{!! $page-&gt;title !!}\" /&gt;\n\n    &lt;div class=\"relative items-center w-full px-5 py-5 mx-auto prose md:px-12 max-w-7xl text-justify\"&gt;\n      {!! $page-&gt;body !!}\n    &lt;/div&gt;\n  &lt;/div&gt;\n</code></pre>","children":[]}],"payload":{"lines":"2069,2070"}},{"content":"Traduction pages.show","children":[{"content":"<pre><code class=\"language-json\">  <span class=\"hljs-attr\">\"Edit this page\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Modifier cette page\"</span>\n</code></pre>","children":[]}],"payload":{"lines":"2116,2117"}}],"payload":{"lines":"2055,2056","fold":1}},{"content":"Réf.: <em><strong><a href=\"https://laravel.sillo.org/posts/mon-cms-les-articles\">https://laravel.sillo.org/posts/mon-cms-les-articles</a></strong></em>","children":[],"payload":{"lines":"2122,2123"}},{"content":"La page Contact","children":[{"content":"Données Contact","children":[{"content":"Model &amp; Migration Contact","children":[{"content":"<pre><code class=\"language-php\"><span class=\"hljs-comment\">//2do make model -m</span>\nphp artisan make:model Contact -m\n</code></pre>","children":[]},{"content":"<pre><code class=\"language-php\"><span class=\"hljs-meta\">&lt;?php</span>\n<span class=\"hljs-keyword\">namespace</span> <span class=\"hljs-title class_\">App</span>\\<span class=\"hljs-title class_\">Models</span>;\n\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Database</span>\\<span class=\"hljs-title\">Eloquent</span>\\<span class=\"hljs-title\">Model</span>;\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Notifications</span>\\<span class=\"hljs-title\">Notifiable</span>;\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Database</span>\\<span class=\"hljs-title\">Eloquent</span>\\<span class=\"hljs-title\">Relations</span>\\<span class=\"hljs-title\">BelongsTo</span>;\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Database</span>\\<span class=\"hljs-title\">Eloquent</span>\\<span class=\"hljs-title\">Factories</span>\\<span class=\"hljs-title\">HasFactory</span>;\n\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Contact</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">Model</span> </span>{\n    <span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">HasFactory</span>;\n    <span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Notifiable</span>;\n\n    <span class=\"hljs-keyword\">protected</span> <span class=\"hljs-variable\">$fillable</span> = [<span class=\"hljs-string\">'name'</span>, <span class=\"hljs-string\">'email'</span>, <span class=\"hljs-string\">'message'</span>, <span class=\"hljs-string\">'user_id'</span>];\n\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">user</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">BelongsTo</span> </span>{\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">belongsTo</span>(<span class=\"hljs-title class_\">User</span>::<span class=\"hljs-variable language_\">class</span>);\n    }\n}\n</code></pre>","children":[]},{"content":"<pre><code class=\"language-php\"><span class=\"hljs-meta\">&lt;?php</span>\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Support</span>\\<span class=\"hljs-title\">Facades</span>\\<span class=\"hljs-title\">Schema</span>;\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Database</span>\\<span class=\"hljs-title\">Schema</span>\\<span class=\"hljs-title\">Blueprint</span>;\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Database</span>\\<span class=\"hljs-title\">Migrations</span>\\<span class=\"hljs-title\">Migration</span>;\n\n    <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">CreateContactsTable</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">Migration</span> </span>{\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">up</span>(<span class=\"hljs-params\"></span>) </span>{\n        <span class=\"hljs-title class_\">Schema</span>::<span class=\"hljs-title function_ invoke__\">create</span>(<span class=\"hljs-string\">'contacts'</span>, function (Blueprint <span class=\"hljs-variable\">$table</span>) {\n            <span class=\"hljs-variable\">$table</span>-&gt;<span class=\"hljs-title function_ invoke__\">id</span>();\n            <span class=\"hljs-variable\">$table</span>-&gt;<span class=\"hljs-title function_ invoke__\">unsignedBigInteger</span>(<span class=\"hljs-string\">'user_id'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">nullable</span>()-&gt;<span class=\"hljs-keyword\">default</span>(<span class=\"hljs-literal\">null</span>);\n            <span class=\"hljs-variable\">$table</span>-&gt;<span class=\"hljs-keyword\">string</span>(<span class=\"hljs-string\">'name'</span>);\n            <span class=\"hljs-variable\">$table</span>-&gt;<span class=\"hljs-keyword\">string</span>(<span class=\"hljs-string\">'email'</span>);\n            <span class=\"hljs-variable\">$table</span>-&gt;<span class=\"hljs-title function_ invoke__\">text</span>(<span class=\"hljs-string\">'message'</span>);\n            <span class=\"hljs-variable\">$table</span>-&gt;<span class=\"hljs-keyword\">boolean</span>(<span class=\"hljs-string\">'handled'</span>)-&gt;<span class=\"hljs-keyword\">default</span>(<span class=\"hljs-literal\">false</span>);\n            <span class=\"hljs-variable\">$table</span>-&gt;<span class=\"hljs-title function_ invoke__\">timestamps</span>();\n        });\n    }\n\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">down</span>(<span class=\"hljs-params\"></span>) </span>{\n      <span class=\"hljs-title class_\">Schema</span>::<span class=\"hljs-title function_ invoke__\">dropIfExists</span>(<span class=\"hljs-string\">'contacts'</span>);\n    }\n}\n</code></pre>","children":[]}],"payload":{"lines":"2128,2129","fold":1}},{"content":"Seeder avec Factory Contact","children":[{"content":"<pre><code class=\"language-php\">php artisan make:factory Contact\n</code></pre>","children":[]},{"content":"<pre><code class=\"language-php\"><span class=\"hljs-meta\">&lt;?php</span>\n<span class=\"hljs-keyword\">namespace</span> <span class=\"hljs-title class_\">Database</span>\\<span class=\"hljs-title class_\">Factories</span>;\n\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">App</span>\\<span class=\"hljs-title\">Models</span>\\<span class=\"hljs-title\">Contact</span>;\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Faker</span>\\<span class=\"hljs-title\">Factory</span> <span class=\"hljs-keyword\">as</span> <span class=\"hljs-title\">Faker</span>;\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Database</span>\\<span class=\"hljs-title\">Eloquent</span>\\<span class=\"hljs-title\">Factories</span>\\<span class=\"hljs-title\">Factory</span>;\n\n    <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">ContactFactory</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">Factory</span> </span>{\n    \n        <span class=\"hljs-keyword\">protected</span> <span class=\"hljs-variable\">$model</span> = <span class=\"hljs-title class_\">Contact</span>::<span class=\"hljs-variable language_\">class</span>;\n    \n        <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">definition</span>(<span class=\"hljs-params\"></span>) </span>{\n            <span class=\"hljs-variable\">$faker</span> = <span class=\"hljs-title class_\">Faker</span>::<span class=\"hljs-title function_ invoke__\">create</span>(<span class=\"hljs-string\">'fr_FR'</span>);\n      \n            <span class=\"hljs-keyword\">return</span> [\n                <span class=\"hljs-string\">'name'</span>    =&gt; <span class=\"hljs-variable\">$faker</span>-&gt;name,\n                <span class=\"hljs-string\">'email'</span>   =&gt; <span class=\"hljs-variable\">$faker</span>-&gt;<span class=\"hljs-title function_ invoke__\">unique</span>()-&gt;safeEmail,\n                <span class=\"hljs-string\">'message'</span> =&gt; <span class=\"hljs-variable\">$faker</span>-&gt;<span class=\"hljs-title function_ invoke__\">realText</span>(<span class=\"hljs-number\">200</span>, <span class=\"hljs-number\">2</span>),\n          ];\n    }\n}\n</code></pre>","children":[]},{"content":"<pre><code class=\"language-php\">php artisan make:seeder ContactSeeder\n</code></pre>","children":[]},{"content":"<pre><code class=\"language-php\"><span class=\"hljs-meta\">&lt;?php</span>\n<span class=\"hljs-keyword\">namespace</span> <span class=\"hljs-title class_\">database</span>\\<span class=\"hljs-title class_\">seeders</span>;\n\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">App</span>\\<span class=\"hljs-title\">Models</span>\\<span class=\"hljs-title\">Contact</span>;\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Database</span>\\<span class=\"hljs-title\">Seeder</span>;\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Database</span>\\<span class=\"hljs-title\">Console</span>\\<span class=\"hljs-title\">Seeds</span>\\<span class=\"hljs-title\">WithoutModelEvents</span>;\n\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">ContactSeeder</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">Seeder</span> </span>{\n    <span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">WithoutModelEvents</span>;\n    \n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">run</span>(<span class=\"hljs-params\"></span>) </span>{\n        <span class=\"hljs-title class_\">Contact</span>::<span class=\"hljs-title function_ invoke__\">factory</span>()-&gt;<span class=\"hljs-title function_ invoke__\">count</span>(<span class=\"hljs-number\">5</span>)-&gt;<span class=\"hljs-title function_ invoke__\">create</span>();\n    }\n}\n</code></pre>","children":[]},{"content":"<pre><code class=\"language-php\"><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">DatabaseSeeder</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">Seeder</span> </span>{\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">run</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">void</span> </span>{\n        <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">call</span>([\n            ...\n            <span class=\"hljs-title class_\">ContactSeeder</span>::<span class=\"hljs-variable language_\">class</span>,\n        ]);\n        ...\n    }\n}\n</code></pre>","children":[]},{"content":"<pre><code class=\"language-php\">php artisan db:seed\n</code></pre>","children":[]}],"payload":{"lines":"2181,2182","fold":1}}],"payload":{"lines":"2126,2127","fold":1}},{"content":"Route Contact","children":[{"content":"<pre><code class=\"language-php\">... /pages/{page:slug} (Ndlr: Route pages.show)\n<span class=\"hljs-title class_\">Volt</span>::<span class=\"hljs-title function_ invoke__\">route</span>(<span class=\"hljs-string\">'/contact'</span>, <span class=\"hljs-string\">'pages.contact'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">name</span>(<span class=\"hljs-string\">'pages.contact'</span>);\n</code></pre>","children":[]}],"payload":{"lines":"2248,2249","fold":1}},{"content":"Composant Contact (livewire/contact.blade.php)","children":[{"content":"<pre><code class=\"language-php\">php artisan make:volt pages/contact --<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span>\n</span></code></pre>","children":[]},{"content":"<pre><code class=\"language-php\">&lt;?php\nuse Mary\\Traits\\Toast;\nuse App\\Models\\Contact;\nuse Livewire\\Volt\\Component;\nuse Livewire\\Attributes\\{Layout, Rule};\n\nnew\n#[Title('Contact')]\nclass extends Component {\n    use Toast;\n\n    #[Rule('required|string|max:255')]\n    public string $name = '';\n\n    #[Rule('required|email')]\n    public string $email = '';\n\n    #[Rule('required|max:1000')]\n    public string $message = '';\n\n    #[Rule('nullable|numeric|exists:users,id')]\n    public ?int $user_id = null;\n\n    // Méthode de montage pour pré-remplir les champs avec les informations de l'utilisateur authentifié\n    public function mount(): void {\n        if (Auth::check()) {\n            $this-&gt;name = Auth::user()-&gt;name;\n            $this-&gt;email = Auth::user()-&gt;email;\n            $this-&gt;user_id = Auth::id();\n        }\n    }\n    // Méthode pour enregistrer le formulaire de contact\n    public function save() {\n        // Validation des données du formulaire\n        $data = $this-&gt;validate();\n        // Création d'un nouveau contact avec les données validées\n        Contact::create($data);\n        // Affichage d'un message de réussite avec une redirection\n        $this-&gt;success(__('Your message has been sent!'), redirectTo: '/');\n    }\n}; ?&gt;\n\n&lt;div&gt;\n    @section('title', 'Contact')\n    &lt;!-- Formulaire de contact encapsulé dans une carte --&gt;\n    &lt;x-card title=\"{{ __('Contact') }}\" subtitle=\"{{ __('Use this form to contact me') }}\" shadow separator\n        progress-indicator&gt;\n        &lt;x-form wire:submit=\"save\"&gt;\n            &lt;!-- Affichage des champs de nom et d\\'email uniquement si \\'utilisateur n\\'est pas connecté --&gt;\n            @if (!Auth()-&gt;check())\n                &lt;x-input label=\"{{ __('Name') }} *\" wire:model=\"name\" icon=\"o-user\" inline /&gt;\n                &lt;x-input label=\"{{ __('E-mail') }} *\" wire:model=\"email\" icon=\"o-envelope\" inline /&gt;\n            @endif\n            &lt;!-- Champ de message --&gt;\n            &lt;x-textarea wire:model=\"message\" hint=\"{{ __('Max 1000 chars') }}\" rows=\"5\"\n                placeholder=\"{{ __('Your message...') }} *\" inline /&gt;\n            &lt;p class=\"text-[12px] text-right italic my-[-10px]\"&gt;* : {{ __('Required information') }}&lt;/p&gt;\n            &lt;!-- Boutons d'actions --&gt;\n            &lt;x-slot:actions&gt;\n                &lt;x-button label=\"{{ __('Cancel') }}\" link=\"/\" class=\"btn-ghost\" /&gt;\n                &lt;x-button label=\"{{ __('Send') }}\" type=\"submit\" icon=\"o-paper-airplane\" class=\"btn-primary\"\n                    spinner=\"login\" /&gt;\n            &lt;/x-slot:actions&gt;\n        &lt;/x-form&gt;\n    &lt;/x-card&gt;\n&lt;/div&gt;\n</code></pre>","children":[]}],"payload":{"lines":"2255,2256","fold":1}},{"content":"Traductions Contact","children":[{"content":"<pre><code class=\"language-json\"><span class=\"hljs-attr\">\"Use this form to contact me\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Utilisez ce formulaire pour me contacter\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Your message...\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Votre message...\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Max 1000 chars\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Max 1000 caractères\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Your message has been sent!\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Votre message a bien été envoyé !\"</span>\n</code></pre>","children":[]}],"payload":{"lines":"2330,2331","fold":1}}],"payload":{"lines":"2124,2125","fold":1}}],"payload":{"lines":"1757,1758","fold":1}},{"content":"- Les menus &amp; le footer","children":[{"content":"Les données pour menus et footer","children":[{"content":"Structures","children":[{"content":"Model &amp; migration Menu","children":[{"content":"<pre><code class=\"language-php\">  php artisan make:model Menu --migration\n</code></pre>","children":[]},{"content":"<pre><code class=\"language-php\">  <span class=\"hljs-meta\">&lt;?php</span>\n  <span class=\"hljs-keyword\">namespace</span> <span class=\"hljs-title class_\">App</span>\\<span class=\"hljs-title class_\">Models</span>;\n  \n  <span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Database</span>\\<span class=\"hljs-title\">Eloquent</span>\\<span class=\"hljs-title\">Model</span>;\n  <span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Database</span>\\<span class=\"hljs-title\">Eloquent</span>\\<span class=\"hljs-title\">Relations</span>\\<span class=\"hljs-title\">HasMany</span>;\n  \n  <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Menu</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">Model</span>\n  </span>{\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-variable\">$timestamps</span> = <span class=\"hljs-literal\">false</span>;\n    \n    <span class=\"hljs-keyword\">protected</span> <span class=\"hljs-variable\">$fillable</span> = [\n      <span class=\"hljs-string\">'label'</span>,\n      <span class=\"hljs-string\">'link'</span>,\n      <span class=\"hljs-string\">'order'</span>,\n    ];\n    \n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">submenus</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">HasMany</span> </span>{\n      \n      <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">hasMany</span>(<span class=\"hljs-title class_\">Submenu</span>::<span class=\"hljs-variable language_\">class</span>);\n    }\n  }\n</code></pre>","children":[]},{"content":"<pre><code class=\"language-php\">  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">up</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">void</span> </span>{\n    <span class=\"hljs-title class_\">Schema</span>::<span class=\"hljs-title function_ invoke__\">create</span>(<span class=\"hljs-string\">'menus'</span>, function (Blueprint <span class=\"hljs-variable\">$table</span>) {\n      <span class=\"hljs-variable\">$table</span>-&gt;<span class=\"hljs-title function_ invoke__\">id</span>();\n      <span class=\"hljs-variable\">$table</span>-&gt;<span class=\"hljs-keyword\">string</span>(<span class=\"hljs-string\">'label'</span>);\n      <span class=\"hljs-variable\">$table</span>-&gt;<span class=\"hljs-keyword\">string</span>(<span class=\"hljs-string\">'link'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">nullable</span>();\n      <span class=\"hljs-variable\">$table</span>-&gt;<span class=\"hljs-keyword\">integer</span>(<span class=\"hljs-string\">'order'</span>);\n    });\n  }\n</code></pre>","children":[]}],"payload":{"lines":"2345,2346","fold":1}},{"content":"Model &amp; migration Submenu","children":[{"content":"<pre><code class=\"language-php\">  php artisan make:model Submenu --migration\n</code></pre>","children":[]},{"content":"<pre><code class=\"language-php\">  <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Submenu</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">Model</span>\n  </span>{\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-variable\">$timestamps</span> = <span class=\"hljs-literal\">false</span>;\n    \n    <span class=\"hljs-keyword\">protected</span> <span class=\"hljs-variable\">$fillable</span> = [\n      <span class=\"hljs-string\">'label'</span>,\n      <span class=\"hljs-string\">'link'</span>,\n      <span class=\"hljs-string\">'order'</span>,\n    ];\n  }\n</code></pre>","children":[]},{"content":"<pre><code class=\"language-php\">  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">up</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">void</span> </span>{\n    <span class=\"hljs-title class_\">Schema</span>::<span class=\"hljs-title function_ invoke__\">create</span>(<span class=\"hljs-string\">'submenus'</span>, function (Blueprint <span class=\"hljs-variable\">$table</span>) {\n      <span class=\"hljs-variable\">$table</span>-&gt;<span class=\"hljs-title function_ invoke__\">id</span>();\n      <span class=\"hljs-variable\">$table</span>-&gt;<span class=\"hljs-keyword\">string</span>(<span class=\"hljs-string\">'label'</span>);\n      <span class=\"hljs-variable\">$table</span>-&gt;<span class=\"hljs-keyword\">integer</span>(<span class=\"hljs-string\">'order'</span>);\n      <span class=\"hljs-variable\">$table</span>-&gt;<span class=\"hljs-keyword\">string</span>(<span class=\"hljs-string\">'link'</span>)-&gt;<span class=\"hljs-keyword\">default</span>(<span class=\"hljs-string\">'#'</span>);\n      <span class=\"hljs-variable\">$table</span>-&gt;<span class=\"hljs-title function_ invoke__\">foreignId</span>(<span class=\"hljs-string\">'menu_id'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">constrained</span>()-&gt;<span class=\"hljs-title function_ invoke__\">onDelete</span>(<span class=\"hljs-string\">'cascade'</span>);\n    });\n  }\n</code></pre>","children":[]}],"payload":{"lines":"2386,2387","fold":1}},{"content":"Model &amp; migration Footer","children":[{"content":"<pre><code class=\"language-php\">  php artisan make:model Footer --migration\n</code></pre>","children":[]},{"content":"<pre><code class=\"language-php\">  <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Footer</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">Model</span>\n  </span>{\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-variable\">$timestamps</span> = <span class=\"hljs-literal\">false</span>;\n\n    <span class=\"hljs-keyword\">protected</span> <span class=\"hljs-variable\">$fillable</span> = [\n      <span class=\"hljs-string\">'label'</span>,\n      <span class=\"hljs-string\">'link'</span>,\n      <span class=\"hljs-string\">'order'</span>,\n    ];\n  }\n</code></pre>","children":[]},{"content":"<pre><code class=\"language-php\">  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">up</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">void</span> </span>{\n    <span class=\"hljs-title class_\">Schema</span>::<span class=\"hljs-title function_ invoke__\">create</span>(<span class=\"hljs-string\">'footers'</span>, function (Blueprint <span class=\"hljs-variable\">$table</span>) {\n      <span class=\"hljs-variable\">$table</span>-&gt;<span class=\"hljs-title function_ invoke__\">id</span>();\n      <span class=\"hljs-variable\">$table</span>-&gt;<span class=\"hljs-keyword\">string</span>(<span class=\"hljs-string\">'label'</span>);\n      <span class=\"hljs-variable\">$table</span>-&gt;<span class=\"hljs-keyword\">string</span>(<span class=\"hljs-string\">'link'</span>);\n      <span class=\"hljs-variable\">$table</span>-&gt;<span class=\"hljs-keyword\">integer</span>(<span class=\"hljs-string\">'order'</span>);\n    });\n  }\n</code></pre>","children":[]}],"payload":{"lines":"2417,2418","fold":1}}],"payload":{"lines":"2343,2344","fold":1}},{"content":"Population (Seeders)","children":[{"content":"Rappel pour créer un seeder","children":[{"content":"<pre data-lines=\"2451,2458\"><code>Exemple avec le seeder des menus :\n\nphp artisan make:seeder MenusSeeder\n\nOU\n\nCréer le fichier dans database/seeders\n</code></pre>","children":[],"payload":{"lines":"2451,2458"}}],"payload":{"lines":"2449,2450","fold":1}},{"content":"MenusSeeder.php","children":[{"content":"<pre><code class=\"language-php\">  <span class=\"hljs-keyword\">namespace</span> <span class=\"hljs-title class_\">database</span>\\<span class=\"hljs-title class_\">seeders</span>;\n  \n  <span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Database</span>\\<span class=\"hljs-title\">Seeder</span>;\n  <span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Support</span>\\<span class=\"hljs-title\">Facades</span>\\<span class=\"hljs-title\">DB</span>;\n  <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">MenusSeeder</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">Seeder</span>\n  </span>{\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">run</span>(<span class=\"hljs-params\"></span>) </span>{\n      <span class=\"hljs-variable\">$menus</span> = [\n          [<span class=\"hljs-string\">'label'</span> =&gt; <span class=\"hljs-string\">'Catégorie 1'</span>, <span class=\"hljs-string\">'link'</span> =&gt; <span class=\"hljs-literal\">null</span>, <span class=\"hljs-string\">'order'</span> =&gt; <span class=\"hljs-number\">3</span>],\n          [<span class=\"hljs-string\">'label'</span> =&gt; <span class=\"hljs-string\">'Catégorie 2'</span>, <span class=\"hljs-string\">'link'</span> =&gt; <span class=\"hljs-string\">'/category/category-2'</span>, <span class=\"hljs-string\">'order'</span> =&gt; <span class=\"hljs-number\">2</span>],\n          [<span class=\"hljs-string\">'label'</span> =&gt; <span class=\"hljs-string\">'Catégorie 3'</span>, <span class=\"hljs-string\">'link'</span> =&gt; <span class=\"hljs-string\">'/category/category-3'</span>, <span class=\"hljs-string\">'order'</span> =&gt; <span class=\"hljs-number\">1</span>],\n      ];\n  \n      DB::<span class=\"hljs-title function_ invoke__\">table</span>(<span class=\"hljs-string\">'menus'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">insert</span>(<span class=\"hljs-variable\">$menus</span>);\n  \n      <span class=\"hljs-variable\">$submenus</span> = [\n          [<span class=\"hljs-string\">'label'</span> =&gt; <span class=\"hljs-string\">'Post 1'</span>, <span class=\"hljs-string\">'order'</span> =&gt; <span class=\"hljs-number\">1</span>, <span class=\"hljs-string\">'link'</span> =&gt; <span class=\"hljs-string\">'/posts/post-1'</span>, <span class=\"hljs-string\">'menu_id'</span> =&gt; <span class=\"hljs-number\">1</span>],\n          [<span class=\"hljs-string\">'label'</span> =&gt; <span class=\"hljs-string\">'Tout'</span>, <span class=\"hljs-string\">'order'</span> =&gt; <span class=\"hljs-number\">3</span>, <span class=\"hljs-string\">'link'</span> =&gt; <span class=\"hljs-string\">'/category/category-1'</span>, <span class=\"hljs-string\">'menu_id'</span> =&gt; <span class=\"hljs-number\">1</span>],\n      ];\n  \n      DB::<span class=\"hljs-title function_ invoke__\">table</span>(<span class=\"hljs-string\">'submenus'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">insert</span>(<span class=\"hljs-variable\">$submenus</span>);\n    }\n  }\n</code></pre>","children":[]}],"payload":{"lines":"2459,2460","fold":1}},{"content":"FooterSeeder.php","children":[{"content":"<pre><code class=\"language-php\">  <span class=\"hljs-meta\">&lt;?php</span>\n  <span class=\"hljs-keyword\">namespace</span> <span class=\"hljs-title class_\">database</span>\\<span class=\"hljs-title class_\">seeders</span>;\n  \n  <span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Database</span>\\<span class=\"hljs-title\">Seeder</span>;\n  <span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Support</span>\\<span class=\"hljs-title\">Facades</span>\\<span class=\"hljs-title\">DB</span>;\n  \n  <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">FooterSeeder</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">Seeder</span>\n  </span>{\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">run</span>(<span class=\"hljs-params\"></span>) </span>{\n      <span class=\"hljs-comment\">// Données des éléments du pied de page</span>\n      <span class=\"hljs-variable\">$footers</span> = [\n        [<span class=\"hljs-string\">'label'</span> =&gt; <span class=\"hljs-string\">'Accueil'</span>, <span class=\"hljs-string\">'order'</span> =&gt; <span class=\"hljs-number\">1</span>, <span class=\"hljs-string\">'link'</span> =&gt; <span class=\"hljs-string\">'/'</span>],\n        [<span class=\"hljs-string\">'label'</span> =&gt; <span class=\"hljs-string\">'Terms'</span>, <span class=\"hljs-string\">'order'</span> =&gt; <span class=\"hljs-number\">3</span>, <span class=\"hljs-string\">'link'</span> =&gt; <span class=\"hljs-string\">'/pages/terms'</span>],\n        [<span class=\"hljs-string\">'label'</span> =&gt; <span class=\"hljs-string\">'Policy'</span>, <span class=\"hljs-string\">'order'</span> =&gt; <span class=\"hljs-number\">4</span>, <span class=\"hljs-string\">'link'</span> =&gt; <span class=\"hljs-string\">'/pages/privacy-policy'</span>],\n        [<span class=\"hljs-string\">'label'</span> =&gt; <span class=\"hljs-string\">'Contact'</span>, <span class=\"hljs-string\">'order'</span> =&gt; <span class=\"hljs-number\">5</span>, <span class=\"hljs-string\">'link'</span> =&gt; <span class=\"hljs-string\">'/contact'</span>],\n      ];\n\n      <span class=\"hljs-comment\">// Insérer les données dans la table footers</span>\n      DB::<span class=\"hljs-title function_ invoke__\">table</span>(<span class=\"hljs-string\">'footers'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">insert</span>(<span class=\"hljs-variable\">$footers</span>);\n    }\n  }\n</code></pre>","children":[]}],"payload":{"lines":"2487,2488","fold":1}},{"content":"DatabaseSeeder.php","children":[{"content":"<pre><code class=\"language-php\">  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">run</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">void</span> </span>{\n    <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">call</span>([\n      ...\n      <span class=\"hljs-title class_\">MenusSeeder</span>::<span class=\"hljs-variable language_\">class</span>,\n      <span class=\"hljs-title class_\">FooterSeeder</span>::<span class=\"hljs-variable language_\">class</span>, \n    ]);\n  }\n</code></pre>","children":[]},{"content":"<pre><code class=\"language-php\">  php artisan migrate:fresh --seed\n</code></pre>","children":[]}],"payload":{"lines":"2513,2514","fold":1}}],"payload":{"lines":"2447,2448","fold":1}},{"content":"Nouveauté : app/Providers/AppServiceProvider.php","children":[{"content":"<pre data-lines=\"2531,2532\"><code>Parce que les menus et submenus sont appelés systématiquement :\n</code></pre>","children":[],"payload":{"lines":"2531,2532"}},{"content":"<pre><code class=\"language-php\">  ...\n  <span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">App</span>\\<span class=\"hljs-title\">Models</span>\\<span class=\"hljs-title\">Menu</span>;\n  <span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">View</span>\\<span class=\"hljs-title\">View</span>;\n  <span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Support</span>\\{<span class=\"hljs-title\">Facades</span>, <span class=\"hljs-title\">ServiceProvider</span>};\n  \n  <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">AppServiceProvider</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">ServiceProvider</span> </span>{\n    ...\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">boot</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">void</span> </span>{\n      <span class=\"hljs-title class_\">Facades\\View</span>::<span class=\"hljs-title function_ invoke__\">composer</span>([<span class=\"hljs-string\">'components.layouts.app'</span>], function (View <span class=\"hljs-variable\">$view</span>) {\n        <span class=\"hljs-variable\">$view</span>-&gt;<span class=\"hljs-title function_ invoke__\">with</span>(\n          <span class=\"hljs-string\">'menus'</span>,\n          <span class=\"hljs-title class_\">Menu</span>::<span class=\"hljs-title function_ invoke__\">with</span>([<span class=\"hljs-string\">'submenus'</span> =&gt; function (<span class=\"hljs-variable\">$query</span>) {\n            <span class=\"hljs-variable\">$query</span>-&gt;<span class=\"hljs-title function_ invoke__\">orderBy</span>(<span class=\"hljs-string\">'order'</span>);\n          }])-&gt;<span class=\"hljs-title function_ invoke__\">orderBy</span>(<span class=\"hljs-string\">'order'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">get</span>()\n        );\n      });\n    }\n  }\n</code></pre>","children":[]}],"payload":{"lines":"2529,2530","fold":1}}],"payload":{"lines":"2341,2342","fold":1}},{"content":"Affichages des menus","children":[{"content":"Ajouter <em>:$menus</em> dans layouts/app.blade.php","children":[{"content":"<pre><code class=\"language-php\">  &lt;livewire:navigation.navbar :<span class=\"hljs-variable\">$menus</span> /&gt;\n  ...\n  &lt;livewire:navigation.sidebar :<span class=\"hljs-variable\">$menus</span> /&gt;\n</code></pre>","children":[]}],"payload":{"lines":"2556,2557","fold":1}},{"content":"Barre de Navigation","children":[{"content":"navigation/navbar.blade.php","children":[{"content":"<pre data-lines=\"2568,2569\"><code>Bloc PHP :\n</code></pre>","children":[],"payload":{"lines":"2568,2569"}},{"content":"<pre><code class=\"language-php\">  <span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Support</span>\\<span class=\"hljs-title\">Collection</span>;\n  \n  <span class=\"hljs-keyword\">new</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">Component</span> </span>{\n    \n    <span class=\"hljs-keyword\">public</span> Collection <span class=\"hljs-variable\">$menus</span>;\n\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">mount</span>(<span class=\"hljs-params\">Collection <span class=\"hljs-variable\">$menus</span></span>): <span class=\"hljs-title\">void</span> </span>{\n      <span class=\"hljs-variable language_\">$this</span>-&gt;menus = <span class=\"hljs-variable\">$menus</span>;\n    }\n    ...\n  }\n</code></pre>","children":[]},{"content":"<pre data-lines=\"2584,2585\"><code>Bloc Blade :\n</code></pre>","children":[],"payload":{"lines":"2584,2585"}},{"content":"<pre><code class=\"language-php\">  &lt;span class=\"hidden sm:block\"&gt;\n    @foreach ($menus as $menu)\n      @if ($menu-&gt;submenus-&gt;isNotEmpty())\n        &lt;x-dropdown&gt;\n          &lt;x-slot:trigger&gt;\n            &lt;x-button label=\"{{ $menu-&gt;label }}\"  class=\"btn-ghost\" /&gt;\n          &lt;/x-slot:trigger&gt;\n          @foreach ($menu-&gt;submenus as $submenu)\n            &lt;x-menu-item title=\"{{ $submenu-&gt;label }}\" link=\"{{ $submenu-&gt;link }}\" style=\"min-width: max-content;\" /&gt;\n          @endforeach\n        &lt;/x-dropdown&gt;\n      @else\n        &lt;x-button label=\"{{ $menu-&gt;label }}\" link=\"{{ $menu-&gt;link }}\" :external=\"Str::startsWith($menu-&gt;link, 'http')\" class=\"btn-ghost\" /&gt;\n      @endif\n    @endforeach\n    ...\n  &lt;/span&gt;\n</code></pre>","children":[]}],"payload":{"lines":"2566,2567","fold":1}},{"content":"navigation/sidebar.blade.php","children":[{"content":"<pre><code class=\"language-php\">  ...\n  <span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Support</span>\\<span class=\"hljs-title\">Collection</span>;\n  \n  <span class=\"hljs-keyword\">new</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">Component</span> </span>{\n  \n    <span class=\"hljs-keyword\">public</span> Collection <span class=\"hljs-variable\">$menus</span>;\n\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">mount</span>(<span class=\"hljs-params\">Collection <span class=\"hljs-variable\">$menus</span></span>): <span class=\"hljs-title\">void</span> </span>{\n      <span class=\"hljs-variable language_\">$this</span>-&gt;menus = <span class=\"hljs-variable\">$menus</span>;\n    }\n    ...\n  };\n  ...\n  &lt;x-menu activate-by-route&gt;\n    ... <span class=\"hljs-comment\">// Ici suppression du separator reporté ci-dessous</span>\n      &lt;/x-<span class=\"hljs-keyword\">list</span>-item&gt;\n      @<span class=\"hljs-keyword\">else</span>\n        &lt;x-menu-item title=<span class=\"hljs-string\">\"{{ __('Login') }}\"</span> link=<span class=\"hljs-string\">\"/login\"</span> /&gt;\n      @<span class=\"hljs-keyword\">endif</span>\n    &lt;x-menu-separator /&gt;\n    @<span class=\"hljs-keyword\">foreach</span> (<span class=\"hljs-variable\">$menus</span> <span class=\"hljs-keyword\">as</span> <span class=\"hljs-variable\">$menu</span>)\n      @<span class=\"hljs-keyword\">if</span>(<span class=\"hljs-variable\">$menu</span>-&gt;submenus-&gt;<span class=\"hljs-title function_ invoke__\">isNotEmpty</span>())\n        &lt;x-menu-sub title=<span class=\"hljs-string\">\"{{ <span class=\"hljs-subst\">$menu</span>-&gt;label }}\"</span>&gt;\n          @<span class=\"hljs-keyword\">foreach</span> (<span class=\"hljs-variable\">$menu</span>-&gt;submenus <span class=\"hljs-keyword\">as</span> <span class=\"hljs-variable\">$submenu</span>)\n            &lt;x-menu-item title=<span class=\"hljs-string\">\"{{ <span class=\"hljs-subst\">$submenu</span>-&gt;label }}\"</span> link=<span class=\"hljs-string\">\"{{ <span class=\"hljs-subst\">$submenu</span>-&gt;link }}\"</span> /&gt;\n          @<span class=\"hljs-keyword\">endforeach</span>\n        &lt;/x-menu-sub&gt;\n      @<span class=\"hljs-keyword\">else</span>\n        &lt;x-menu-item title=<span class=\"hljs-string\">\"{{ <span class=\"hljs-subst\">$menu</span>-&gt;label }}\"</span> link=<span class=\"hljs-string\">\"{{ <span class=\"hljs-subst\">$menu</span>-&gt;link }}\"</span> /&gt;\n      @<span class=\"hljs-keyword\">endif</span>\n    @<span class=\"hljs-keyword\">endforeach</span>\n  &lt;/x-menu&gt;\n</code></pre>","children":[]}],"payload":{"lines":"2606,2607","fold":1}}],"payload":{"lines":"2564,2565"}},{"content":"Menu Pied de page","children":[{"content":"<pre data-lines=\"2645,2646\"><code>Composant navigation/footer.blade.php :\n</code></pre>","children":[],"payload":{"lines":"2645,2646"}},{"content":"<pre><code class=\"language-php\">  &lt;?php\n  use App\\Models\\Footer;\n  use Livewire\\Volt\\Component;\n  \n  new class() extends Component {\n  \n    public function with(): array {\n  \n      return [\n        'footers' =&gt; Footer::orderBy('order')-&gt;get(),\n    ];\n  }\n  };\n?&gt;\n\n&lt;footer class=\"p-10 rounded footer footer-center bg-base-200 text-base-content\"&gt;\n  &lt;nav class=\"grid grid-flow-col gap-4\"&gt;\n    @foreach ($footers as $footer)\n      &lt;a href=\"{{ $footer-&gt;link }}\" class=\"link link-hover\"&gt;\n        @lang($footer-&gt;label)\n      &lt;/a&gt;\n    @endforeach\n  &lt;/nav&gt;\n  &lt;nav&gt;\n    &lt;div class=\"grid grid-flow-col gap-4\"&gt;\n      &lt;a href=\"https://github.com/bestmomo/sillo\" title=\" {{ __('Go to the GitHub repository and... Fork it!') }} ! target=\"_blank\"&gt;\n        &lt;svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" \n        height=\"24\" viewBox=\"0 0 24 24\" class=\"fill-current\"&gt;\n          &lt;path d=\"M12 0C5.372 0 0 5.372 0 12c0 5.303 3.438 9.8 8.207 11.387.6.11.793-.26.793-.577v-2.2c-3.338.726-4.033-1.415-4.033-1.415-.546-1.387-1.333-1.757-1.333-1.757-1.089-.744.083-.729.083-.729 1.204.085 1.838 1.237 1.838 1.237 1.07 1.835 2.809 1.305 3.495.998.108-.775.419-1.305.762-1.605-2.665-.305-5.466-1.335-5.466-5.93 0-1.31.467-2.38 1.235-3.22-.124-.303-.535-1.523.117-3.176 0 0 1.008-.322 3.3 1.23.957-.266 1.98-.399 3-.405 1.02.006 2.043.139 3 .405 2.29-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.873.118 3.176.77.84 1.233 1.91 1.233 3.22 0 4.61-2.804 5.62-5.475 5.92.43.37.815 1.1.815 2.22v3.293c0 .319.192.694.801.576C20.565 21.796 24 17.302 24 12c0-6.628-5.372-12-12-12z\" /&gt;\n        &lt;/svg&gt;\n      &lt;/a&gt;\n      &lt;a href=\"https://discord.com/channels/1258750464800063640/1258750464800063646\" title=\" {{ __('Go to the Discord channel') }} !\" target=\"_blank\"&gt;\n        &lt;svg width=\"25\" height=\"28\" viewBox=\"0 0 71 80\" class=\"fill-current mt-[-.05rem]\" xmlns=\"http://www.w3.org/2000/svg\"&gt;\n          &lt;path d=\"M60.1045 13.8978C55.5792 11.8214 50.7265 10.2916 45.6527 9.41542C45.5603 9.39851 45.468 9.44077 45.4204 9.52529C44.7963 10.6353 44.105 12.0834 43.6209 13.2216C38.1637 12.4046 32.7345 12.4046 27.3892 13.2216C26.905 12.0581 26.1886 10.6353 25.5617 9.52529C25.5141 9.44359 25.4218 9.40133 25.3294 9.41542C20.2584 10.2888 15.4057 11.8186 10.8776 13.8978C10.8384 13.9147 10.8048 13.9429 10.7825 13.9795C1.57795 27.7309 -0.943561 41.1443 0.293408 54.3914C0.299005 54.4562 0.335386 54.5182 0.385761 54.5576C6.45866 59.0174 12.3413 61.7249 18.1147 63.5195C18.2071 63.5477 18.305 63.5139 18.3638 63.4378C19.7295 61.5728 20.9469 59.6063 21.9907 57.5383C22.0523 57.4172 21.9935 57.2735 21.8676 57.2256C19.9366 56.4931 18.0979 55.6 16.3292 54.5858C16.1893 54.5041 16.1781 54.304 16.3068 54.2082C16.679 53.9293 17.0513 53.6391 17.4067 53.3461C17.471 53.2926 17.5606 53.2813 17.6362 53.3151C29.2558 58.6202 41.8354 58.6202 53.3179 53.3151C53.3935 53.2785 53.4831 53.2898 53.5502 53.3433C53.9057 53.6363 54.2779 53.9293 54.6529 54.2082C54.7816 54.304 54.7732 54.5041 54.6333 54.5858C52.8646 55.6197 51.0259 56.4931 49.0921 57.2228C48.9662 57.2707 48.9102 57.4172 48.9718 57.5383C50.038 59.6034 51.2554 61.5699 52.5959 63.435C52.6519 63.5139 52.7526 63.5477 52.845 63.5195C58.6464 61.7249 64.529 59.0174 70.6019 54.5576C70.6551 54.5182 70.6887 54.459 70.6943 54.3942C72.1747 39.0791 68.2147 25.7757 60.1968 13.9823C60.1772 13.9429 60.1437 13.9147 60.1045 13.8978ZM23.7259 46.3253C20.2276 46.3253 17.3451 43.1136 17.3451 39.1693C17.3451 35.225 20.1717 32.0133 23.7259 32.0133C27.308 32.0133 30.1626 35.2532 30.1066 39.1693C30.1066 43.1136 27.28 46.3253 23.7259 46.3253ZM47.3178 46.3253C43.8196 46.3253 40.9371 43.1136 40.9371 39.1693C40.9371 35.225 43.7636 32.0133 47.3178 32.0133C50.9 32.0133 53.7545 35.2532 53.6986 39.1693C53.6986 43.1136 50.9 46.3253 47.3178 46.3253Z\" /&gt;\n        &lt;/svg&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n  &lt;/nav&gt;\n  &lt;aside&gt;\n    &lt;p&gt;Version 0.1.0&lt;/a&gt; - © {{ date('Y') }} Moi&lt;/p&gt;\n  &lt;/aside&gt;\n&lt;/footer&gt;\n</code></pre>","children":[]},{"content":"<pre data-lines=\"2692,2693\"><code>Dans les layouts (app &amp; auth) :\n</code></pre>","children":[],"payload":{"lines":"2692,2693"}},{"content":"<pre><code class=\"language-php\">    {{-- FOOTER --}}\n    &lt;hr&gt;&lt;br&gt;\n    &lt;livewire:navigation.footer /&gt;\n    &lt;br&gt;\n    \n    {{--  TOAST area --}}\n    &lt;x-toast /&gt;\n    &lt;script src=<span class=\"hljs-string\">\"{{ asset('storage/scripts/prism.js') }}\"</span>&gt;&lt;/script&gt;\n  &lt;/body&gt;\n</code></pre>","children":[]},{"content":"<pre data-lines=\"2706,2707\"><code>./lang/fr.json :\n</code></pre>","children":[],"payload":{"lines":"2706,2707"}},{"content":"<pre><code class=\"language-json\">  <span class=\"hljs-attr\">\"Go to the GitHub repository and... Fork it\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Aller sur le dépôt GitHub et... Clonez-le\"</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">\"Go to the Discord channel\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Allez sur le canal Discord\"</span>\n</code></pre>","children":[]}],"payload":{"lines":"2643,2644","fold":1}}],"payload":{"lines":"2554,2555"}},{"content":"Réf.: <em><strong><a href=\"https://laravel.sillo.org/posts/mon-cms-les-menus\">https://laravel.sillo.org/posts/mon-cms-les-menus</a></strong></em>","children":[],"payload":{"lines":"2713,2714"}}],"payload":{"lines":"2339,2340","fold":1}},{"content":"- Les commentaires","children":[{"content":"Model &amp; Migration et factory &amp; seeder Comment","children":[{"content":"Model Comment","children":[{"content":"<pre><code class=\"language-php\">php artisan make:model Comment --migration\n</code></pre>","children":[]},{"content":"<pre><code class=\"language-php\"><span class=\"hljs-meta\">&lt;?php</span>\n<span class=\"hljs-keyword\">namespace</span> <span class=\"hljs-title class_\">App</span>\\<span class=\"hljs-title class_\">Models</span>;\n\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Database</span>\\<span class=\"hljs-title\">Eloquent</span>\\<span class=\"hljs-title\">Factories</span>\\<span class=\"hljs-title\">HasFactory</span>;\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Database</span>\\<span class=\"hljs-title\">Eloquent</span>\\<span class=\"hljs-title\">Model</span>;\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Notifications</span>\\<span class=\"hljs-title\">Notifiable</span>;\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Database</span>\\<span class=\"hljs-title\">Eloquent</span>\\<span class=\"hljs-title\">Relations</span>\\{<span class=\"hljs-title\">BelongsTo</span>, <span class=\"hljs-title\">HasMany</span>};\n\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Comment</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">Model</span> </span>{\n    <span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">HasFactory</span>, <span class=\"hljs-title\">Notifiable</span>;\n\n    <span class=\"hljs-keyword\">protected</span> <span class=\"hljs-variable\">$fillable</span> = [\n        <span class=\"hljs-string\">'body'</span>,\n        <span class=\"hljs-string\">'post_id'</span>,\n        <span class=\"hljs-string\">'user_id'</span>,\n        <span class=\"hljs-string\">'parent_id'</span>,\n    ];\n  \n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">user</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">BelongsTo</span> </span>{\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">belongsTo</span>(<span class=\"hljs-title class_\">User</span>::<span class=\"hljs-variable language_\">class</span>);\n    }\n  \n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">post</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">BelongsTo</span> </span>{\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">belongsTo</span>(<span class=\"hljs-title class_\">Post</span>::<span class=\"hljs-variable language_\">class</span>);\n    }\n  \n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">parent</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">BelongsTo</span> </span>{\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">belongsTo</span>(<span class=\"hljs-title class_\">Comment</span>::<span class=\"hljs-variable language_\">class</span>, <span class=\"hljs-string\">'parent_id'</span>);\n    }\n  \n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">children</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">HasMany</span> </span>{\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">hasMany</span>(<span class=\"hljs-title class_\">Comment</span>::<span class=\"hljs-variable language_\">class</span>, <span class=\"hljs-string\">'parent_id'</span>);\n  }\n}\n</code></pre>","children":[]}],"payload":{"lines":"2719,2720","fold":1}},{"content":"Structure Comment","children":[{"content":"<pre><code class=\"language-php\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">up</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">void</span> </span>{\n    <span class=\"hljs-title class_\">Schema</span>::<span class=\"hljs-title function_ invoke__\">create</span>(<span class=\"hljs-string\">'comments'</span>, function (Blueprint <span class=\"hljs-variable\">$table</span>) {\n        <span class=\"hljs-variable\">$table</span>-&gt;<span class=\"hljs-title function_ invoke__\">id</span>();\n        <span class=\"hljs-variable\">$table</span>-&gt;<span class=\"hljs-title function_ invoke__\">text</span>(<span class=\"hljs-string\">'body'</span>);\n        <span class=\"hljs-variable\">$table</span>-&gt;<span class=\"hljs-title function_ invoke__\">foreignId</span>(<span class=\"hljs-string\">'post_id'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">constrained</span>()-&gt;<span class=\"hljs-title function_ invoke__\">onDelete</span>(<span class=\"hljs-string\">'cascade'</span>);\n        <span class=\"hljs-variable\">$table</span>-&gt;<span class=\"hljs-title function_ invoke__\">foreignId</span>(<span class=\"hljs-string\">'user_id'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">constrained</span>()-&gt;<span class=\"hljs-title function_ invoke__\">onDelete</span>(<span class=\"hljs-string\">'cascade'</span>);\n        <span class=\"hljs-variable\">$table</span>-&gt;<span class=\"hljs-title function_ invoke__\">unsignedBigInteger</span>(<span class=\"hljs-string\">'parent_id'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">nullable</span>()-&gt;<span class=\"hljs-keyword\">default</span>(<span class=\"hljs-literal\">null</span>);\n        <span class=\"hljs-variable\">$table</span>-&gt;<span class=\"hljs-title function_ invoke__\">foreign</span>(<span class=\"hljs-string\">'parent_id'</span>)\n            -&gt;<span class=\"hljs-title function_ invoke__\">references</span>(<span class=\"hljs-string\">'id'</span>)\n            -&gt;<span class=\"hljs-title function_ invoke__\">on</span>(<span class=\"hljs-string\">'comments'</span>)\n            -&gt;<span class=\"hljs-title function_ invoke__\">onDelete</span>(<span class=\"hljs-string\">'cascade'</span>);\n        <span class=\"hljs-variable\">$table</span>-&gt;<span class=\"hljs-title function_ invoke__\">timestamps</span>();\n    });\n}\n</code></pre>","children":[]}],"payload":{"lines":"2762,2763","fold":1}},{"content":"Relations avec Comment","children":[{"content":"Model Post","children":[{"content":"<pre><code class=\"language-php\"><span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Database</span>\\<span class=\"hljs-title\">Eloquent</span>\\<span class=\"hljs-title\">Relations</span>\\{ <span class=\"hljs-title\">HasMany</span>, <span class=\"hljs-title\">BelongsTo</span>};\n\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Post</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">Model</span> </span>{\n    ...\n  \n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">comments</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">HasMany</span> </span>{\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">hasMany</span>(<span class=\"hljs-title class_\">Comment</span>::<span class=\"hljs-variable language_\">class</span>);\n    }\n  \n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">validComments</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">HasMany</span> </span>{\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">comments</span>()-&gt;<span class=\"hljs-title function_ invoke__\">whereHas</span>(<span class=\"hljs-string\">'user'</span>, function (<span class=\"hljs-variable\">$query</span>) {\n            <span class=\"hljs-variable\">$query</span>-&gt;<span class=\"hljs-title function_ invoke__\">whereValid</span>(<span class=\"hljs-literal\">true</span>);\n      });\n  }\n}\n</code></pre>","children":[]}],"payload":{"lines":"2783,2784"}},{"content":"Model User","children":[{"content":"<pre><code class=\"language-php\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">comments</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">HasMany</span> </span>{\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">hasMany</span>(<span class=\"hljs-title class_\">Comment</span>::<span class=\"hljs-variable language_\">class</span>);\n}\n</code></pre>","children":[]}],"payload":{"lines":"2803,2804"}},{"content":"<a href=\"https://laravel.sillo.org/storage/photos/2024/08/535DwpjTWsqCqM6Zut9mwt10mL0FeZp303J1W1Ef.png\">Diagramme UML</a>","children":[],"payload":{"lines":"2811,2812"}}],"payload":{"lines":"2781,2782","fold":1}},{"content":"Population Comment","children":[{"content":"<pre><code class=\"language-php\">php artisan make:factory CommentFactory\n</code></pre>","children":[]},{"content":"<pre><code class=\"language-php\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">definition</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">array</span> </span>{\n    <span class=\"hljs-keyword\">return</span> [\n        <span class=\"hljs-string\">'body'</span> =&gt; <span class=\"hljs-title function_ invoke__\">fake</span>()-&gt;<span class=\"hljs-title function_ invoke__\">paragraph</span>(<span class=\"hljs-number\">4</span>),\n    ];\n}\n</code></pre>","children":[]},{"content":"<pre><code class=\"language-php\">php artisan make:seeder CommentSeeder\n</code></pre>","children":[]},{"content":"<pre><code class=\"language-php\"><span class=\"hljs-meta\">&lt;?php</span>\n<span class=\"hljs-keyword\">namespace</span> <span class=\"hljs-title class_\">Database</span>\\<span class=\"hljs-title class_\">Seeders</span>;\n\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">App</span>\\<span class=\"hljs-title\">Models</span>\\<span class=\"hljs-title\">Comment</span>;\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Database</span>\\<span class=\"hljs-title\">Seeder</span>;\n\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">CommentSeeder</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">Seeder</span>\n</span>{\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">run</span>(<span class=\"hljs-params\"></span>) </span>{\n        <span class=\"hljs-variable\">$nbrPosts</span> = <span class=\"hljs-number\">9</span>;\n        <span class=\"hljs-variable\">$nbrUsers</span> = <span class=\"hljs-number\">3</span>;\n  \n        <span class=\"hljs-keyword\">foreach</span> (<span class=\"hljs-title function_ invoke__\">range</span>(<span class=\"hljs-number\">1</span>, <span class=\"hljs-variable\">$nbrPosts</span> - <span class=\"hljs-number\">1</span>) <span class=\"hljs-keyword\">as</span> <span class=\"hljs-variable\">$i</span>) {\n            <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">createComment</span>(<span class=\"hljs-variable\">$i</span>, <span class=\"hljs-title function_ invoke__\">rand</span>(<span class=\"hljs-number\">1</span>, <span class=\"hljs-variable\">$nbrUsers</span>));\n        }\n  \n        <span class=\"hljs-variable\">$comment</span> = <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">createComment</span>(<span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>);\n        <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">createComment</span>(<span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-variable\">$comment</span>-&gt;id);\n  \n        <span class=\"hljs-variable\">$comment</span> = <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">createComment</span>(<span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">2</span>);\n        <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">createComment</span>(<span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>, <span class=\"hljs-variable\">$comment</span>-&gt;id);\n  \n        <span class=\"hljs-variable\">$comment</span> = <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">createComment</span>(<span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>, <span class=\"hljs-variable\">$comment</span>-&gt;id);\n  \n        <span class=\"hljs-variable\">$comment</span> = <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">createComment</span>(<span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">1</span>, <span class=\"hljs-variable\">$comment</span>-&gt;id);\n        <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">createComment</span>(<span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>, <span class=\"hljs-variable\">$comment</span>-&gt;id);\n  \n        <span class=\"hljs-variable\">$comment</span> = <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">createComment</span>(<span class=\"hljs-number\">4</span>, <span class=\"hljs-number\">1</span>);\n  \n        <span class=\"hljs-variable\">$comment</span> = <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">createComment</span>(<span class=\"hljs-number\">4</span>, <span class=\"hljs-number\">3</span>, <span class=\"hljs-variable\">$comment</span>-&gt;id);\n        <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">createComment</span>(<span class=\"hljs-number\">4</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-variable\">$comment</span>-&gt;id);\n        <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">createComment</span>(<span class=\"hljs-number\">4</span>, <span class=\"hljs-number\">1</span>, <span class=\"hljs-variable\">$comment</span>-&gt;id);\n    }\n  \n    <span class=\"hljs-keyword\">protected</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">createComment</span>(<span class=\"hljs-params\"><span class=\"hljs-variable\">$post_id</span>, <span class=\"hljs-variable\">$user_id</span>, <span class=\"hljs-variable\">$id</span> = <span class=\"hljs-literal\">null</span></span>) </span>{\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title class_\">Comment</span>::<span class=\"hljs-title function_ invoke__\">factory</span>()-&gt;<span class=\"hljs-title function_ invoke__\">create</span>([\n            <span class=\"hljs-string\">'post_id'</span> =&gt; <span class=\"hljs-variable\">$post_id</span>,\n            <span class=\"hljs-string\">'user_id'</span> =&gt; <span class=\"hljs-variable\">$user_id</span>,\n          <span class=\"hljs-string\">'parent_id'</span> =&gt; <span class=\"hljs-variable\">$id</span>,\n      ]);\n  }\n}\n</code></pre>","children":[]},{"content":"<pre data-lines=\"2876,2877\"><code>DatabaseSeeder.php :\n</code></pre>","children":[],"payload":{"lines":"2876,2877"}},{"content":"<pre><code class=\"language-php\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">run</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">void</span> </span>{\n    <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">call</span>([\n        ...\n        <span class=\"hljs-title class_\">CommentSeeder</span>::<span class=\"hljs-variable language_\">class</span>,\n    ]);\n}\n</code></pre>","children":[]},{"content":"<pre><code class=\"language-php\">php artisan migrate:fresh --seed\n</code></pre>","children":[]}],"payload":{"lines":"2813,2814","fold":1}}],"payload":{"lines":"2717,2718","fold":1}},{"content":"Modifier dans PostRepository pour Comment","children":[{"content":"<pre><code class=\"language-php\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">getPostBySlug</span>(<span class=\"hljs-params\"><span class=\"hljs-keyword\">string</span> <span class=\"hljs-variable\">$slug</span></span>): <span class=\"hljs-title\">Post</span> </span>{\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title class_\">Post</span>::<span class=\"hljs-title function_ invoke__\">with</span>(<span class=\"hljs-string\">'user:id,name'</span>, <span class=\"hljs-string\">'category'</span>)\n        -&gt;<span class=\"hljs-title function_ invoke__\">withCount</span>(<span class=\"hljs-string\">'validComments'</span>)\n        -&gt;<span class=\"hljs-title function_ invoke__\">whereSlug</span>(<span class=\"hljs-variable\">$slug</span>)-&gt;<span class=\"hljs-title function_ invoke__\">firstOrFail</span>();\n}\n</code></pre>","children":[]}],"payload":{"lines":"2891,2892","fold":1}},{"content":"Ajouter &amp; modifier dans posts.show pour Comment","children":[{"content":"<pre data-lines=\"2903,2904\"><code>Notons que le bouton pour voir le(s) commentaire(s) n'est pas encore opérationnel...\n</code></pre>","children":[],"payload":{"lines":"2903,2904"}},{"content":"<pre><code class=\"language-php\">new class extends Component {\n    ...\n    public int $commentsCount;\n\n    public function mount($slug): void {\n        $postRepository = new PostRepository();\n        $this-&gt;post = $postRepository-&gt;getPostBySlug($slug);\n        $this-&gt;commentsCount = $this-&gt;post-&gt;valid_comments_count;\n    }\n}; ?&gt;\n   ...\n    &lt;div class=\"flex justify-between\"&gt;\n        &lt;p&gt;@lang('By ') {{ $post-&gt;user-&gt;name }}&lt;/p&gt;\n        &lt;em&gt;\n            @if ($commentsCount &gt; 0)\n                @lang('Number of comments: ') {{ $commentsCount }}\n            @else\n                @lang('No comments')\n            @endif\n        &lt;/em&gt;\n    &lt;/div&gt;\n    &lt;div id=\"bottom\" class=\"relative items-center w-full py-5 mx-auto md:px-12 max-w-7xl\"&gt;\n        @if ($commentsCount &gt; 0)\n            &lt;div class=\"flex justify-center\"&gt;\n                &lt;x-button label=\"{{ $commentsCount &gt; 1 ? __('View comments') : __('View comment') }}\" class=\"btn-outline\" spinner /&gt;\n            &lt;/div&gt;\n        @endif\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>","children":[]},{"content":"<pre data-lines=\"2937,2938\"><code>Traductions Comment nécessaires dans posts.show :\n</code></pre>","children":[],"payload":{"lines":"2937,2938"}},{"content":"<pre><code class=\"language-json\"><span class=\"hljs-attr\">\"Number of comments: \"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Nombre de commentaires : \"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"View comment\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Voir le commentaire\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"View comments\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Voir les commentaires\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"All comments\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Tous les commentaires\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"No comments\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Aucun commentaire\"</span>\n</code></pre>","children":[]}],"payload":{"lines":"2901,2902","fold":1}},{"content":"Voir les commentaires dans posts.show","children":[{"content":"<pre><code class=\"language-php\">&lt;?php\n...\nuse Illuminate\\Support\\Collection;\n\nnew class extends Component {\n    ...\n    public Collection $comments;\n    public bool $listComments = false;\n    ...\n    public function showComments(): void {\n        $this-&gt;listComments = true;\n\n        $this-&gt;comments = $this-&gt;post\n            -&gt;validComments()\n            -&gt;where('parent_id', null)\n            -&gt;withCount([\n                'children' =&gt; function ($query) {\n                    $query-&gt;whereHas('user', function ($q) {\n                        $q-&gt;where('valid', true);\n                    });\n                },\n            ])\n            -&gt;with([\n                'user' =&gt; function ($query) {\n                    $query-&gt;select('id', 'name', 'email', 'role')-&gt;withCount('comments');\n                },\n            ])\n            -&gt;latest()\n            -&gt;get();\n        dd ($this-&gt;comments); \n        // Commenter le dd() ci-dessus après avoir observé le bon contenu de $this-&gt;comments\n        // Qui doit-être un truc style : \n        //   Illuminate\\Database\\Eloquent\\Collection {#609 ▼ // resources\\views\\livewire\\posts\\show.blade.php:44\n        //     #items: array:3 [▼\n        //       0 =&gt; App\\Models\\Comment {#612 ▶}\n        //       1 =&gt; App\\Models\\Comment {#606 ▶}\n        //       2 =&gt; App\\Models\\Comment {#616 ▶}\n        //     ]\n        //     #escapeWhenCastingToString: false\n        //   }\n        // Supprimer ces lignes commentées après avoir observé ce résultat à partir de // Commenter...\n    }\n}; ?&gt;\n...\n// Modifier le bouton pour l'activer au click\n&lt;x-button label=\"{{ $commentsCount &gt; 1 ? __('View comments') : __('View comment') }}\"\nwire:click=\"showComments\" class=\"btn-outline\" spinner /&gt;\n...\n</code></pre>","children":[]}],"payload":{"lines":"2947,2948","fold":1}},{"content":"Réf.: <em><strong><a href=\"https://laravel.sillo.org/posts/mon-cms-les-commentaires-1-2\">https://laravel.sillo.org/posts/mon-cms-les-commentaires-1-2</a></strong></em>","children":[],"payload":{"lines":"3000,3001"}},{"content":"Le formulaire (Composant posts/comment-form)","children":[{"content":"<pre><code class=\"language-php\">php artisan make:volt posts/comment-form --<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span>\n</span></code></pre>","children":[]},{"content":"<pre><code class=\"language-php\">@if ($showForm)\n    &lt;x-card title=\"{{ $formTitle }}\" shadow=\"hidden\" class=\"!p-0\"&gt;\n        &lt;x-form wire:submit=\"{{ $formAction }}\" class=\"mb-4\"&gt;\n            &lt;x-textarea wire:model=\"message\" hint=\"{{ __('Max 10000 chars') }}\" rows=\"5\" placeholder=\"{{ __('Your message...') }}\" inline /&gt;\n            &lt;x-slot:actions&gt;\n                @if ($formAction === 'updateComment')\n                    &lt;x-button label=\"{{ __('Cancel') }}\" wire:click=\"toggleModifyForm(false)\"\n                        class=\"btn-ghost\" spinner /&gt;\n                @endif\n                &lt;x-button label=\"{{ __('Save') }}\" class=\"btn-primary\" type=\"submit\" spinner=\"save\" /&gt;\n            &lt;/x-slot:actions&gt;\n        &lt;/x-form&gt;\n    &lt;/x-card&gt;\n@else\n    &lt;div class=\"mb-4\"&gt;{!! $message !!}&lt;/div&gt;\n@endif\n</code></pre>","children":[]}],"payload":{"lines":"3002,3003","fold":1}},{"content":"Gravatar","children":[{"content":"Installer Gravatar","children":[{"content":"<pre><code class=\"language-php\">composer <span class=\"hljs-keyword\">require</span> creativeorange/gravatar ~<span class=\"hljs-number\">1.0</span>\n---\nUsage:\n<span class=\"hljs-title class_\">Gravatar</span>::<span class=\"hljs-title function_ invoke__\">get</span>(<span class=\"hljs-string\">'email@example.com'</span>);\n</code></pre>","children":[]}],"payload":{"lines":"3029,3030"}},{"content":"<a href=\"https://gravatar.com/\">Créer son Gravatar</a>","children":[],"payload":{"lines":"3038,3039"}}],"payload":{"lines":"3027,3028","fold":1}},{"content":"Les notifications","children":[{"content":"Création de commentaire","children":[{"content":"<pre><code class=\"language-php\">php artisan make:notification CommentCreated\n</code></pre>","children":[]},{"content":"<pre data-lines=\"3048,3049\"><code>Dans app/Notifications/CommentCreated.php :\n</code></pre>","children":[],"payload":{"lines":"3048,3049"}},{"content":"<pre><code class=\"language-php\"><span class=\"hljs-meta\">&lt;?php</span>\n<span class=\"hljs-keyword\">namespace</span> <span class=\"hljs-title class_\">App</span>\\<span class=\"hljs-title class_\">Notifications</span>;\n\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">App</span>\\<span class=\"hljs-title\">Models</span>\\<span class=\"hljs-title\">Comment</span>;\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Bus</span>\\<span class=\"hljs-title\">Queueable</span>;\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Notifications</span>\\<span class=\"hljs-title\">Notification</span>;\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Notifications</span>\\<span class=\"hljs-title\">Messages</span>\\<span class=\"hljs-title\">MailMessage</span>;\n\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">CommentCreated</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">Notification</span>\n</span>{\n    <span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Queueable</span>;\n  \n    <span class=\"hljs-keyword\">public</span> Comment <span class=\"hljs-variable\">$comment</span>;\n  \n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">__construct</span>(<span class=\"hljs-params\">Comment <span class=\"hljs-variable\">$comment</span></span>) </span>{\n        <span class=\"hljs-variable language_\">$this</span>-&gt;comment = <span class=\"hljs-variable\">$comment</span>;\n    }\n  \n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">via</span>(<span class=\"hljs-params\"><span class=\"hljs-keyword\">object</span> <span class=\"hljs-variable\">$notifiable</span></span>): <span class=\"hljs-title\">array</span> </span>{\n        <span class=\"hljs-keyword\">return</span> [<span class=\"hljs-string\">'mail'</span>];\n    }\n  \n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">toMail</span>(<span class=\"hljs-params\"><span class=\"hljs-keyword\">object</span> <span class=\"hljs-variable\">$notifiable</span></span>): <span class=\"hljs-title\">MailMessage</span> </span>{\n        <span class=\"hljs-keyword\">return</span> (<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">MailMessage</span>())\n            -&gt;<span class=\"hljs-title function_ invoke__\">subject</span>(<span class=\"hljs-title function_ invoke__\">__</span>(<span class=\"hljs-string\">'A comment has been created on your post'</span>))\n            -&gt;<span class=\"hljs-title function_ invoke__\">line</span>(<span class=\"hljs-title function_ invoke__\">__</span>(<span class=\"hljs-string\">'A comment has been created on your post'</span>) . <span class=\"hljs-string\">' \"'</span> . <span class=\"hljs-variable\">$this</span>-&gt;comment-&gt;post-&gt;title . <span class=\"hljs-string\">'\" '</span> . <span class=\"hljs-title function_ invoke__\">__</span>(<span class=\"hljs-string\">'by'</span>) . <span class=\"hljs-string\">' '</span> . <span class=\"hljs-variable\">$this</span>-&gt;comment-&gt;user-&gt;name . <span class=\"hljs-string\">'.'</span>)\n            -&gt;<span class=\"hljs-title function_ invoke__\">lineIf</span>(!<span class=\"hljs-variable\">$this</span>-&gt;comment-&gt;user-&gt;valid, <span class=\"hljs-title function_ invoke__\">__</span>(<span class=\"hljs-string\">'This comment is awaiting moderation.'</span>))\n            -&gt;<span class=\"hljs-title function_ invoke__\">action</span>(<span class=\"hljs-title function_ invoke__\">__</span>(<span class=\"hljs-string\">'Manage this comment'</span>), <span class=\"hljs-string\">\"#\"</span>);\n    }\n  \n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">toArray</span>(<span class=\"hljs-params\"><span class=\"hljs-keyword\">object</span> <span class=\"hljs-variable\">$notifiable</span></span>): <span class=\"hljs-title\">array</span> </span>{\n        <span class=\"hljs-keyword\">return</span> [\n        ];\n    }\n}\n</code></pre>","children":[]},{"content":"<pre><code class=\"language-php\"><span class=\"hljs-string\">\"A comment has been created on your post\"</span>: <span class=\"hljs-string\">\"Un commentaire a été ajouté à votre article\"</span>,\n<span class=\"hljs-string\">\"This comment is awaiting moderation.\"</span>: <span class=\"hljs-string\">\"Ce commentaire est en attente de modération.\"</span>,\n<span class=\"hljs-string\">\"Manage this comment\"</span>: <span class=\"hljs-string\">\"Gérer ce commentaire\"</span>,\n<span class=\"hljs-string\">\"by\"</span>: <span class=\"hljs-string\">\"par\"</span>\n</code></pre>","children":[]}],"payload":{"lines":"3042,3043","fold":1}},{"content":"Affichage des commentaires 1er niveau","children":[{"content":"<pre><code class=\"language-php\">php artisan make:volt posts/commentBase --<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span>\n</span></code></pre>","children":[]},{"content":"<pre><code class=\"language-php\">&lt;?php\nuse App\\Models\\{ Comment, Post };\nuse App\\Notifications\\CommentCreated;\nuse Illuminate\\Contracts\\Database\\Eloquent\\Builder;\nuse Livewire\\Attributes\\Validate;\nuse Livewire\\Volt\\Component;\n\nnew class() extends Component {\n    public int $postId;\n    public ?Comment $comment    = null;\n    public bool $showCreateForm = true;\n    public bool $showModifyForm = false;\n    public bool $alert          = false;\n  \n    #[Validate('required|max:10000')]\n    public string $message = '';\n  \n    public function mount($postId): void {\n        $this-&gt;postId = $postId;\n    }\n  \n    public function createComment(): void {\n        $data = $this-&gt;validate();\n  \n        if (!Auth::user()-&gt;valid) {\n            $this-&gt;alert = true;\n        }\n  \n        $post = Post::select('id', 'title', 'user_id')-&gt;with('user')-&gt;findOrFail($this-&gt;postId);\n  \n        $this-&gt;comment = Comment::create([\n            'user_id' =&gt; Auth::id(),\n            'post_id' =&gt; $this-&gt;postId,\n            'body'    =&gt; $this-&gt;message,\n        ]);\n  \n        if ($this-&gt;post-&gt;user_id != Auth::id()) {\n            $post-&gt;user-&gt;notify(new CommentCreated($this-&gt;comment));\n        }\n  \n        $this-&gt;message = $data['message'];\n    }\n  \n    public function updateComment(): void {\n        $data = $this-&gt;validate();\n  \n        $this-&gt;comment-&gt;body = $data['message'];\n        $this-&gt;comment-&gt;save();\n  \n        $this-&gt;toggleModifyForm(false);\n    }\n  \n    public function toggleModifyForm(bool $state): void {\n        $this-&gt;showModifyForm = $state;\n    }\n  \n    public function deleteComment(): void {\n        $this-&gt;comment-&gt;delete();\n  \n        $this-&gt;comment = null;\n        $this-&gt;message = '';\n    }\n}; ?&gt;\n\n&lt;div class=\"flex flex-col mt-4\"&gt;\n    @if ($this-&gt;comment)\n\n        @if ($alert)\n            &lt;x-alert title=\"{!! __('This is your first comment') !!}\" description=\"{!! __('It will be validated by an administrator before it appears here') !!}\" icon=\"o-exclamation-triangle\"\n                class=\"alert-warning\" /&gt;\n        @else\n            &lt;div class=\"flex flex-col justify-between mb-4 md:flex-row\"&gt;\n                &lt;x-avatar :image=\"Gravatar::get(Auth::user()-&gt;email)\" class=\"!w-24\"&gt;\n                    &lt;x-slot:title class=\"pl-2 text-xl\"&gt;\n                        {{ Auth::user()-&gt;name }}\n                    &lt;/x-slot:title&gt;\n                    &lt;x-slot:subtitle class=\"flex flex-col gap-1 pl-2 mt-2 text-gray-500\"&gt;\n                        &lt;x-icon name=\"o-calendar\" label=\"{{ $comment-&gt;created_at-&gt;diffForHumans() }}\" /&gt;\n                        &lt;x-icon name=\"o-chat-bubble-left\"\n                            label=\"{{ $comment-&gt;user-&gt;comments_count }} {{ __(' comments') }}\" /&gt;\n                    &lt;/x-slot:subtitle&gt;\n                &lt;/x-avatar&gt;\n\n                &lt;div class=\"flex flex-col mt-4 space-y-2 lg:mt-0 lg:flex-row lg:items-center lg:space-y-0 lg:space-x-2\"&gt;\n                    &lt;x-button label=\"{{ __('Modify') }}\" wire:click=\"toggleModifyForm(true)\"\n                        class=\"btn-outline btn-sm\" /&gt;\n                    &lt;x-button label=\"{{ __('Delete') }}\" wire:click=\"deleteComment()\"\n                        wire:confirm=\"{{ __('Are you sure to delete this comment?') }}\"\n                        class=\"btn-outline btn-error btn-sm\" /&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n\n            @include('livewire.posts.comment-form', ['formTitle' =&gt; __('Update your comment'), 'formAction' =&gt; 'updateComment', 'showForm' =&gt; $showModifyForm, 'message' =&gt; $comment-&gt;body])\n\n        @endif\n\n    @else\n        @include('livewire.posts.comment-form', ['formTitle' =&gt; __('Leave a comment'), 'formAction' =&gt; 'createComment', 'showForm' =&gt; true, 'message' =&gt; ''])\n    @endif\n\n&lt;/div&gt;\n</code></pre>","children":[]},{"content":"<pre><code class=\"language-php\"><span class=\"hljs-string\">\"This is your first comment\"</span>: <span class=\"hljs-string\">\"C'est votre premier commentaire\"</span>,\n<span class=\"hljs-string\">\"It will be validate by an administrator before it appears here\"</span>: <span class=\"hljs-string\">\"Il sera valide par un administrateur avant qu'il ne soit affiché ici\"</span>,\n<span class=\"hljs-string\">\"Leave a comment\"</span>: <span class=\"hljs-string\">\"Laissez un commentaire\"</span>,\n<span class=\"hljs-string\">\"Your comment\"</span>: <span class=\"hljs-string\">\"Votre commentaire\"</span>,\n<span class=\"hljs-string\">\"Update your comment\"</span>: <span class=\"hljs-string\">\"Modifier votre commentaire\"</span>,\n<span class=\"hljs-string\">\"Are you sure to delete this comment?\"</span>: <span class=\"hljs-string\">\"Êtes-vous sûr de vouloir supprimer ce commentaire ?\"</span>,\n<span class=\"hljs-string\">\"Comments\"</span>: <span class=\"hljs-string\">\"Commentaires\"</span>,\n<span class=\"hljs-string\">\"Modify\"</span>: <span class=\"hljs-string\">\"Modifier\"</span>,\n<span class=\"hljs-string\">\"1 comment\"</span>: <span class=\"hljs-string\">\"1 commentaire\"</span>,\n<span class=\"hljs-string\">\"comments\"</span>: <span class=\"hljs-string\">\"commentaires\"</span>,\n<span class=\"hljs-string\">\"Max 10000 chars\"</span>: <span class=\"hljs-string\">\"Max 10 000 caractères\"</span>\n</code></pre>","children":[]},{"content":"<pre data-lines=\"3219,3220\"><code>Modification de posts.show :\n</code></pre>","children":[],"payload":{"lines":"3219,3220"}},{"content":"<pre><code class=\"language-php\">...\n   &lt;div id=\"bottom\" class=\"relative items-center w-full py-5 mx-auto md:px-12 max-w-7xl\"&gt;\n        @if ($listComments)\n            &lt;x-card title=\"{{ __('Comments') }}\" shadow separator&gt;\n                 Affichage des commentaires ici !\n                @auth\n                    &lt;livewire:posts.commentBase :postId=\"$post-&gt;id\" /&gt;\n                @endauth\n            &lt;/x-card&gt;\n        @else\n            @if ($commentsCount &gt; 0)\n                &lt;div class=\"flex justify-center\"&gt;\n                    &lt;x-button label=\"{{ $commentsCount &gt; 1 ? __('View comments') : __('View comment') }}\"\n                        wire:click=\"showComments\" class=\"btn-outline\" spinner /&gt;\n                &lt;/div&gt;\n            @else\n                @auth\n                    &lt;livewire:posts.commentBase :postId=\"$post-&gt;id\" /&gt;\n                @endauth\n            @endif\n        @endif\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>","children":[]}],"payload":{"lines":"3095,3096","fold":1}},{"content":"Notification de réponse à un commentaire","children":[{"content":"<pre><code class=\"language-php\">php artisan make:notification CommentAnswerCreated\n</code></pre>","children":[]},{"content":"<pre><code class=\"language-php\"><span class=\"hljs-meta\">&lt;?php</span>\n<span class=\"hljs-keyword\">namespace</span> <span class=\"hljs-title class_\">App</span>\\<span class=\"hljs-title class_\">Notifications</span>;\n\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">App</span>\\<span class=\"hljs-title\">Models</span>\\<span class=\"hljs-title\">Comment</span>;\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Bus</span>\\<span class=\"hljs-title\">Queueable</span>;\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Notifications</span>\\<span class=\"hljs-title\">Messages</span>\\<span class=\"hljs-title\">MailMessage</span>;\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Notifications</span>\\<span class=\"hljs-title\">Notification</span>;\n\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">CommentAnswerCreated</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">Notification</span>\n</span>{\n    <span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Queueable</span>;\n\n    <span class=\"hljs-keyword\">public</span> Comment <span class=\"hljs-variable\">$comment</span>;\n\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">__construct</span>(<span class=\"hljs-params\">Comment <span class=\"hljs-variable\">$comment</span></span>) </span>{\n        <span class=\"hljs-variable language_\">$this</span>-&gt;comment = <span class=\"hljs-variable\">$comment</span>;\n    }\n  \n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">via</span>(<span class=\"hljs-params\"><span class=\"hljs-keyword\">object</span> <span class=\"hljs-variable\">$notifiable</span></span>): <span class=\"hljs-title\">array</span> </span>{\n        <span class=\"hljs-keyword\">return</span> [<span class=\"hljs-string\">'mail'</span>];\n    }\n  \n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">toMail</span>(<span class=\"hljs-params\"><span class=\"hljs-keyword\">object</span> <span class=\"hljs-variable\">$notifiable</span></span>): <span class=\"hljs-title\">MailMessage</span> </span>{\n        <span class=\"hljs-keyword\">return</span> (<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">MailMessage</span>())\n            -&gt;<span class=\"hljs-title function_ invoke__\">subject</span>(<span class=\"hljs-title function_ invoke__\">__</span>(<span class=\"hljs-string\">'An answer has been created on your comment'</span>))\n            -&gt;<span class=\"hljs-title function_ invoke__\">line</span>(<span class=\"hljs-title function_ invoke__\">__</span>(<span class=\"hljs-string\">'An answer has been created on your comment'</span>) . <span class=\"hljs-string\">' \"'</span> . <span class=\"hljs-variable\">$this</span>-&gt;comment-&gt;post-&gt;title . <span class=\"hljs-string\">'\" '</span> . <span class=\"hljs-title function_ invoke__\">__</span>(<span class=\"hljs-string\">'by'</span>) . <span class=\"hljs-string\">' '</span> . <span class=\"hljs-variable\">$this</span>-&gt;comment-&gt;user-&gt;name . <span class=\"hljs-string\">'.'</span>)\n            -&gt;<span class=\"hljs-title function_ invoke__\">action</span>(<span class=\"hljs-title function_ invoke__\">__</span>(<span class=\"hljs-string\">'Show this comment'</span>), <span class=\"hljs-title function_ invoke__\">route</span>(<span class=\"hljs-string\">'posts.show'</span>, <span class=\"hljs-variable\">$this</span>-&gt;comment-&gt;post-&gt;slug));\n    }\n  \n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">toArray</span>(<span class=\"hljs-params\"><span class=\"hljs-keyword\">object</span> <span class=\"hljs-variable\">$notifiable</span></span>): <span class=\"hljs-title\">array</span> </span>{\n        <span class=\"hljs-keyword\">return</span> [\n        ];\n    }\n}\n</code></pre>","children":[]},{"content":"<pre><code class=\"language-php\"><span class=\"hljs-string\">\"An answer has been created on your comment\"</span>: <span class=\"hljs-string\">\"Une réponse a été apportée à votre commentaire\"</span>,\n<span class=\"hljs-string\">\"Show this comment\"</span>: <span class=\"hljs-string\">\"Voir ce commentaire\"</span>\n</code></pre>","children":[]}],"payload":{"lines":"3247,3248","fold":1}}],"payload":{"lines":"3040,3041","fold":1}},{"content":"Composant pour l'affichage des commentaires","children":[{"content":"<pre><code class=\"language-php\">php artisan make:volt posts/comment --<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span>\n</span></code></pre>","children":[]},{"content":"<pre><code class=\"language-php\">&lt;?php\nuse App\\Models\\{ Comment, Reaction };\nuse App\\Notifications\\{CommentAnswerCreated, CommentCreated};\nuse Illuminate\\Support\\Collection;\nuse Livewire\\Attributes\\Validate;\nuse Livewire\\Volt\\Component;\n\nnew class() extends Component {\n    public ?Comment $comment;\n    public ?Collection $children;\n    public bool $showAnswerForm = false;\n    public bool $showModifyForm = false;\n    public bool $alert          = false;\n    public int $children_count  = 0;\n    public int $depth;\n  \n    #[Validate('required|max:10000')]\n    public string $message = '';\n  \n    public function mount($comment, $depth): void {\n        $this-&gt;comment = $comment;\n        $this-&gt;depth   = $depth;\n        $this-&gt;message = strip_tags($comment-&gt;body);\n        $this-&gt;children_count = $comment-&gt;children_count;\n    }\n  \n    public function showAnswers(): void {\n        $this-&gt;children = Comment::where('parent_id', $this-&gt;comment-&gt;id)\n            -&gt;with([\n                'user' =&gt; function ($query) {\n                    $query-&gt;select('id', 'name', 'email', 'role')-&gt;withCount('comments');\n                },\n            ])\n            -&gt;withCount(['children' =&gt; function ($query) {\n                $query-&gt;whereHas('user', function ($q) {\n                    $q-&gt;where('valid', true);\n                });\n            }])\n            -&gt;get();\n  \n        $this-&gt;children_count = 0;\n    }\n  \n    public function toggleAnswerForm(bool $state): void {\n        $this-&gt;showAnswerForm = $state;\n        $this-&gt;message        = '';\n    }\n  \n    public function toggleModifyForm(bool $state): void {\n        $this-&gt;showModifyForm = $state;\n    }\n  \n    public function createAnswer(): void {\n        $data              = $this-&gt;validate();\n        $data['parent_id'] = $this-&gt;comment-&gt;id;\n        $data['user_id']   = Auth::id();\n        $data['post_id']   = $this-&gt;comment-&gt;post_id;\n        $data['body']      = $this-&gt;message;\n  \n        $item = Comment::create($data);\n  \n        $item-&gt;save();\n  \n        if ($item-&gt;post-&gt;user_id != Auth::id()) {\n            $item-&gt;post-&gt;user-&gt;notify(new CommentCreated($item));\n        }\n  \n        $author = $this-&gt;comment-&gt;user;\n        if ($author-&gt;id != $item-&gt;post-&gt;user_id &amp;&amp; $author-&gt;id != Auth::id()) {\n            $author-&gt;notify(new CommentAnswerCreated($item));\n        }\n  \n        $this-&gt;toggleAnswerForm(false);\n  \n        $this-&gt;showAnswers();\n    }\n  \n    public function updateAnswer(): void {\n        $data = $this-&gt;validate();\n  \n        $this-&gt;comment-&gt;body = $data['message'];\n        $this-&gt;comment-&gt;save();\n  \n        $this-&gt;toggleModifyForm(false);\n    }\n  \n    public function deleteComment(): void {\n        $this-&gt;comment-&gt;delete();\n        $this-&gt;childs  = null;\n        $this-&gt;comment = null;\n    } \n}; ?&gt;\n\n&lt;div&gt;\n    &lt;style&gt;\n        @media (max-width: 768px) {\n            .ml-0 { margin-left: 0rem; }\n            .ml-3 { margin-left: 0.75rem; }\n            .ml-6 { margin-left: 1.5rem; }\n            .ml-9 { margin-left: 2.25rem; }\n        }\n        @media (min-width: 769px) {\n            .ml-0 { margin-left: 0rem; }\n            .ml-3 { margin-left: 3rem; }\n            .ml-6 { margin-left: 6rem; }\n            .ml-9 { margin-left: 9rem; }\n        }\n    &lt;/style&gt;\n\n    @if ($comment)\n        &lt;div class=\"flex flex-col mt-4 ml-{{ $depth * 3 }} lg:ml-{{ $depth * 3 }} border-2 border-gray-400 rounded-md p-2 selection:transition duration-500 ease-in-out shadow-md shadow-gray-500 hover:shadow-xl hover:shadow-gray-500\" &gt;\n\n            &lt;div class=\"flex flex-col justify-between mb-4 md:flex-row\"&gt;\n                &lt;x-avatar :image=\"Gravatar::get($comment-&gt;user-&gt;email)\" class=\"!w-24\"&gt;\n                    &lt;x-slot:title class=\"pl-2 text-xl\"&gt;\n                        {{ $comment-&gt;user-&gt;name }}\n                    &lt;/x-slot:title&gt;\n                    &lt;x-slot:subtitle class=\"flex flex-col gap-1 pl-2 mt-2 text-gray-500\"&gt;\n                        &lt;x-icon name=\"o-calendar\" label=\"{{ $comment-&gt;created_at-&gt;diffForHumans() }}\" /&gt;\n                        &lt;x-icon name=\"o-chat-bubble-left\"  label=\"{{ $comment-&gt;user-&gt;comments_count == 0 ? '' : ($comment-&gt;user-&gt;comments_count == 1 ? __('1 comment') : $comment-&gt;user-&gt;comments_count . ' ' . __('comments')) }}\" /&gt;\n                    &lt;/x-slot:subtitle&gt;\n                &lt;/x-avatar&gt;\n\n                &lt;div class=\"flex flex-col mt-4 space-y-2 lg:mt-0 lg:flex-row lg:items-center lg:space-y-0 lg:space-x-2\"&gt;\n                    @auth\n                        @if (Auth::user()-&gt;name == $comment-&gt;user-&gt;name)\n                            &lt;x-button label=\"{{ __('Modify') }}\" wire:click=\"toggleModifyForm(true)\"\n                                class=\"btn-outline btn-warning btn-sm\" spinner /&gt;\n                            &lt;x-button label=\"{{ __('Delete') }}\" wire:click=\"deleteComment()\"\n                                wire:confirm=\"{{ __('Are you sure to delete this comment?') }}\"\n                                class=\"mt-2 btn-outline btn-error btn-sm\" spinner /&gt;\n                        @endif\n                        @if ($depth &lt; 3)\n                            &lt;x-button label=\"{{ __('Answer') }}\" wire:click=\"toggleAnswerForm(true)\"\n                                class=\"mt-2 btn-outline btn-sm\" spinner /&gt;\n                        @endif\n                    @endauth\n                &lt;/div&gt;\n            &lt;/div&gt;\n\n            @if(!$showModifyForm)\n                &lt;div class=\"mb-4\"&gt;\n                    {!! nl2br($comment-&gt;body) !!}\n                &lt;/div&gt;\n            @endif\n            @if ($showModifyForm || $showAnswerForm)\n                &lt;x-card :title=\"($showModifyForm ? __('Update your comment') : __('Your answer'))\" shadow=\"hidden\" class=\"!p-0\"&gt;\n                    &lt;x-form :wire:submit=\"($showModifyForm ? 'updateAnswer' : 'createAnswer')\" class=\"mb-4\"&gt;\n                        &lt;x-textarea wire:model=\"message\" :placeholder=\"($showAnswerForm ? __('Your answer') . ' ...' : '')\" hint=\"{{ __('Max 10000 chars') }}\" rows=\"5\" inline /&gt;\n                        &lt;x-slot:actions&gt;\n                            &lt;x-button label=\"{{ __('Cancel') }}\" :wire:click=\"($showModifyForm ? 'toggleModifyForm(false)' : 'toggleAnswerForm(false)')\"\n                                class=\"btn-ghost\" /&gt;\n                            &lt;x-button label=\"{{ __('Save') }}\" class=\"btn-primary\" type=\"submit\" spinner=\"save\" /&gt;\n                        &lt;/x-slot:actions&gt;\n                    &lt;/x-form&gt;\n                &lt;/x-card&gt;\n            @endif\n\n            @if ($alert)\n                &lt;x-alert title=\"{!! __('This is your first comment') !!}\"\n                    description=\"{{ __('It will be validated by an administrator before it appears here') }}\"\n                    icon=\"o-exclamation-triangle\" class=\"alert-warning\" /&gt;\n            @endif\n\n            @if($children_count &gt; 0)\n                &lt;x-button label=\"{{ __('Show the answers') }} ({{ $children_count }})\" wire:click=\"showAnswers\" class=\"mt-2 btn-outline btn-sm\" spinner /&gt;\n            @endif\n\n        &lt;/div&gt;\n    @endif\n\n    @if($children)\n        @foreach ($children as $child)\n            &lt;livewire:posts.comment :comment=\"$child\" :depth=\"$depth + 1\" :key=\"$child-&gt;id\"&gt;\n        @endforeach\n    @endif\n\n&lt;/div&gt;\n</code></pre>","children":[]},{"content":"<pre><code class=\"language-php\"><span class=\"hljs-string\">\"Answer\"</span>: <span class=\"hljs-string\">\"Répondre\"</span>,\n<span class=\"hljs-string\">\"Show the answers\"</span>: <span class=\"hljs-string\">\"Afficher les réponses\"</span>\n</code></pre>","children":[]},{"content":"<pre data-lines=\"3487,3488\"><code>Adaptation du posts.show à la place de : 'Affichage des commentaires ici !'\n</code></pre>","children":[],"payload":{"lines":"3487,3488"}},{"content":"<pre><code class=\"language-php\">    @<span class=\"hljs-keyword\">foreach</span> (<span class=\"hljs-variable\">$comments</span> <span class=\"hljs-keyword\">as</span> <span class=\"hljs-variable\">$comment</span>)\n        @<span class=\"hljs-keyword\">if</span> (!<span class=\"hljs-variable\">$comment</span>-&gt;parent_id)\n            &lt;livewire:posts.comment :<span class=\"hljs-variable\">$comment</span> :depth=<span class=\"hljs-string\">\"0\"</span> :key=<span class=\"hljs-string\">\"<span class=\"hljs-subst\">$comment</span>-&gt;id\"</span> /&gt;\n        @<span class=\"hljs-keyword\">endif</span>\n    @<span class=\"hljs-keyword\">endforeach</span>\n</code></pre>","children":[]}],"payload":{"lines":"3295,3296","fold":1}},{"content":"Sécurité // {!! $uneVariabledansDuCodeBladeQuiContientDuCodeDestinéÀLaVue !!}","children":[{"content":"<pre><code class=\"language-php\">composer <span class=\"hljs-keyword\">require</span> mews/purifier\n</code></pre>","children":[]},{"content":"<pre><code class=\"language-php\"><span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Mews</span>\\<span class=\"hljs-title\">Purifier</span>\\<span class=\"hljs-title\">Casts</span>\\<span class=\"hljs-title\">CleanHtmlInput</span>;\n\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Comment</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">Model</span>\n</span>{\n    ...\n    <span class=\"hljs-keyword\">protected</span> <span class=\"hljs-variable\">$casts</span> = [\n        <span class=\"hljs-string\">'body'</span> =&gt; <span class=\"hljs-title class_\">CleanHtmlInput</span>::<span class=\"hljs-variable language_\">class</span>,\n    ];\n    ...\n}\n</code></pre>","children":[]}],"payload":{"lines":"3497,3498","fold":1}},{"content":"Réf.: <em><strong><a href=\"https://laravel.sillo.org/posts/mon-cms-les-commentaires-2-2\">https://laravel.sillo.org/posts/mon-cms-les-commentaires-2-2</a></strong></em>","children":[],"payload":{"lines":"3516,3517"}}],"payload":{"lines":"2715,2716","fold":1}},{"content":"- Le profil","children":[{"content":"Route du profil","children":[{"content":"<pre data-lines=\"3522,3525\"><code>- (Pensez que ce n'est que pour les \"autorisés\"\n→ **Middleware('auth')**) et comme il y aura d'autres routes\npour \"eux\", en faire un **group()**\n</code></pre>","children":[],"payload":{"lines":"3522,3525"}},{"content":"<pre><code class=\"language-php\"><span class=\"hljs-title class_\">Route</span>::<span class=\"hljs-title function_ invoke__\">middleware</span>(<span class=\"hljs-string\">'auth'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">group</span>(function () {\n    <span class=\"hljs-title class_\">Volt</span>::<span class=\"hljs-title function_ invoke__\">route</span>(<span class=\"hljs-string\">'/profile'</span>, <span class=\"hljs-string\">'auth.profile'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">name</span>(<span class=\"hljs-string\">'profile'</span>);\n});\n</code></pre>","children":[]}],"payload":{"lines":"3520,3521","fold":1}},{"content":"Liens dans les vues adhoc","children":[{"content":"<pre data-lines=\"3534,3535\"><code>- Pour les grands écrans, dans **navigation.navbar** :\n</code></pre>","children":[],"payload":{"lines":"3534,3535"}},{"content":"<pre><code class=\"language-bash\">@<span class=\"hljs-keyword\">if</span> (<span class=\"hljs-variable\">$user</span> = auth()-&gt;user())\n    &lt;x-dropdown&gt;\n        &lt;x-slot:trigger&gt;\n            &lt;x-button label=<span class=\"hljs-string\">\"{{ <span class=\"hljs-variable\">$user</span>-&gt;name }}\"</span> class=<span class=\"hljs-string\">\"btn-ghost\"</span> /&gt;\n        &lt;/x-slot:trigger&gt;\n        &lt;x-menu-item title=<span class=\"hljs-string\">\"{{ __('Profile') }}\"</span> <span class=\"hljs-built_in\">link</span>=<span class=\"hljs-string\">\"{{ route('profile') }}\"</span> /&gt;\n</code></pre>","children":[]},{"content":"<pre data-lines=\"3545,3546\"><code>- Pour les plus petits, dans **navigation.sidebar** :\n</code></pre>","children":[],"payload":{"lines":"3545,3546"}},{"content":"<pre><code class=\"language-bash\">@<span class=\"hljs-keyword\">if</span>(<span class=\"hljs-variable\">$user</span> = auth()-&gt;user())\n    &lt;x-menu-separator /&gt;\n        &lt;x-list-item :item=<span class=\"hljs-string\">\"<span class=\"hljs-variable\">$user</span>\"</span> value=<span class=\"hljs-string\">\"name\"</span> sub-value=<span class=\"hljs-string\">\"email\"</span> no-separator no-hover class=<span class=\"hljs-string\">\"-mx-2 !-my-2 rounded\"</span>&gt;\n            &lt;x-slot:actions&gt;\n                &lt;x-button icon=<span class=\"hljs-string\">\"o-power\"</span> wire:click=<span class=\"hljs-string\">\"logout\"</span> class=<span class=\"hljs-string\">\"btn-circle btn-ghost btn-xs\"</span> tooltip-left=<span class=\"hljs-string\">\"{{ __('Logout') }}\"</span> no-wire-navigate /&gt;\n            &lt;/x-slot:actions&gt;\n        &lt;/x-list-item&gt;\n        &lt;x-menu-item title=<span class=\"hljs-string\">\"{{ __('Profile') }}\"</span> icon=<span class=\"hljs-string\">\"o-user\"</span> <span class=\"hljs-built_in\">link</span>=<span class=\"hljs-string\">\"{{ route('profile') }}\"</span> /&gt;\n</code></pre>","children":[]}],"payload":{"lines":"3532,3533","fold":1}},{"content":"Composant Profile","children":[{"content":"<pre><code class=\"language-php\">php artisan make:volt auth/profile --<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span>\n</span></code></pre>","children":[]},{"content":"<pre><code class=\"language-php\">&lt;?php\nuse App\\Models\\User;\nuse Mary\\Traits\\Toast;\nuse Illuminate\\Support\\Str;\nuse Livewire\\Volt\\Component;\nuse Livewire\\Attributes\\Layout;\nuse Illuminate\\Validation\\Rule;\nuse Illuminate\\Support\\Facades\\{Auth, Hash};\n\nnew #[Title('Profile')] #[Layout('components.layouts.auth')]\nclass extends Component {\n    use Toast;\n\n    public User $user;\n    public string $email = '';\n    public string $password = '';\n    public string $password_confirmation = '';\n\n    public function mount(): void {\n        $this-&gt;user = Auth::user();\n        $this-&gt;email = $this-&gt;user-&gt;email;\n    }\n\n    public function save(): void {\n        $data = $this-&gt;validate([\n            'email' =&gt; ['required', 'email', Rule::unique('users')-&gt;ignore($this-&gt;user-&gt;id)],\n            'password' =&gt; 'confirmed',\n        ]);\n\n        if (!empty($data['password'])) {\n            $data['password'] = Hash::make($data['password']);\n        }\n\n        $this-&gt;user-&gt;update($data);\n        $this-&gt;success(__('Profile updated with success.'), redirectTo: '/profile');\n    }\n\n    public function deleteAccount(): void {\n        $this-&gt;user-&gt;delete();\n        $this-&gt;success(__('Account deleted with success.'), redirectTo: '/');\n    }\n\n    public function generatePassword($length = 16): void {\n        $this-&gt;password = Str::random($length);\n        $this-&gt;password_confirmation = $this-&gt;password;\n    }\n}; ?&gt;\n\n&lt;div&gt;\n    &lt;x-card class=\"flex items-center justify-center h-[96vh]\"&gt;\n\n        &lt;a href=\"/\" title=\"{{ __('Go on site') }}\"&gt;\n            &lt;x-card class=\"items-center py-0\" title=\"{{ __('Update profile') }}\" shadow separator\n                progress-indicator&gt;&lt;/x-card&gt;\n        &lt;/a&gt;\n\n        &lt;x-form wire:submit=\"save\"&gt;\n\n            &lt;x-avatar :image=\"Gravatar::get($user-&gt;email)\" class=\"!w-24\"&gt;\n                &lt;x-slot:title class=\"pl-2 text-xl\"&gt;\n                    {{ $user-&gt;name }}\n                &lt;/x-slot:title&gt;\n                &lt;x-slot:subtitle class=\"flex flex-col gap-1 pl-2 mt-2 text-gray-500\"&gt;\n                    &lt;x-icon name=\"o-hand-raised\" label=\"{!! __('Your name can\\'t be changed') !!}\" /&gt;\n                    &lt;a href=\"https://fr.gravatar.com/\" target=\"_blank\" title=\" {{ __('Go on Gravatar!') }} \"&gt;\n                        &lt;x-icon name=\"c-user\" label=\"{{ __('You can change your profile picture on Gravatar') }}\" /&gt;\n                    &lt;/a&gt;\n                &lt;/x-slot:subtitle&gt;\n            &lt;/x-avatar&gt;\n\n            &lt;x-input label=\"{{ __('E-mail') }}\" wire:model=\"email\" icon=\"o-envelope\" inline /&gt;&lt;hr&gt;\n            &lt;x-input label=\"{{ __('Password') }}\" wire:model=\"password\" icon=\"o-key\" inline /&gt;\n            &lt;x-input label=\"{{ __('Confirm Password') }}\" wire:model=\"password_confirmation\" icon=\"o-key\" inline /&gt;\n            &lt;x-button label=\"{{ __('Generate a secure password') }}\" wire:click=\"generatePassword()\" icon=\"m-wrench\"\n                class=\"btn-outline btn-sm\" /&gt;\n\n            &lt;x-slot:actions&gt;\n                &lt;x-button label=\"{{ __('Cancel') }}\" link=\"/\" class=\"btn-ghost\" title=\" {{ __('Return on site') }} \"/&gt;\n                &lt;x-button label=\"{{ __('Delete account') }}\" icon=\"c-hand-thumb-down\"\n                    wire:confirm=\"{{ __('Are you sure to delete your account?') }}\" wire:click=\"deleteAccount\"\n                    class=\"btn-warning\" /&gt;\n                &lt;x-button label=\"{{ __('Save') }}\" icon=\"o-paper-airplane\" spinner=\"save\" type=\"submit\"\n                    class=\"btn-primary\" /&gt;\n            &lt;/x-slot:actions&gt;\n\n        &lt;/x-form&gt;\n    &lt;/x-card&gt;\n&lt;/div&gt;\n</code></pre>","children":[]}],"payload":{"lines":"3558,3559","fold":1}},{"content":"Traductions pour Profile","children":[{"content":"<pre><code class=\"language-json\"><span class=\"hljs-attr\">\"Update profile\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Modifier le profil\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Your name can't be changed\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Votre nom ne peut pas être modifié\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"You can change your profile picture on Gravatar\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Vous pouvez changer votre image de profil sur Gravatar\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Go on Gravatar!\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Vous rendre sur Gravatar !\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Generate a secure password\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Créer un mot de passe sécurisé\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Profile updated with success.\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Profil mis à jour avec succès.\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Delete account\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Supprimer le compte\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Are you sure to delete your account?\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Êtes-vous sûr de vouloir supprimer votre compte ?\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Profile\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Profil\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Go on site\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Allez sur le site\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Return on site\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Retourner sur le site\"</span>\n</code></pre>","children":[]}],"payload":{"lines":"3655,3656","fold":1}},{"content":"Réf.: <em><strong><a href=\"https://laravel.sillo.org/posts/mon-cms-le-profil\">https://laravel.sillo.org/posts/mon-cms-le-profil</a></strong></em>","children":[],"payload":{"lines":"3671,3672"}}],"payload":{"lines":"3518,3519","fold":1}},{"content":"- Les favoris","children":[{"content":"Fonctionnalité des Favoris","children":[{"content":"Migration Favoris","children":[{"content":"<pre><code class=\"language-php\">php artisan make:migration create_favorites_table\n</code></pre>","children":[]},{"content":"<pre><code class=\"language-php\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">up</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">void</span> </span>{\n    <span class=\"hljs-title class_\">Schema</span>::<span class=\"hljs-title function_ invoke__\">create</span>(<span class=\"hljs-string\">'favorites'</span>, function (Blueprint <span class=\"hljs-variable\">$table</span>) {\n        <span class=\"hljs-variable\">$table</span>-&gt;<span class=\"hljs-title function_ invoke__\">id</span>();\n        <span class=\"hljs-variable\">$table</span>-&gt;<span class=\"hljs-title function_ invoke__\">foreignId</span>(<span class=\"hljs-string\">'post_id'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">constrained</span>()-&gt;<span class=\"hljs-title function_ invoke__\">onDelete</span>(<span class=\"hljs-string\">'cascade'</span>);\n        <span class=\"hljs-variable\">$table</span>-&gt;<span class=\"hljs-title function_ invoke__\">foreignId</span>(<span class=\"hljs-string\">'user_id'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">constrained</span>()-&gt;<span class=\"hljs-title function_ invoke__\">onDelete</span>(<span class=\"hljs-string\">'cascade'</span>);\n    });\n}\n</code></pre>","children":[]},{"content":"<pre><code class=\"language-php\">php artisan migrate\n</code></pre>","children":[]}],"payload":{"lines":"3677,3678","fold":1}},{"content":"Relation n:n (User &amp; Post)","children":[{"content":"<pre data-lines=\"3699,3705\"><code>À noter :\nComme la convention de nommage de table pivot est non respectée\n(Devrait être 'posts_users' mais est 'favorites'), on doit\npréciser ce nom dans les relations BelongsToMany\n\nModels/User.php :\n</code></pre>","children":[],"payload":{"lines":"3699,3705"}},{"content":"<pre><code class=\"language-php\"><span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Database</span>\\<span class=\"hljs-title\">Eloquent</span>\\<span class=\"hljs-title\">Relations</span>\\{ <span class=\"hljs-title\">HasMany</span>, <span class=\"hljs-title\">BelongsToMany</span> };\n...\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">favoritePosts</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">BelongsToMany</span> </span>{\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">belongsToMany</span>(<span class=\"hljs-title class_\">Post</span>::<span class=\"hljs-variable language_\">class</span>, <span class=\"hljs-string\">'favorites'</span>);\n}\n</code></pre>","children":[]},{"content":"<pre data-lines=\"3714,3715\"><code>Models/Post.php :\n</code></pre>","children":[],"payload":{"lines":"3714,3715"}},{"content":"<pre><code class=\"language-php\"><span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Database</span>\\<span class=\"hljs-title\">Eloquent</span>\\<span class=\"hljs-title\">Relations</span>\\{ <span class=\"hljs-title\">HasMany</span>, <span class=\"hljs-title\">BelongsTo</span>, <span class=\"hljs-title\">BelongsToMany</span> };\n...\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">favoritedByUsers</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">BelongsToMany</span> </span>{\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">belongsToMany</span>(<span class=\"hljs-title class_\">User</span>::<span class=\"hljs-variable language_\">class</span>, <span class=\"hljs-string\">'favorites'</span>);\n}\n</code></pre>","children":[]}],"payload":{"lines":"3697,3698","fold":1}},{"content":"PostRepository: getPostBySlug()","children":[{"content":"<pre data-lines=\"3726,3727\"><code>Vérifier en plus si l'user a mis le post en favori :\n</code></pre>","children":[],"payload":{"lines":"3726,3727"}},{"content":"<pre><code class=\"language-php\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">getPostBySlug</span>(<span class=\"hljs-params\"><span class=\"hljs-keyword\">string</span> <span class=\"hljs-variable\">$slug</span></span>): <span class=\"hljs-title\">Post</span> </span>{\n    <span class=\"hljs-variable\">$userId</span> = <span class=\"hljs-title function_ invoke__\">auth</span>()-&gt;<span class=\"hljs-title function_ invoke__\">id</span>();\n  \n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title class_\">Post</span>::<span class=\"hljs-title function_ invoke__\">with</span>(<span class=\"hljs-string\">'user:id,name'</span>, <span class=\"hljs-string\">'category'</span>)\n        -&gt;<span class=\"hljs-title function_ invoke__\">withCount</span>(<span class=\"hljs-string\">'validComments'</span>)\n        -&gt;<span class=\"hljs-title function_ invoke__\">withExists</span>([\n            <span class=\"hljs-string\">'favoritedByUsers as is_favorited'</span> =&gt; function (<span class=\"hljs-variable\">$query</span>) <span class=\"hljs-keyword\">use</span> ($<span class=\"hljs-title\">userId</span>) {\n                $<span class=\"hljs-title\">query</span>-&gt;<span class=\"hljs-title\">where</span>('<span class=\"hljs-title\">user_id</span>', $<span class=\"hljs-title\">userId</span>);\n            },\n      ])\n      -&gt;<span class=\"hljs-title function_ invoke__\">where</span>(<span class=\"hljs-string\">'slug'</span>, <span class=\"hljs-variable\">$slug</span>)-&gt;<span class=\"hljs-title function_ invoke__\">firstOrFail</span>();\n}\n</code></pre>","children":[]}],"payload":{"lines":"3724,3725","fold":1}},{"content":"Route Favoris","children":[{"content":"<pre><code class=\"language-php\"><span class=\"hljs-title class_\">Route</span>::<span class=\"hljs-title function_ invoke__\">middleware</span>(<span class=\"hljs-string\">'auth'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">group</span>(function () {\n    ...\n    <span class=\"hljs-title class_\">Volt</span>::<span class=\"hljs-title function_ invoke__\">route</span>(<span class=\"hljs-string\">'/favorites'</span>, <span class=\"hljs-string\">'index'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">name</span>(<span class=\"hljs-string\">'posts.favorites'</span>);\n});\n</code></pre>","children":[]}],"payload":{"lines":"3743,3744","fold":1}},{"content":"Lien Favoris dans posts.show","children":[{"content":"<pre data-lines=\"3754,3757\"><code>On affiche l'icône étoile pour mettre en favoris\n\nou retirer l'article des favoris :\n</code></pre>","children":[],"payload":{"lines":"3754,3757"}},{"content":"<pre><code class=\"language-php\">public function favoritePost(): void {\n    $user = auth()-&gt;user();\n\n    if ($user) {\n        $user-&gt;favoritePosts()-&gt;attach($this-&gt;post-&gt;id);\n        $this-&gt;post-&gt;is_favorited = true;\n    }\n}\n\npublic function unfavoritePost(): void {\n    $user = auth()-&gt;user();\n\n    if ($user) {\n        $user-&gt;favoritePosts()-&gt;detach($this-&gt;post-&gt;id);\n        $this-&gt;post-&gt;is_favorited = false;\n    }\n}\n...\n&lt;div id=\"top\" class=\"flex justify-end gap-4\"&gt;\n    @auth\n        &lt;x-popover&gt;\n            &lt;x-slot:trigger&gt;\n                @if ($post-&gt;is_favorited)\n                    &lt;x-button icon=\"s-star\" wire:click=\"unfavoritePost\" spinner\n                        class=\"text-yellow-500 btn-ghost btn-sm\" /&gt;\n                @else\n                    &lt;x-button icon=\"s-star\" wire:click=\"favoritePost\" spinner class=\"btn-ghost btn-sm\" /&gt;\n                @endif\n            &lt;/x-slot:trigger&gt;\n            &lt;x-slot:content class=\"pop-small\"&gt;\n                @if ($post-&gt;is_favorited)\n                    @lang('Remove from favorites')\n                @else\n                    @lang('Bookmark this post')\n                @endif\n            &lt;/x-slot:content&gt;\n        &lt;/x-popover&gt;\n    @endauth\n    ...\n&lt;/div&gt;\n</code></pre>","children":[]},{"content":"<pre><code class=\"language-php\"><span class=\"hljs-string\">\"Bookmark this post\"</span>: <span class=\"hljs-string\">\"Marquer cet article dans vos favoris\"</span>,\n<span class=\"hljs-string\">\"Remove from favorites\"</span>: <span class=\"hljs-string\">\"Supprimer de vos favoris\"</span>\n</code></pre>","children":[]}],"payload":{"lines":"3752,3753","fold":1}},{"content":"PostRepository pour \"is_favorited\"","children":[{"content":"<pre data-lines=\"3808,3809\"><code>Si connecté, trouver ses articles favoris :\n</code></pre>","children":[],"payload":{"lines":"3808,3809"}},{"content":"<pre><code class=\"language-php\"><span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Support</span>\\<span class=\"hljs-title\">Facades</span>\\<span class=\"hljs-title\">DB</span>;\n...\n<span class=\"hljs-keyword\">protected</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">getBaseQuery</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">Builder</span> </span>{\n\t...\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title class_\">Post</span>::<span class=\"hljs-title function_ invoke__\">select</span>(<span class=\"hljs-string\">'id'</span>, <span class=\"hljs-string\">'slug'</span>, <span class=\"hljs-string\">'image'</span>, <span class=\"hljs-string\">'title'</span>, <span class=\"hljs-string\">'user_id'</span>, <span class=\"hljs-string\">'category_id'</span>, <span class=\"hljs-string\">'created_at'</span>, <span class=\"hljs-string\">'pinned'</span>)\n    ...\n    -&gt;<span class=\"hljs-title function_ invoke__\">when</span>(<span class=\"hljs-title function_ invoke__\">auth</span>()-&gt;<span class=\"hljs-title function_ invoke__\">check</span>(), function (<span class=\"hljs-variable\">$query</span>) {\n        <span class=\"hljs-variable\">$userId</span> = <span class=\"hljs-title function_ invoke__\">auth</span>()-&gt;<span class=\"hljs-title function_ invoke__\">id</span>();\n        <span class=\"hljs-variable\">$query</span>-&gt;<span class=\"hljs-title function_ invoke__\">addSelect</span>([\n            <span class=\"hljs-string\">'is_favorited'</span> =&gt; DB::<span class=\"hljs-title function_ invoke__\">table</span>(<span class=\"hljs-string\">'favorites'</span>)\n                -&gt;<span class=\"hljs-title function_ invoke__\">selectRaw</span>(<span class=\"hljs-string\">'1'</span>)\n                -&gt;<span class=\"hljs-title function_ invoke__\">whereColumn</span>(<span class=\"hljs-string\">'post_id'</span>, <span class=\"hljs-string\">'posts.id'</span>)\n                -&gt;<span class=\"hljs-title function_ invoke__\">where</span>(<span class=\"hljs-string\">'user_id'</span>, <span class=\"hljs-variable\">$userId</span>)\n                -&gt;<span class=\"hljs-title function_ invoke__\">limit</span>(<span class=\"hljs-number\">1</span>)\n        ]);\n    });\n}\n</code></pre>","children":[]}],"payload":{"lines":"3806,3807","fold":1}},{"content":"Page d'accueil (Homepage)","children":[{"content":"<pre><code class=\"language-php\">&lt;x-slot:menu&gt;\n    @if ($post-&gt;pinned)\n        &lt;x-badge value=\"{{ __('Pinned') }}\" class=\"p-3 badge-warning\" /&gt;\n    @endif\n    @auth\n        @if ($post-&gt;is_favorited)\n            &lt;x-icon name=\"s-star\" class=\"w-6 h-6 text-yellow-500 cursor-pointer\" /&gt;\n        @endif\n    @endauth\n&lt;/x-slot:menu&gt;\n</code></pre>","children":[]}],"payload":{"lines":"3830,3831","fold":1}},{"content":"Ajout de getFavoritePosts() dans PostRepository","children":[{"content":"<pre><code class=\"language-php\"><span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">App</span>\\<span class=\"hljs-title\">Models</span>\\{<span class=\"hljs-title\">Category</span>, <span class=\"hljs-title\">Post</span>, <span class=\"hljs-title\">User</span>};\n...\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">getFavoritePosts</span>(<span class=\"hljs-params\">User <span class=\"hljs-variable\">$user</span></span>): <span class=\"hljs-title\">LengthAwarePaginator</span> </span>{\n\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">getBaseQuery</span>()\n        -&gt;<span class=\"hljs-title function_ invoke__\">whereHas</span>(<span class=\"hljs-string\">'favoritedByUsers'</span>, function (Builder <span class=\"hljs-variable\">$query</span>) {\n            <span class=\"hljs-variable\">$query</span>-&gt;<span class=\"hljs-title function_ invoke__\">where</span>(<span class=\"hljs-string\">'user_id'</span>, <span class=\"hljs-title function_ invoke__\">auth</span>()-&gt;<span class=\"hljs-title function_ invoke__\">id</span>());\n        })\n        -&gt;<span class=\"hljs-title function_ invoke__\">latest</span>()\n      -&gt;<span class=\"hljs-title function_ invoke__\">paginate</span>(<span class=\"hljs-title function_ invoke__\">config</span>(<span class=\"hljs-string\">'app.pagination'</span>));\n}\n</code></pre>","children":[]},{"content":"<pre data-lines=\"3861,3862\"><code>Ajout du bouton dans navigation/navbar :\n</code></pre>","children":[],"payload":{"lines":"3861,3862"}},{"content":"<pre><code class=\"language-php\">        ...\n        @auth\n            @if ($user-&gt;favoritePosts()-&gt;exists())\n                &lt;a title=\"{{ __('Your favorites posts') }}\" href=\"{{ route('posts.favorites') }}\"&gt;&lt;x-icon name=\"s-star\"\n                        class=\"w-7 h-7\" /&gt;&lt;/a&gt;\n            @endif\n        @endauth\n        &lt;x-theme-toggle title=\"{{ __('Toggle theme') }}\" class=\"w-4 h-8\" /&gt;\n        &lt;livewire:search /&gt;\n    &lt;/x-slot:actions&gt;\n&lt;/x-nav&gt;\n</code></pre>","children":[]}],"payload":{"lines":"3845,3846","fold":1}},{"content":"Afficher la page Favoris","children":[{"content":"<pre data-lines=\"3881,3885\"><code>- On défini une nouvelle propriété $favorites\n- mount() : On gère le cas où la requête est \"/favorites\" (On met la propriété favorites à true)\n- getPosts() : Si la propriété favorites est à true, on appelle getFavoritePosts(auth()-&gt;user()) \n- Pour le HTML, on adapte alors le titre de la page :\n</code></pre>","children":[],"payload":{"lines":"3881,3885"}},{"content":"<pre><code class=\"language-php\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">bool</span> <span class=\"hljs-variable\">$favorites</span>     = <span class=\"hljs-literal\">false</span>;\n\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">mount</span>(<span class=\"hljs-params\"><span class=\"hljs-keyword\">string</span> <span class=\"hljs-variable\">$slug</span> = <span class=\"hljs-string\">''</span>, <span class=\"hljs-keyword\">string</span> <span class=\"hljs-variable\">$param</span> = <span class=\"hljs-string\">''</span></span>): <span class=\"hljs-title\">void</span> </span>{\n    <span class=\"hljs-variable language_\">$this</span>-&gt;param = <span class=\"hljs-variable\">$param</span>;\n  \n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title function_ invoke__\">request</span>()-&gt;<span class=\"hljs-title function_ invoke__\">is</span>(<span class=\"hljs-string\">'category/*'</span>)) {\n        <span class=\"hljs-variable language_\">$this</span>-&gt;category = <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">getCategoryBySlug</span>(<span class=\"hljs-variable\">$slug</span>);\n    } <span class=\"hljs-keyword\">elseif</span> (<span class=\"hljs-title function_ invoke__\">request</span>()-&gt;<span class=\"hljs-title function_ invoke__\">is</span>(<span class=\"hljs-string\">'favorites'</span>)) {\n        <span class=\"hljs-variable language_\">$this</span>-&gt;favorites = <span class=\"hljs-literal\">true</span>;\n    }\n}\n...\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">getPosts</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">LengthAwarePaginator</span> </span>{\n    ...\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-variable language_\">$this</span>-&gt;favorites) {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable\">$postRepository</span>-&gt;<span class=\"hljs-title function_ invoke__\">getFavoritePosts</span>(<span class=\"hljs-title function_ invoke__\">auth</span>()-&gt;<span class=\"hljs-title function_ invoke__\">user</span>());\n    }     \n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable\">$postRepository</span>-&gt;<span class=\"hljs-title function_ invoke__\">getPostsPaginate</span>(<span class=\"hljs-variable\">$this</span>-&gt;category);\n}\n...\n@<span class=\"hljs-keyword\">if</span> (<span class=\"hljs-variable\">$category</span>)\n    &lt;x-header title=<span class=\"hljs-string\">\"{{ __('Posts for category ') }} {{ <span class=\"hljs-subst\">$category</span>-&gt;title }}\"</span> size=<span class=\"hljs-string\">\"text-2xl sm:text-3xl md:text-4xl\"</span> /&gt;\n@<span class=\"hljs-keyword\">elseif</span>(<span class=\"hljs-variable\">$param</span> !== <span class=\"hljs-string\">''</span>)\n    &lt;x-header title=<span class=\"hljs-string\">\"{{ __('Posts for search ') }} '{{ <span class=\"hljs-subst\">$param</span> }}'\"</span> size=<span class=\"hljs-string\">\"text-2xl sm:text-3xl md:text-4xl\"</span> /&gt;\n@<span class=\"hljs-keyword\">elseif</span>(<span class=\"hljs-variable\">$favorites</span>)\n    &lt;x-header title=<span class=\"hljs-string\">\"{{ __('Your favorites posts') }}\"</span> size=<span class=\"hljs-string\">\"text-2xl sm:text-3xl md:text-4xl\"</span> /&gt;\n@<span class=\"hljs-keyword\">endif</span>\n</code></pre>","children":[]},{"content":"<pre><code class=\"language-php\"><span class=\"hljs-string\">\"Your favorites posts\"</span>: <span class=\"hljs-string\">\"Vos articles favoris\"</span>,\n<span class=\"hljs-string\">\"Toggle theme\"</span>: <span class=\"hljs-string\">\"Basculer le thème\"</span>,\n</code></pre>","children":[]}],"payload":{"lines":"3877,3878","fold":1}}],"payload":{"lines":"3675,3676","fold":1}},{"content":"Boutons pour scroller (Aller en bas et en haut)","children":[{"content":"<pre data-lines=\"3923,3924\"><code>resources/css/app.css :\n</code></pre>","children":[],"payload":{"lines":"3923,3924"}},{"content":"<pre><code class=\"language-php\">html {\n    scroll-behavior: smooth;\n}\n</code></pre>","children":[]},{"content":"<pre data-lines=\"3931,3932\"><code>posts.show :\n</code></pre>","children":[],"payload":{"lines":"3931,3932"}},{"content":"<pre><code class=\"language-php\">      ...\n\n    &lt;div id=\"top\" class=\"flex justify-end gap-4\"&gt;\n\n        .... (Nouveau x-popover :)\n\n        &lt;x-popover&gt;\n            &lt;x-slot:trigger&gt;\n                &lt;a href=\"#bottom\"&gt;&lt;x-icon name=\"c-arrow-long-down\" /&gt;&lt;/a&gt;\n            &lt;/x-slot:trigger&gt;\n            &lt;x-slot:content class=\"pop-small\"&gt;\n                @lang('To bottom')\n            &lt;/x-slot:content&gt;\n        &lt;/x-popover&gt;\n    &lt;/div&gt;\n\n    ... (Nouveau div :)\n\n    &lt;div id=\"bottom\" class=\"relative flex justify-end w-full py-5 mx-auto md:px-12 max-w-7xl\"&gt;\n        ...\n        &lt;x-popover&gt;\n            &lt;x-slot:trigger&gt;\n                &lt;a href=\"#top\"&gt;&lt;x-icon name=\"c-arrow-long-up\" /&gt;\n            &lt;/x-slot:trigger&gt;\n            &lt;x-slot:content class=\"pop-small\"&gt;\n                @lang('To up')\n            &lt;/x-slot:content&gt;\n        &lt;/x-popover&gt;\n    &lt;/div&gt;\n\n&lt;/div&gt;\n</code></pre>","children":[]},{"content":"<pre><code class=\"language-php\"><span class=\"hljs-string\">\"To up\"</span>: <span class=\"hljs-string\">\"Vers le haut\"</span>,\n<span class=\"hljs-string\">\"To bottom\"</span>: <span class=\"hljs-string\">\"Vers le bas\"</span>\n</code></pre>","children":[]}],"payload":{"lines":"3921,3922","fold":1}},{"content":"Réf.: <em><strong><a href=\"https://laravel.sillo.org/posts/mon-cms-les-favoris\">https://laravel.sillo.org/posts/mon-cms-les-favoris</a></strong></em>","children":[],"payload":{"lines":"3971,3972"}}],"payload":{"lines":"3673,3674","fold":1}},{"content":"&nbsp;<strong>II &nbsp;/ &nbsp; B A C K &nbsp;- &nbsp;O F F I C E &nbsp;:</strong>","children":[],"payload":{"lines":"3973,3974"}},{"content":"- L'administration","children":[{"content":"Gestion des rôles","children":[{"content":"Model User : Admin ou Redac","children":[{"content":"<pre><code class=\"language-php\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">isAdmin</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">bool</span> </span>{\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">'admin'</span> === <span class=\"hljs-variable language_\">$this</span>-&gt;role;\n}\n\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">isRedac</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">bool</span> </span>{\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">'redac'</span> === <span class=\"hljs-variable language_\">$this</span>-&gt;role;\n}\n\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">isAdminOrRedac</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">bool</span> </span>{\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">'admin'</span> === <span class=\"hljs-variable language_\">$this</span>-&gt;role || <span class=\"hljs-string\">'redac'</span> === <span class=\"hljs-variable language_\">$this</span>-&gt;role;\n}\n</code></pre>","children":[]}],"payload":{"lines":"3979,3980","fold":1}},{"content":"Middlewares","children":[{"content":"<strong>admin</strong>","children":[{"content":"<pre><code class=\"language-php\">php artisan make:middleware IsAdmin\n</code></pre>","children":[]},{"content":"<pre><code class=\"language-php\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">handle</span>(<span class=\"hljs-params\">Request <span class=\"hljs-variable\">$request</span>, <span class=\"hljs-built_in\">Closure</span> <span class=\"hljs-variable\">$next</span></span>): <span class=\"hljs-title\">Response</span>\n</span>{\n    <span class=\"hljs-keyword\">if</span> (!<span class=\"hljs-title function_ invoke__\">auth</span>()-&gt;<span class=\"hljs-title function_ invoke__\">user</span>()-&gt;<span class=\"hljs-title function_ invoke__\">isAdmin</span>()) {\n        <span class=\"hljs-title function_ invoke__\">abort</span>(<span class=\"hljs-number\">403</span>);\n    }\n  \n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable\">$next</span>(<span class=\"hljs-variable\">$request</span>);\n}\n</code></pre>","children":[]}],"payload":{"lines":"3997,3998"}},{"content":"<strong>adminOrRedac</strong>","children":[{"content":"<pre><code class=\"language-php\">php artisan make:middleware IsAdminOrRedac\n</code></pre>","children":[]},{"content":"<pre><code class=\"language-php\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">handle</span>(<span class=\"hljs-params\">Request <span class=\"hljs-variable\">$request</span>, <span class=\"hljs-built_in\">Closure</span> <span class=\"hljs-variable\">$next</span></span>): <span class=\"hljs-title\">Response</span>\n</span>{\n    <span class=\"hljs-keyword\">if</span> (!<span class=\"hljs-title function_ invoke__\">auth</span>()-&gt;<span class=\"hljs-title function_ invoke__\">user</span>()-&gt;<span class=\"hljs-title function_ invoke__\">isAdmin</span>() &amp;&amp; !<span class=\"hljs-title function_ invoke__\">auth</span>()-&gt;<span class=\"hljs-title function_ invoke__\">user</span>()-&gt;<span class=\"hljs-title function_ invoke__\">isRedac</span>()) {\n        <span class=\"hljs-title function_ invoke__\">abort</span>(<span class=\"hljs-number\">403</span>);\n    }\n  \n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable\">$next</span>(<span class=\"hljs-variable\">$request</span>);\n}\n</code></pre>","children":[]}],"payload":{"lines":"4014,4015"}}],"payload":{"lines":"3995,3996","fold":1}}],"payload":{"lines":"3977,3978"}},{"content":"Tableau de Bord","children":[{"content":"Route","children":[{"content":"<pre><code class=\"language-php\"><span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">App</span>\\<span class=\"hljs-title\">Http</span>\\<span class=\"hljs-title\">Middleware</span>\\<span class=\"hljs-title\">IsAdminOrRedac</span>;\n...\n<span class=\"hljs-title class_\">Route</span>::<span class=\"hljs-title function_ invoke__\">middleware</span>(<span class=\"hljs-string\">'auth'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">group</span>(function () {\n    ...\n    <span class=\"hljs-title class_\">Route</span>::<span class=\"hljs-title function_ invoke__\">middleware</span>(<span class=\"hljs-title class_\">IsAdminOrRedac</span>::<span class=\"hljs-variable language_\">class</span>)-&gt;<span class=\"hljs-title function_ invoke__\">prefix</span>(<span class=\"hljs-string\">'admin'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">group</span>(function () {\n        <span class=\"hljs-title class_\">Volt</span>::<span class=\"hljs-title function_ invoke__\">route</span>(<span class=\"hljs-string\">'/'</span>, <span class=\"hljs-string\">'admin.index'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">name</span>(<span class=\"hljs-string\">'admin.root'</span>);        \n        <span class=\"hljs-title class_\">Volt</span>::<span class=\"hljs-title function_ invoke__\">route</span>(<span class=\"hljs-string\">'/dashboard'</span>, <span class=\"hljs-string\">'admin.index'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">name</span>(<span class=\"hljs-string\">'admin'</span>);\n\n    });\n});\n</code></pre>","children":[]}],"payload":{"lines":"4033,4034","fold":1}},{"content":"SideBar","children":[{"content":"Création Sidebar de l'admin","children":[{"content":"<pre><code class=\"language-php\">php artisan make:volt admin/sidebar --<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span>\n</span></code></pre>","children":[]},{"content":"<pre><code class=\"language-php\">&lt;?php\n\nuse Illuminate\\Support\\Facades\\{Auth, Session};\nuse Livewire\\Volt\\Component;\n\nnew class() extends Component {\n  public function logout(): void {\n    Auth::guard('web')-&gt;logout();\n  \n    Session::invalidate();\n    Session::regenerateToken();\n  \n    $this-&gt;redirect('/');\n  }\n}; ?&gt;\n\n&lt;div&gt;\n    &lt;x-menu activate-by-route&gt;\n        &lt;x-menu-separator /&gt;\n        &lt;x-list-item :item=\"Auth::user()\" value=\"name\" sub-value=\"email\" no-separator no-hover class=\"-mx-2 !-my-2 rounded\"&gt;\n            &lt;x-slot:actions&gt;\n                &lt;x-button icon=\"o-power\" wire:click=\"logout\" class=\"btn-circle btn-ghost btn-xs\"\n                    tooltip-left=\"{{ __('Logout') }}\" no-wire-navigate /&gt;\n            &lt;/x-slot:actions&gt;\n        &lt;/x-list-item&gt;\n        &lt;x-menu-separator /&gt;\n        &lt;x-menu-item title=\"{{ __('Dashboard') }}\" icon=\"s-building-office-2\" link=\"{{ route('admin') }}\" /&gt;      \n        &lt;x-menu-item icon=\"m-arrow-right-end-on-rectangle\" title=\"{{ __('Go on site') }}\" link=\"/\" /&gt;\n        &lt;x-menu-item&gt;\n            &lt;x-theme-toggle /&gt;\n        &lt;/x-menu-item&gt;\n    &lt;/x-menu&gt;\n&lt;/div&gt;\n</code></pre>","children":[]}],"payload":{"lines":"4050,4051"}},{"content":"À la fin du mémo complet, vous devrez obtenir cet <a href=\"https://prnt.sc/n_CyeC0MgHlB\">aspect du menu admin</a>","children":[],"payload":{"lines":"4092,4093"}}],"payload":{"lines":"4048,4049","fold":1}},{"content":"Layout","children":[{"content":"<pre data-lines=\"4096,4097\"><code>Créer views/layouts/admin.blade.php :\n</code></pre>","children":[],"payload":{"lines":"4096,4097"}},{"content":"<pre><code class=\"language-php\">&lt;!DOCTYPE html&gt;\n&lt;html lang=\"{{ str_replace('_', '-', app()-&gt;getLocale()) }}\"&gt;\n\n&lt;head&gt;\n    &lt;meta charset=\"utf-8\"&gt;\n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, viewport-fit=cover\"&gt;\n    &lt;meta name=\"csrf-token\" content=\"{{ csrf_token() }}\"&gt;\n    &lt;title&gt;{{ isset($title) ? $title . ' | ' . config('app.name') : config('app.name') }}&lt;/title&gt;\n\n    @vite(['resources/css/app.css', 'resources/js/app.js'])\n&lt;/head&gt;\n\n&lt;body class=\"min-h-screen font-sans antialiased bg-base-200/50 dark:bg-base-200\"&gt;\n\n    {{-- MAIN --}}\n    &lt;x-main full-width&gt;\n\n        {{-- SIDEBAR --}}\n        &lt;x-slot:sidebar drawer=\"main-drawer\" collapsible class=\"bg-base-100\"&gt;\n            &lt;livewire:admin.sidebar /&gt;\n        &lt;/x-slot:sidebar&gt;\n\n        &lt;x-slot:content&gt;\n            &lt;!-- Drawer toggle for \"main-drawer\" --&gt;\n            &lt;label for=\"main-drawer\" class=\"mr-3 lg:hidden\"&gt;\n                &lt;x-icon name=\"o-bars-3\" class=\"cursor-pointer\" /&gt;\n            &lt;/label&gt;\n            {{ $slot }}\n        &lt;/x-slot:content&gt;\n\n    &lt;/x-main&gt;\n\n    {{--  TOAST area --}}\n    &lt;x-toast /&gt;\n\n&lt;/body&gt;\n\n&lt;/html&gt;\n</code></pre>","children":[]}],"payload":{"lines":"4094,4095","fold":1}},{"content":"Composant","children":[{"content":"<pre><code class=\"language-php\">php artisan make:volt admin/index --<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span>\n</span></code></pre>","children":[]},{"content":"<pre><code class=\"language-php\">&lt;?php\nuse App\\Models\\{Comment, Page, Post, User};\nuse Illuminate\\Database\\Eloquent\\Builder;\nuse Illuminate\\Support\\Facades\\Auth;\nuse Livewire\\Attributes\\{Layout, Title};\nuse Livewire\\Volt\\Component;\nuse Mary\\Traits\\Toast;\n\nnew #[Title('Dashboard')] #[Layout('components.layouts.admin')] class extends Component {\n    use Toast;\n  \n    public array $headersPosts;\n    public bool $openGlance = true;\n  \n    public function mount(): void {\n        $this-&gt;headersPosts = [['key' =&gt; 'date', 'label' =&gt; __('Date')], ['key' =&gt; 'title', 'label' =&gt; __('Title')]];\n    }\n  \n    public function deleteComment(Comment $comment): void {\n        $comment-&gt;delete();\n  \n        $this-&gt;warning('Comment deleted', __('Good bye!'), position: 'toast-bottom');\n    }\n  \n    public function with(): array {\n        $user    = Auth::user();\n        $isRedac = $user-&gt;isRedac();\n        $userId  = $user-&gt;id;\n  \n        return [\n            'pages'          =&gt; Page::select('id', 'title', 'slug')-&gt;get(),\n            'posts'          =&gt; Post::select('id', 'title', 'slug', 'user_id', 'created_at', 'updated_at')-&gt;when($isRedac, fn (Builder $q) =&gt; $q-&gt;where('user_id', $userId))-&gt;latest()-&gt;get(),\n            'commentsNumber' =&gt; Comment::when($isRedac, fn (Builder $q) =&gt; $q-&gt;whereRelation('post', 'user_id', $userId))-&gt;count(),\n            'comments'       =&gt; Comment::with('user', 'post:id,title,slug')-&gt;when($isRedac, fn (Builder $q) =&gt; $q-&gt;whereRelation('post', 'user_id', $userId))-&gt;latest()-&gt;take(5)-&gt;get(),\n            'users'          =&gt; User::count(),\n        ];\n    }\n}; ?&gt;\n\n&lt;div&gt;\n    &lt;x-collapse wire:model=\"openGlance\" class=\"shadow-md\"&gt;\n        &lt;x-slot:heading&gt;\n            @lang('In a glance')\n        &lt;/x-slot:heading&gt;\n        &lt;x-slot:content class=\"flex flex-wrap gap-4\"&gt;\n\n            &lt;a href=\"#\" class=\"flex-grow\"&gt;\n                &lt;x-stat title=\"{{ __('Posts') }}\" description=\"\" value=\"{{ $posts-&gt;count() }}\" icon=\"s-document-text\"\n                    class=\"shadow-hover\" /&gt;\n            &lt;/a&gt;\n\n            @if (Auth::user()-&gt;isAdmin())\n                &lt;a href=\"#\" class=\"flex-grow\"&gt;\n                    &lt;x-stat title=\"{{ __('Pages') }}\" value=\"{{ $pages-&gt;count() }}\" icon=\"s-document\"\n                        class=\"shadow-hover\" /&gt;\n                &lt;/a&gt;\n                &lt;a href=\"#\" class=\"flex-grow\"&gt;\n                    &lt;x-stat title=\"{{ __('Users') }}\" value=\"{{ $users }}\" icon=\"s-user\"\n                        class=\"shadow-hover\" /&gt;\n                &lt;/a&gt;\n            @endif\n            &lt;a href=\"#\" class=\"flex-grow\"&gt;\n                &lt;x-stat title=\"{{ __('Comments') }}\" value=\"{{ $commentsNumber }}\" icon=\"c-chat-bubble-left\"\n                    class=\"shadow-hover\" /&gt;\n            &lt;/a&gt;\n        &lt;/x-slot:content&gt;\n    &lt;/x-collapse&gt;\n\n    &lt;br&gt;\n\n    @foreach ($comments as $comment)\n        @if (!$comment-&gt;user-&gt;valid)\n            &lt;x-alert title=\"{!! __('Comment to valid from ') . $comment-&gt;user-&gt;name !!}\" description=\"{!! $comment-&gt;body !!}\" icon=\"c-chat-bubble-left\"\n                class=\"shadow-md alert-warning\"&gt;\n                &lt;x-slot:actions&gt;\n                    &lt;x-button link=\"#\" label=\"{!! __('Show the comments') !!}\" /&gt;\n                &lt;/x-slot:actions&gt;\n            &lt;/x-alert&gt;\n            &lt;br&gt;\n        @endif\n    @endforeach\n\n    &lt;x-collapse class=\"shadow-md\"&gt;\n        &lt;x-slot:heading&gt;\n            @lang('Recent posts')\n        &lt;/x-slot:heading&gt;\n        &lt;x-slot:content&gt;\n            &lt;x-table :headers=\"$headersPosts\" :rows=\"$posts-&gt;take(5)\" striped&gt;\n                @scope('cell_date', $post)\n                    @lang('Created') {{ $post-&gt;created_at-&gt;diffForHumans() }}\n                    @if ($post-&gt;updated_at != $post-&gt;created_at)\n                        &lt;br&gt;\n                        @lang('Updated') {{ $post-&gt;updated_at-&gt;diffForHumans() }}\n                    @endif\n                @endscope\n                @scope('actions', $post)\n                    &lt;x-popover&gt;\n                        &lt;x-slot:trigger&gt;\n                            &lt;x-button icon=\"s-document-text\" link=\"{{ route('posts.show', $post-&gt;slug) }}\" spinner class=\"btn-ghost btn-sm\" /&gt;                          \n                        &lt;/x-slot:trigger&gt;\n                        &lt;x-slot:content class=\"pop-small\"&gt;\n                            @lang('Show post')\n                        &lt;/x-slot:content&gt;\n                    &lt;/x-popover&gt;\n                @endscope\n            &lt;/x-table&gt;\n        &lt;/x-slot:content&gt;\n    &lt;/x-collapse&gt;\n\n    &lt;br&gt;\n\n    &lt;x-collapse class=\"shadow-md\"&gt;\n        &lt;x-slot:heading&gt;\n            @lang('Recent Comments')\n        &lt;/x-slot:heading&gt;\n        &lt;x-slot:content&gt;\n            @foreach ($comments as $comment)\n                &lt;x-list-item :item=\"$comment\" no-separator no-hover&gt;\n                    &lt;x-slot:avatar&gt;\n                        &lt;x-avatar :image=\"Gravatar::get($comment-&gt;user-&gt;email)\"&gt;\n                            &lt;x-slot:title&gt;\n                                {{ $comment-&gt;user-&gt;name }}\n                            &lt;/x-slot:title&gt;\n                        &lt;/x-avatar&gt;\n                    &lt;/x-slot:avatar&gt;\n                    &lt;x-slot:value&gt;\n                        @lang ('in post:') {{ $comment-&gt;post-&gt;title }}\n                    &lt;/x-slot:value&gt;\n                    &lt;x-slot:actions&gt;\n                        &lt;x-popover&gt;\n                            &lt;x-slot:trigger&gt;\n                                &lt;x-button icon=\"c-eye\" link=\"#\" spinner class=\"btn-ghost btn-sm\" /&gt;                       \n                            &lt;/x-slot:trigger&gt;\n                            &lt;x-slot:content class=\"pop-small\"&gt;\n                                @lang('Edit or answer')\n                            &lt;/x-slot:content&gt;\n                        &lt;/x-popover&gt;\n                        &lt;x-popover&gt;\n                            &lt;x-slot:trigger&gt;\n                                &lt;x-button icon=\"s-document-text\" link=\"{{ route('posts.show', $comment-&gt;post-&gt;slug) }}\" spinner class=\"btn-ghost btn-sm\" /&gt;                     \n                            &lt;/x-slot:trigger&gt;\n                            &lt;x-slot:content class=\"pop-small\"&gt;\n                                @lang('Show post')\n                            &lt;/x-slot:content&gt;\n                        &lt;/x-popover&gt;\n                        &lt;x-popover&gt;\n                            &lt;x-slot:trigger&gt;\n                                &lt;x-button icon=\"o-trash\" wire:click=\"deleteComment({{ $comment-&gt;id }})\"\n                                    wire:confirm=\"{{ __('Are you sure to delete this comment?') }}\" \n                                    spinner class=\"text-red-500 btn-ghost btn-sm\" /&gt;                 \n                            &lt;/x-slot:trigger&gt;\n                            &lt;x-slot:content class=\"pop-small\"&gt;\n                                @lang('Delete')\n                            &lt;/x-slot:content&gt;\n                        &lt;/x-popover&gt;\n                    &lt;/x-slot:actions&gt;\n                &lt;/x-list-item&gt;\n                &lt;p class=\"ml-16\"&gt;{!! Str::words(nl2br($comment-&gt;body), 20, ' ...') !!}&lt;/p&gt;\n                &lt;br&gt;\n            @endforeach\n        &lt;/x-slot:content&gt;\n    &lt;/x-collapse&gt;\n&lt;/div&gt;\n</code></pre>","children":[]}],"payload":{"lines":"4139,4140","fold":1}},{"content":"Traductions Dashboard","children":[{"content":"<pre><code class=\"language-json\"><span class=\"hljs-attr\">\"In a glance\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"En un coup d'oeil\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Recent posts\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Articles récents\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Show post\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Afficher l'article\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"in post:\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"dans l'article :\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Users\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Utilisateurs\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Dashboard\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Tableau de bord\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Edit or answer\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Modifier ou répondre\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Posts\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Articles\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Recent Comments\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Commentaires récents\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Comment to valid from \"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Commentaire à valider de \"</span>\n</code></pre>","children":[]}],"payload":{"lines":"4311,4312","fold":1}},{"content":"Lien dans les menus","children":[{"content":"Dans navigation.navbar","children":[{"content":"<pre><code class=\"language-php\">&lt;x-slot:actions&gt;\n    &lt;span class=\"hidden sm:block\"&gt;\n        ...\n        @if ($user = auth()-&gt;user())\n            &lt;x-dropdown&gt;\n                ...User name\n                @if ($user-&gt;isAdminOrRedac())\n                    &lt;x-menu-item title=\"{{ __('Administration') }}\" link=\"{{ route('admin') }}\" /&gt;\n                @endif\n                &lt;x-menu-separator /&gt;\n                ... Profile\n                &lt;x-menu-separator /&gt;\n                ... Logout\n            &lt;/x-dropdown&gt;\n        @else ...\n</code></pre>","children":[]}],"payload":{"lines":"4328,4329"}},{"content":"Dans navigation.sidebar","children":[{"content":"<pre><code class=\"language-php\">    ... Logout\n    &lt;/x-<span class=\"hljs-keyword\">list</span>-item&gt;\n    @<span class=\"hljs-keyword\">if</span> (<span class=\"hljs-variable\">$user</span>-&gt;<span class=\"hljs-title function_ invoke__\">isAdminOrRedac</span>())\n        &lt;x-menu-item title=<span class=\"hljs-string\">\"{{ __('Administration') }}\"</span> icon=<span class=\"hljs-string\">\"s-building-office-2\"</span> link=<span class=\"hljs-string\">\"{{ route('admin') }}\"</span> /&gt;\n    @<span class=\"hljs-keyword\">endif</span>\n    &lt;x-menu-separator /&gt;\n    ... Profile\n</code></pre>","children":[]}],"payload":{"lines":"4348,4349"}}],"payload":{"lines":"4326,4327","fold":1}},{"content":"Redac &amp; Admin: Redirection lors du login","children":[{"content":"<pre data-lines=\"4362,4363\"><code>Composant auth.login :\n</code></pre>","children":[],"payload":{"lines":"4362,4363"}},{"content":"<pre><code class=\"language-php\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">login</span>(<span class=\"hljs-params\"></span>) </span>{\n    ...\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title function_ invoke__\">auth</span>()-&gt;<span class=\"hljs-title function_ invoke__\">user</span>()-&gt;<span class=\"hljs-title function_ invoke__\">isAdmin</span>()) {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_ invoke__\">redirect</span>()-&gt;<span class=\"hljs-title function_ invoke__\">intended</span>(<span class=\"hljs-string\">'/admin/dashboard'</span>);\n    }\n    ... <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">redirectIntended</span>()...\n}\n</code></pre>","children":[]}],"payload":{"lines":"4360,4361","fold":1}}],"payload":{"lines":"4031,4032"}},{"content":"Réf.: <em><strong><a href=\"https://laravel.sillo.org/posts/mon-cms-ladministration\">https://laravel.sillo.org/posts/mon-cms-ladministration</a></strong></em>","children":[],"payload":{"lines":"4374,4375"}}],"payload":{"lines":"3975,3976","fold":1}},{"content":"- Les Articles","children":[{"content":"Tableau des articles","children":[{"content":"Route Articles","children":[{"content":"<pre><code class=\"language-php\"><span class=\"hljs-title class_\">Route</span>::<span class=\"hljs-title function_ invoke__\">middleware</span>(<span class=\"hljs-string\">'auth'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">group</span>(function () {\n    ...\n    <span class=\"hljs-title class_\">Route</span>::<span class=\"hljs-title function_ invoke__\">middleware</span>(<span class=\"hljs-title class_\">IsAdminOrRedac</span>::<span class=\"hljs-variable language_\">class</span>)-&gt;<span class=\"hljs-title function_ invoke__\">prefix</span>(<span class=\"hljs-string\">'admin'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">group</span>(function () {\n        ...\n        <span class=\"hljs-title class_\">Volt</span>::<span class=\"hljs-title function_ invoke__\">route</span>(<span class=\"hljs-string\">'/posts/index'</span>, <span class=\"hljs-string\">'admin.posts.index'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">name</span>(<span class=\"hljs-string\">'posts.index'</span>);\n  });\n});\n</code></pre>","children":[]}],"payload":{"lines":"4380,4381","fold":1}},{"content":"Navigation Articles","children":[{"content":"<pre data-lines=\"4394,4395\"><code>Lien des articles dans dashboard (Pavé 'En un coup d'oeil') :\n</code></pre>","children":[],"payload":{"lines":"4394,4395"}},{"content":"<pre><code class=\"language-php\">... admin.index, pavé Posts\n&lt;a href=\"{{ route('posts.index') }}\" class=\"flex-grow\" title=\"{{ __('All posts') }}\"&gt;\n    &lt;x-stat title=\"{{ __('Posts') }}\" description=\"\" value=\"{{ $posts-&gt;count() }}\" icon=\"s-document-text\" class=\"shadow-hover\" /&gt;\n&lt;/a&gt;\n</code></pre>","children":[]},{"content":"<pre data-lines=\"4403,4404\"><code>Lien des articles dans admin/sidebar :\n</code></pre>","children":[],"payload":{"lines":"4403,4404"}},{"content":"<pre><code class=\"language-php\">... Lien Dashboard\n&lt;x-menu-sub title=<span class=\"hljs-string\">\"{{ __('Posts') }}\"</span> icon=<span class=\"hljs-string\">\"s-document-text\"</span>&gt;\n    &lt;x-menu-item title=<span class=\"hljs-string\">\"{{ __('All posts') }}\"</span> link=<span class=\"hljs-string\">\"{{ route('posts.index') }}\"</span> /&gt;\n&lt;/x-menu-sub&gt;\n</code></pre>","children":[]},{"content":"<pre data-lines=\"4412,4413\"><code>lang/fr.json :\n</code></pre>","children":[],"payload":{"lines":"4412,4413"}},{"content":"<pre><code class=\"language-json\"><span class=\"hljs-attr\">\"All posts\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Tous les articles\"</span><span class=\"hljs-punctuation\">,</span>\n</code></pre>","children":[]}],"payload":{"lines":"4392,4393","fold":1}},{"content":"Composant Articles","children":[{"content":"CLI","children":[{"content":"<pre><code class=\"language-php\">php artisan make:volt admin/posts/index --<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span>\n</span></code></pre>","children":[]}],"payload":{"lines":"4420,4421","fold":1}},{"content":"Code admin.posts.index","children":[{"content":"<pre><code class=\"language-php\">&lt;?php\nuse Mary\\Traits\\Toast;\nuse Livewire\\Volt\\Component;\nuse Livewire\\WithPagination;\nuse App\\Models\\{Post, Category};\nuse Illuminate\\Support\\Facades\\Auth;\nuse App\\Repositories\\PostRepository;\nuse Livewire\\Attributes\\{Layout, Title};\nuse Illuminate\\Pagination\\LengthAwarePaginator;\nuse Illuminate\\Database\\Eloquent\\{Builder, Collection};\n\nnew \n#[Layout('components.layouts.admin'), Title('List Posts')]\nclass extends Component {\n    use Toast, WithPagination;\n\n    public string $search = '';\n    public Collection $categories;\n    public $category_id = 0;\n    public array $sortBy  = ['column' =&gt; 'created_at', 'direction' =&gt; 'desc'];\n\n    public function mount(): void {\n        $this-&gt;categories = $this-&gt;getCategories();\n    }\n\n    public function getCategories(): Collection {\n        if (Auth::user()-&gt;isAdmin()) {\n            return Category::all();\n        }\n\n        return Category::whereHas('posts', fn (Builder $q) =&gt; $q-&gt;where('user_id', Auth::id()))-&gt;get();\n        }\n      \n    public function headers(): array {\n        $headers = [\n            ['key' =&gt; 'title', 'label' =&gt; __('Title')],\n        ];\n  \n        if (Auth::user()-&gt;isAdmin()) {\n            $headers = array_merge($headers, [['key' =&gt; 'user_name', 'label' =&gt; __('Author')]]);\n        }\n  \n        return array_merge($headers, [\n            ['key' =&gt; 'category_title', 'label' =&gt; __('Category')],\n            ['key' =&gt; 'comments_count', 'label' =&gt; __('')],\n            ['key' =&gt; 'active', 'label' =&gt; __('Published')],\n            ['key' =&gt; 'date', 'label' =&gt; __('Date')],\n      ]);\n      }\n\n    public function posts(): LengthAwarePaginator {\n        return Post::query()\n            -&gt;select('id', 'title', 'slug', 'category_id', 'active', 'user_id', 'created_at', 'updated_at')\n            -&gt;when(Auth::user()-&gt;isAdmin(), fn (Builder $q) =&gt; $q-&gt;withAggregate('user', 'name'))\n            -&gt;when(!Auth::user()-&gt;isAdmin(), fn (Builder $q) =&gt; $q-&gt;where('user_id', Auth::id()))\n            -&gt;withAggregate('category', 'title')\n            -&gt;withcount('comments')\n            -&gt;when($this-&gt;search, fn (Builder $q) =&gt; $q-&gt;where('title', 'like', \"%{$this-&gt;search}%\"))\n            -&gt;when($this-&gt;category_id, fn (Builder $q) =&gt; $q-&gt;where('category_id', $this-&gt;category_id))\n            -&gt;when('date' === $this-&gt;sortBy['column'], fn (Builder $q) =&gt; $q-&gt;orderBy('created_at', $this-&gt;sortBy['direction']), fn (Builder $q) =&gt; $q-&gt;orderBy($this-&gt;sortBy['column'], $this-&gt;sortBy['direction']))\n            -&gt;latest()\n            -&gt;paginate(6);\n    }\n\n    public function deletePost(int $postId): void {\n        $post = Post::findOrFail($postId);\n        $post-&gt;delete();\n        $this-&gt;success(\"{$post-&gt;title} \" . __('deleted'));\n    }\n\n    public function clonePost(int $postId): void {\n        $originalPost       = Post::findOrFail($postId);\n        $clonedPost         = $originalPost-&gt;replicate();\n        $postRepository     = new PostRepository();\n        $clonedPost-&gt;slug   = $postRepository-&gt;generateUniqueSlug($originalPost-&gt;slug);\n        $clonedPost-&gt;active = false;\n        $clonedPost-&gt;save();\n  \n        // Ici on redirigera vers le formulaire de modification de l'article cloné\n    }\n      \n    public function with(): array {\n        return [\n            'headers' =&gt; $this-&gt;headers(),\n            'posts'   =&gt; $this-&gt;posts(),\n        ];\n    }\n}; ?&gt;\n\n&lt;div&gt;\n    &lt;x-header title=\"{{ __('Posts') }}\" separator progress-indicator&gt;\n        &lt;x-slot:actions&gt;\n            &lt;x-input placeholder=\"{{ __('Search...') }}\" wire:model.live.debounce=\"search\" clearable icon=\"o-magnifying-glass\" /&gt;\n            &lt;x-button label=\"{{ __('Add a post') }}\" class=\"btn-outline lg:hidden\" link=\"{{ route('posts.create') }}\" /&gt;\n            &lt;x-button icon=\"s-building-office-2\" label=\"{{ __('Dashboard') }}\" class=\"btn-outline lg:hidden\"\n                link=\"{{ route('admin') }}\" /&gt;\n        &lt;/x-slot:actions&gt;\n    &lt;/x-header&gt;\n\n    &lt;x-collapse&gt;\n        &lt;x-slot:heading&gt;\n            @lang(__('Filters'))\n        &lt;/x-slot:heading&gt;\n        &lt;x-slot:content&gt;\n            &lt;x-select label=\"{{ __('Category') }}\" :options=\"$categories\" placeholder=\"{{ __('Select a category') }}\"\n                option-label=\"title\" wire:model=\"category_id\" wire:change=\"$refresh\" /&gt;\n        &lt;/x-slot:content&gt;\n    &lt;/x-collapse&gt;\n  \n    &lt;br&gt;\n\n    @if ($posts-&gt;count() &gt; 0)\n        &lt;x-card&gt;\n            &lt;x-table striped :headers=\"$headers\" :rows=\"$posts\" :sort-by=\"$sortBy\" link=\"#\" with-pagination&gt;\n\n                @scope('header_comments_count', $header)\n                    {{ $header['label'] }}\n                    &lt;x-icon name=\"c-chat-bubble-left\" /&gt;\n                @endscope\n\n                @scope('cell_comments_count', $post)\n                    @if ($post-&gt;comments_count &gt; 0)\n                        &lt;x-badge value=\"{{ $post-&gt;comments_count }}\" class=\"badge-primary\" /&gt;\n                    @endif\n                @endscope\n\n                @scope('cell_active', $post)\n                    @if ($post-&gt;active)\n                        &lt;x-icon name=\"o-check-circle\" /&gt;\n                    @endif\n                @endscope\n\n                @scope('cell_date', $post)\n                    @lang('Created') {{ $post-&gt;created_at-&gt;diffForHumans() }}\n                    @if ($post-&gt;updated_at != $post-&gt;created_at)\n                        &lt;br&gt;\n                        @lang('Updated') {{ $post-&gt;updated_at-&gt;diffForHumans() }}\n                    @endif\n                @endscope\n\n                @scope('actions', $post)\n                    &lt;div class=\"flex\"&gt;\n                        &lt;x-popover&gt;\n                            &lt;div class=\"flex\"&gt;\n                                &lt;x-slot:trigger&gt;\n                                    &lt;x-button icon=\"o-finger-print\" wire:click=\"clonePost({{ $post-&gt;id }})\" spinner\n                                        class=\"btn-ghost btn-sm\" /&gt;\n                                &lt;/x-slot:trigger&gt;\n                                &lt;x-slot:content class=\"pop-small\"&gt;\n                                    @lang('Clone')\n                                &lt;/x-slot:content&gt;\n                            &lt;/x-popover&gt;\n                        &lt;x-popover&gt;\n                            &lt;x-slot:trigger&gt;\n                                &lt;x-button icon=\"o-trash\" wire:click=\"deletePost({{ $post-&gt;id }})\"\n                                    wire:confirm=\"{{ __('Are you sure to delete this post?') }}\" spinner\n                                    class=\"text-red-500 btn-ghost btn-sm\" /&gt;\n                            &lt;/x-slot:trigger&gt;\n                            &lt;x-slot:content class=\"pop-small\"&gt;\n                                @lang('Delete')\n                            &lt;/x-slot:content&gt;\n                        &lt;/x-popover&gt;\n                    &lt;/div&gt;\n                @endscope\n\n            &lt;/x-table&gt;\n        &lt;/x-card&gt;\n    @endif\n&lt;/div&gt;\n</code></pre>","children":[]}],"payload":{"lines":"4426,4427","fold":1}},{"content":"Dans PostRepository","children":[{"content":"<pre><code class=\"language-php\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">generateUniqueSlug</span>(<span class=\"hljs-params\"><span class=\"hljs-keyword\">string</span> <span class=\"hljs-variable\">$slug</span></span>): <span class=\"hljs-title\">string</span> </span>{\n    <span class=\"hljs-variable\">$newSlug</span> = <span class=\"hljs-variable\">$slug</span>;\n    <span class=\"hljs-variable\">$counter</span> = <span class=\"hljs-number\">1</span>;\n    <span class=\"hljs-keyword\">while</span> (<span class=\"hljs-title class_\">Post</span>::<span class=\"hljs-title function_ invoke__\">where</span>(<span class=\"hljs-string\">'slug'</span>, <span class=\"hljs-variable\">$newSlug</span>)-&gt;<span class=\"hljs-title function_ invoke__\">exists</span>()) {\n        <span class=\"hljs-variable\">$newSlug</span> = <span class=\"hljs-variable\">$slug</span> . <span class=\"hljs-string\">'-'</span> . <span class=\"hljs-variable\">$counter</span>;\n        ++<span class=\"hljs-variable\">$counter</span>;\n  }\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable\">$newSlug</span>;\n}\n</code></pre>","children":[]}],"payload":{"lines":"4600,4601","fold":1}},{"content":"Traductions admin posts list","children":[{"content":"<pre><code class=\"language-json\"><span class=\"hljs-attr\">\"Title\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Titre\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Author\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Auteur\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Updated\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Mis à jour\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Category\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Catégorie\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Published\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Publié\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Add a post\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Ajouter un article\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Are you sure to delete this post?\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Êtes-vous sûr de vouloir supprimer cet article ?\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"deleted\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"supprimé\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Clone\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Dupliquer\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Filters\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Filtres\"</span>\n</code></pre>","children":[]}],"payload":{"lines":"4614,4615","fold":1}}],"payload":{"lines":"4418,4419","fold":1}},{"content":"Réf.: <em><strong><a href=\"https://laravel.sillo.org/posts/mon-cms-tableau-des-articles\">https://laravel.sillo.org/posts/mon-cms-tableau-des-articles</a></strong></em>","children":[],"payload":{"lines":"4629,4630"}}],"payload":{"lines":"4378,4379","fold":1}},{"content":"Créer un article","children":[{"content":"Route admin/posts/create","children":[{"content":"<pre><code class=\"language-php\"><span class=\"hljs-title class_\">Route</span>::<span class=\"hljs-title function_ invoke__\">middleware</span>(<span class=\"hljs-string\">'auth'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">group</span>(function () {\n    ...\n    <span class=\"hljs-title class_\">Route</span>::<span class=\"hljs-title function_ invoke__\">middleware</span>(<span class=\"hljs-title class_\">IsAdminOrRedac</span>::<span class=\"hljs-variable language_\">class</span>)-&gt;<span class=\"hljs-title function_ invoke__\">prefix</span>(<span class=\"hljs-string\">'admin'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">group</span>(function () {\n        ...\n        <span class=\"hljs-title class_\">Volt</span>::<span class=\"hljs-title function_ invoke__\">route</span>(<span class=\"hljs-string\">'/posts/create'</span>, <span class=\"hljs-string\">'admin.posts.create'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">name</span>(<span class=\"hljs-string\">'posts.create'</span>);\n  });\n});\n</code></pre>","children":[]}],"payload":{"lines":"4633,4634","fold":1}},{"content":"Menu (admin.sidebar)","children":[{"content":"<pre><code class=\"language-php\">&lt;x-menu-sub title=<span class=\"hljs-string\">\"{{ __('Posts') }}\"</span> icon=<span class=\"hljs-string\">\"s-document-text\"</span>&gt;\n    &lt;x-menu-item title=<span class=\"hljs-string\">\"{{ __('All posts') }}\"</span> link=<span class=\"hljs-string\">\"{{ route('posts.index') }}\"</span> /&gt;\n    &lt;x-menu-item title=<span class=\"hljs-string\">\"{{ __('Add a post') }}\"</span> link=<span class=\"hljs-string\">\"{{ route('posts.create') }}\"</span> /&gt;\n&lt;/x-menu-sub&gt;\n</code></pre>","children":[]}],"payload":{"lines":"4645,4646","fold":1}},{"content":"Composant (Formulaire)","children":[{"content":"CLI admin.posts.create","children":[{"content":"<pre><code class=\"language-php\">php artisan make:volt admin/posts/create --<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span>\n</span></code></pre>","children":[]}],"payload":{"lines":"4656,4657","fold":1}},{"content":"Code Création article","children":[{"content":"Base du code","children":[{"content":"<pre><code class=\"language-php\">&lt;?php\nuse Livewire\\Volt\\Component;\nuse App\\Models\\Category;\nuse Livewire\\Attributes\\Layout;\n\nnew #[Layout('components.layouts.admin')] \nclass extends Component {\n    public function with(): array {\n      return [\n        'categories' =&gt; Category::orderBy('title')-&gt;get(),\n    ];}\n}; ?&gt;\n\n&lt;div&gt;\n    &lt;x-header title=\"{{ __('Add a post') }}\" separator progress-indicator&gt;\n        &lt;x-slot:actions&gt;\n            &lt;x-button icon=\"s-building-office-2\" label=\"{{ __('Dashboard') }}\" class=\"btn-outline lg:hidden\"\n                link=\"{{ route('admin') }}\" /&gt;\n        &lt;/x-slot:actions&gt;\n    &lt;/x-header&gt;\n    &lt;x-card&gt;\n        &lt;x-form wire:submit=\"save\"&gt;\n            &lt;x-select label=\"{{ __('Category') }}\" option-label=\"title\" :options=\"$categories\" wire:model=\"category_id\"\n                wire:change=\"$refresh\" /&gt;\n            &lt;br&gt;\n            &lt;div class=\"flex gap-6\"&gt;\n                &lt;x-checkbox label=\"{{ __('Published') }}\" wire:model=\"active\" /&gt;\n                &lt;x-checkbox label=\"{{ __('Pinned') }}\" wire:model=\"pinned\" /&gt;\n            &lt;/div&gt;\n            &lt;x-input type=\"text\" wire:model=\"title\" label=\"{{ __('Title') }}\"\n                placeholder=\"{{ __('Enter the title') }}\" wire:change=\"$refresh\" /&gt;\n            &lt;x-input type=\"text\" wire:model=\"slug\" label=\"{{ __('Slug') }}\" /&gt;\n            {{-- &lt;x-editor wire:model=\"body\" label=\"{{ __('Content') }}\" :config=\"config('tinymce.config')\"\n                folder=\"{{ 'photos/' . now()-&gt;format('Y/m') }}\" /&gt; --}}\n            &lt;x-card title=\"{{ __('SEO') }}\" shadow separator&gt;\n                &lt;x-input placeholder=\"{{ __('Title') }}\" wire:model=\"seo_title\" hint=\"{{ __('Max 70 chars') }}\" /&gt;\n                &lt;br&gt;\n                &lt;x-textarea label=\"{{ __('META Description') }}\" wire:model=\"meta_description\"\n                    hint=\"{{ __('Max 160 chars') }}\" rows=\"2\" inline /&gt;\n                &lt;br&gt;\n                &lt;x-textarea label=\"{{ __('META Keywords') }}\" wire:model=\"meta_keywords\"\n                    hint=\"{{ __('Keywords separated by comma') }}\" rows=\"1\" inline /&gt;\n            &lt;/x-card&gt;\n            &lt;x-slot:actions&gt;\n                &lt;x-button label=\"{{ __('Save') }}\" icon=\"o-paper-airplane\" spinner=\"save\" type=\"submit\"\n                    class=\"btn-primary\" /&gt;\n            &lt;/x-slot:actions&gt;\n        &lt;/x-form&gt;\n    &lt;/x-card&gt;\n&lt;/div&gt;\n</code></pre>","children":[]}],"payload":{"lines":"4664,4665","fold":1}},{"content":"Propriétés - Validation","children":[{"content":"<pre><code class=\"language-php\"><span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Livewire</span>\\<span class=\"hljs-title\">Attributes</span>\\{<span class=\"hljs-title\">Layout</span>, <span class=\"hljs-title\">Validate</span>};\n...\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-variable\">$category_id</span>;\n\n<span class=\"hljs-meta\">#[Validate</span>(<span class=\"hljs-string\">'required|string|max:16777215'</span>)<span class=\"hljs-meta\">]</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">string</span> <span class=\"hljs-variable\">$body</span> = <span class=\"hljs-string\">''</span>;\n\n<span class=\"hljs-meta\">#[Validate</span>(<span class=\"hljs-string\">'required|string|max:255'</span>)<span class=\"hljs-meta\">]</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">string</span> <span class=\"hljs-variable\">$title</span> = <span class=\"hljs-string\">''</span>;\n\n<span class=\"hljs-meta\">#[Validate</span>(<span class=\"hljs-string\">'required|max:255|unique:posts,slug|regex:/^[a-z0-9]+(?:-[a-z0-9]+)*$/'</span>)<span class=\"hljs-meta\">]</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">string</span> <span class=\"hljs-variable\">$slug</span> = <span class=\"hljs-string\">''</span>;\n\n<span class=\"hljs-meta\">#[Validate</span>(<span class=\"hljs-string\">'required'</span>)<span class=\"hljs-meta\">]</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">bool</span> <span class=\"hljs-variable\">$active</span> = <span class=\"hljs-literal\">false</span>;\n\n<span class=\"hljs-meta\">#[Validate</span>(<span class=\"hljs-string\">'required'</span>)<span class=\"hljs-meta\">]</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">bool</span> <span class=\"hljs-variable\">$pinned</span> = <span class=\"hljs-literal\">false</span>;\n\n<span class=\"hljs-meta\">#[Validate</span>(<span class=\"hljs-string\">'required|max:70'</span>)<span class=\"hljs-meta\">]</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">string</span> <span class=\"hljs-variable\">$seo_title</span> = <span class=\"hljs-string\">''</span>;\n\n<span class=\"hljs-meta\">#[Validate</span>(<span class=\"hljs-string\">'required|max:160'</span>)<span class=\"hljs-meta\">]</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">string</span> <span class=\"hljs-variable\">$meta_description</span> = <span class=\"hljs-string\">''</span>;\n\n<span class=\"hljs-meta\">#[Validate</span>(<span class=\"hljs-string\">'required|regex:/^[A-Za-z0-9-éèàù]{1,50}?(,[A-Za-z0-9-éèàù]{1,50})*$/'</span>)<span class=\"hljs-meta\">]</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">string</span> <span class=\"hljs-variable\">$meta_keywords</span> = <span class=\"hljs-string\">''</span>;\n\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">mount</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">void</span> </span>{\n    <span class=\"hljs-variable\">$category</span>          = <span class=\"hljs-title class_\">Category</span>::<span class=\"hljs-title function_ invoke__\">first</span>();\n    <span class=\"hljs-variable language_\">$this</span>-&gt;category_id = <span class=\"hljs-variable\">$category</span>-&gt;id;\n}\n</code></pre>","children":[]}],"payload":{"lines":"4719,4720","fold":1}},{"content":"Update du slug du title","children":[{"content":"<pre><code class=\"language-php\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">updatedTitle</span>(<span class=\"hljs-params\"><span class=\"hljs-variable\">$value</span></span>) </span>{\n    <span class=\"hljs-variable language_\">$this</span>-&gt;slug      = <span class=\"hljs-title class_\">Str</span>::<span class=\"hljs-title function_ invoke__\">slug</span>(<span class=\"hljs-variable\">$value</span>);\n    <span class=\"hljs-variable language_\">$this</span>-&gt;seo_title = <span class=\"hljs-variable\">$value</span>;\n}\n</code></pre>","children":[]}],"payload":{"lines":"4756,4757","fold":1}},{"content":"Enregistrement","children":[{"content":"<pre><code class=\"language-php\">...\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Mary</span>\\<span class=\"hljs-title\">Traits</span>\\<span class=\"hljs-title\">Toast</span>;\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">App</span>\\<span class=\"hljs-title\">Models</span>\\{<span class=\"hljs-title\">Category</span>, <span class=\"hljs-title\">Post</span>};\n\n<span class=\"hljs-keyword\">new</span> <span class=\"hljs-meta\">#[Layout</span>(<span class=\"hljs-string\">'components.layouts.admin'</span>)<span class=\"hljs-meta\">]</span> \n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">Component</span> </span>{\n    <span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Toast</span>;\n    ...\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">save</span>(<span class=\"hljs-params\"></span>) </span>{\n        <span class=\"hljs-variable\">$data</span> = <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">validate</span>();\n        <span class=\"hljs-title class_\">Post</span>::<span class=\"hljs-title function_ invoke__\">create</span>(\n            <span class=\"hljs-variable\">$data</span> + [\n                <span class=\"hljs-string\">'user_id'</span>     =&gt; <span class=\"hljs-title class_\">Auth</span>::<span class=\"hljs-title function_ invoke__\">id</span>(),\n                <span class=\"hljs-string\">'category_id'</span> =&gt; <span class=\"hljs-variable\">$this</span>-&gt;category_id,\n            ],\n    );\n\n        <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">success</span>(<span class=\"hljs-title function_ invoke__\">__</span>(<span class=\"hljs-string\">'Post added with success.'</span>), <span class=\"hljs-attr\">redirectTo</span>: <span class=\"hljs-string\">'/admin/posts/index'</span>);\n    }\n}\n</code></pre>","children":[]}],"payload":{"lines":"4765,4766","fold":1}}],"payload":{"lines":"4662,4663"}},{"content":"Traductions admin.posts.create","children":[{"content":"<pre><code class=\"language-json\"><span class=\"hljs-attr\">\"Select a category\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Sélectionnez une catégorie\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Pinned\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Épinglé\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Content\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Contenu\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"META Keywords\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"META mots-clefs\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Keywords separated by comma\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Mots-clefs séparés par une virgule\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Max 70 chars\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Max 70 caractères\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Max 160 chars\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Max 160 caractères\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Enter the title\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Entrez le titre\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Post added with success.\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Article ajouté avec succès.\"</span>\n</code></pre>","children":[]}],"payload":{"lines":"4790,4791","fold":1}}],"payload":{"lines":"4654,4655","fold":1}},{"content":"Éditeur (TinyMCE)","children":[{"content":"Installation hébergée (Usage Illimité → Notre choix)","children":[{"content":"<a href=\"https://www.tiny.cloud/get-tiny\">Télécharger Free TinyMCE</a>","children":[],"payload":{"lines":"4808,4809"}},{"content":"À décompresser dans : ./storage/app/public/scripts","children":[],"payload":{"lines":"4810,4811"}},{"content":"Paramétrages","children":[{"content":"<pre data-lines=\"4814,4815\"><code>./config/tinymce.php :\n</code></pre>","children":[],"payload":{"lines":"4814,4815"}},{"content":"<pre><code class=\"language-php\"><span class=\"hljs-meta\">&lt;?php</span>\n<span class=\"hljs-keyword\">return</span> [\n<span class=\"hljs-string\">'config'</span> =&gt; [\n  <span class=\"hljs-string\">'language'</span>       =&gt; <span class=\"hljs-title function_ invoke__\">env</span>(<span class=\"hljs-string\">'APP_TINYMCE_LOCALE'</span>, <span class=\"hljs-string\">'en_US'</span>),\n  <span class=\"hljs-string\">'plugins'</span>        =&gt; <span class=\"hljs-string\">'codesample fullscreen'</span>,\n  <span class=\"hljs-string\">'toolbar'</span>        =&gt; <span class=\"hljs-string\">'undo redo style | fontfamily fontsize | alignleft aligncenter alignright alignjustify | bullist numlist | copy cut paste pastetext | hr | codesample | link image quicktable | fullscreen'</span>,\n  <span class=\"hljs-string\">'toolbar_sticky'</span> =&gt; <span class=\"hljs-literal\">true</span>,\n  <span class=\"hljs-string\">'min_height'</span>     =&gt; <span class=\"hljs-number\">1000</span>,\n  <span class=\"hljs-string\">'license_key'</span>    =&gt; <span class=\"hljs-string\">'gpl'</span>,\n  <span class=\"hljs-string\">'valid_elements'</span> =&gt; <span class=\"hljs-string\">'*[*]'</span>,\n  ],\n];\n</code></pre>","children":[]},{"content":"<pre data-lines=\"4831,4832\"><code>Fichier ./.env :\n</code></pre>","children":[],"payload":{"lines":"4831,4832"}},{"content":"<pre><code class=\"language-php\">APP_TINYMCE_LOCALE=fr_FR\n</code></pre>","children":[]}],"payload":{"lines":"4812,4813"}},{"content":"Traductions TinyMCE","children":[{"content":"<a href=\"https://www.tiny.cloud/get-tiny/language-packages\">Récupérer les fichiers de traduction</a>","children":[],"payload":{"lines":"4839,4840"}},{"content":"Les copier dans : ./storage/app/public/scripts/fr_FR.js","children":[],"payload":{"lines":"4840,4842"}}],"payload":{"lines":"4837,4838"}},{"content":"Activation de TinyMCE","children":[{"content":"<pre data-lines=\"4844,4845\"><code>Fichier ./resources\\views\\components\\layouts\\admin.blade.php :\n</code></pre>","children":[],"payload":{"lines":"4844,4845"}},{"content":"<pre><code class=\"language-php\">&lt;script src=<span class=\"hljs-string\">\"{{ asset('storage/scripts/tinymce.min.js') }}\"</span> &gt;&lt;/script&gt;\n... @<span class=\"hljs-title function_ invoke__\">vite</span>(...)\n</code></pre>","children":[]},{"content":"<pre data-lines=\"4851,4852\"><code>Dans la vue du composant admin.posts.create :\n</code></pre>","children":[],"payload":{"lines":"4851,4852"}},{"content":"<pre><code class=\"language-php\">&lt;x-editor wire:model=<span class=\"hljs-string\">\"body\"</span> label=<span class=\"hljs-string\">\"{{ __('Content') }}\"</span> :config=<span class=\"hljs-string\">\"config('tinymce.config')\"</span> folder=<span class=\"hljs-string\">\"{{ 'photos/' . now()-&gt;format('Y/m') }}\"</span> /&gt;\n</code></pre>","children":[]}],"payload":{"lines":"4842,4843"}}],"payload":{"lines":"4806,4807","fold":1}},{"content":"Installation CDN (Usage limité: 1000 appels/mois - Mise à jour auto)","children":[{"content":"<pre><code class=\"language-php\"><span class=\"hljs-comment\">// Fichier ./resources\\views\\components\\layouts\\admin.blade.php</span>\n&lt;script src=<span class=\"hljs-string\">\"https://cdn.tiny.cloud/1/YOUR-KEY-HERE/tinymce/6/tinymce.min.js\"</span> referrerpolicy=<span class=\"hljs-string\">\"origin\"</span>&gt;&lt;/script&gt;\n... @<span class=\"hljs-title function_ invoke__\">vite</span>(...)\n</code></pre>","children":[]}],"payload":{"lines":"4857,4858","fold":1}},{"content":"Réf.: <em><strong><a href=\"https://mary-ui.com/docs/components/editor\">https://mary-ui.com/docs/components/editor</a></strong></em>","children":[],"payload":{"lines":"4865,4866"}}],"payload":{"lines":"4804,4805","fold":1}},{"content":"Gestion de l'image","children":[{"content":"Ajout du trait Livewire WithFileUploads","children":[{"content":"<pre data-lines=\"4871,4872\"><code>admin.posts.create :\n</code></pre>","children":[],"payload":{"lines":"4871,4872"}},{"content":"<pre><code class=\"language-php\"><span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Livewire</span>\\<span class=\"hljs-title\">Features</span>\\<span class=\"hljs-title\">SupportFileUploads</span>\\<span class=\"hljs-title\">TemporaryUploadedFile</span>;\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Livewire</span>\\<span class=\"hljs-title\">WithFileUploads</span>;\n\n<span class=\"hljs-keyword\">new</span> <span class=\"hljs-meta\">#[Layout</span>(<span class=\"hljs-string\">'components.layouts.admin'</span>)<span class=\"hljs-meta\">]</span> \n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">Component</span> </span>{\n    <span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">WithFileUploads</span>, <span class=\"hljs-title\">Toast</span>;\n\n    <span class=\"hljs-meta\">#[Rule</span>(<span class=\"hljs-string\">'required|image|max:7000'</span>)<span class=\"hljs-meta\">]</span>\n    <span class=\"hljs-keyword\">public</span> ?TemporaryUploadedFile <span class=\"hljs-variable\">$photo</span> = <span class=\"hljs-literal\">null</span>;\n</code></pre>","children":[]}],"payload":{"lines":"4869,4870","fold":1}},{"content":"Image / défaut","children":[{"content":"<a href=\"https://laravel.sillo.org/ask.jpg\">Récupérer l'image</a>","children":[],"payload":{"lines":"4887,4888"}},{"content":"À poser dans : ./public/storage/ask.jpg","children":[],"payload":{"lines":"4888,4890"}}],"payload":{"lines":"4885,4886","fold":1}},{"content":"Composant de MaryUI dans le formulaire","children":[{"content":"<pre><code class=\"language-php\">            &lt;x-file wire:model=\"photo\" label=\"{{ __('Featured image') }}\"\n                hint=\"{{ __('Click on the image to modify') }}\" accept=\"image/png, image/jpeg\"&gt;\n                &lt;img src=\"{{ $photo == '' ? '/storage/ask.jpg' : $photo }}\" class=\"h-40\" /&gt;\n            &lt;/x-file&gt;\n            &lt;x-slot:actions&gt;\n                ...\n            &lt;/x-slot:actions&gt;\n        &lt;/x-form&gt;\n    &lt;/x-card&gt;\n&lt;/div&gt;\n</code></pre>","children":[]}],"payload":{"lines":"4890,4891","fold":1}},{"content":"Traductions pour Image","children":[{"content":"<pre><code class=\"language-json\"><span class=\"hljs-attr\">\"Featured image\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Image mise en avant\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Click on the image to modify\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Cliquez sur cette image pour la modifier\"</span><span class=\"hljs-punctuation\">,</span>\n</code></pre>","children":[]}],"payload":{"lines":"4905,4906","fold":1}},{"content":"Save Image","children":[{"content":"<pre data-lines=\"4914,4917\"><code>Par défaut, image temporaire ./storage/app/livewire-tmp\n\n→ Ajouter :\n</code></pre>","children":[],"payload":{"lines":"4914,4917"}},{"content":"<pre><code class=\"language-php\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">save</span>(<span class=\"hljs-params\"></span>) </span>{\n    <span class=\"hljs-variable\">$data</span> = <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">validate</span>();\n\n    <span class=\"hljs-variable\">$date</span> = <span class=\"hljs-title function_ invoke__\">now</span>()-&gt;<span class=\"hljs-title function_ invoke__\">format</span>(<span class=\"hljs-string\">'Y/m'</span>);\n    <span class=\"hljs-variable\">$path</span> = <span class=\"hljs-variable\">$date</span> . <span class=\"hljs-string\">'/'</span> . <span class=\"hljs-title function_ invoke__\">basename</span>(<span class=\"hljs-variable\">$this</span>-&gt;photo-&gt;<span class=\"hljs-title function_ invoke__\">store</span>(<span class=\"hljs-string\">'photos/'</span> . <span class=\"hljs-variable\">$date</span>, <span class=\"hljs-string\">'public'</span>));\n\n    <span class=\"hljs-title class_\">Post</span>::<span class=\"hljs-title function_ invoke__\">create</span>(\n        <span class=\"hljs-variable\">$data</span> + [\n            <span class=\"hljs-string\">'user_id'</span>     =&gt; <span class=\"hljs-title class_\">Auth</span>::<span class=\"hljs-title function_ invoke__\">id</span>(),\n            <span class=\"hljs-string\">'category_id'</span> =&gt; <span class=\"hljs-variable\">$this</span>-&gt;category_id,\n            <span class=\"hljs-string\">'image'</span>       =&gt; <span class=\"hljs-variable\">$path</span>,\n        ],\n    );\n\n    <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">success</span>(<span class=\"hljs-title function_ invoke__\">__</span>(<span class=\"hljs-string\">'Post added with success.'</span>), <span class=\"hljs-attr\">redirectTo</span>: <span class=\"hljs-string\">'/admin/posts/index'</span>);\n}\n</code></pre>","children":[]}],"payload":{"lines":"4912,4913","fold":1}},{"content":"Url des images","children":[{"content":"<pre data-lines=\"4939,4940\"><code>Ajout dans app/helpers.php :\n</code></pre>","children":[],"payload":{"lines":"4939,4940"}},{"content":"<pre><code class=\"language-php\"><span class=\"hljs-keyword\">if</span> (!<span class=\"hljs-title function_ invoke__\">function_exists</span>(<span class=\"hljs-string\">'replaceAbsoluteUrlsWithRelative'</span>)) {\n  <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">replaceAbsoluteUrlsWithRelative</span>(<span class=\"hljs-params\"><span class=\"hljs-keyword\">string</span> <span class=\"hljs-variable\">$content</span></span>) </span>{\n      <span class=\"hljs-variable\">$baseUrl</span> = <span class=\"hljs-title function_ invoke__\">url</span>(<span class=\"hljs-string\">'/'</span>);\n  \n      <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-string\">'/'</span> !== <span class=\"hljs-title function_ invoke__\">substr</span>(<span class=\"hljs-variable\">$baseUrl</span>, -<span class=\"hljs-number\">1</span>)) {\n          <span class=\"hljs-variable\">$baseUrl</span> .= <span class=\"hljs-string\">'/'</span>;\n      }\n    \n      <span class=\"hljs-variable\">$pattern</span>     = <span class=\"hljs-string\">'/&lt;img\\s+[^&gt;]*src=\"(?:https?:\\/\\/)?'</span> . <span class=\"hljs-title function_ invoke__\">preg_quote</span>(<span class=\"hljs-title function_ invoke__\">parse_url</span>(<span class=\"hljs-variable\">$baseUrl</span>, PHP_URL_HOST), <span class=\"hljs-string\">'/'</span>) . <span class=\"hljs-string\">'\\/([^\"]+)\"/i'</span>;\n      <span class=\"hljs-variable\">$replacement</span> = <span class=\"hljs-string\">'&lt;img src=\"/$1\"'</span>;\n  \n      <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_ invoke__\">preg_replace</span>(<span class=\"hljs-variable\">$pattern</span>, <span class=\"hljs-variable\">$replacement</span>, <span class=\"hljs-variable\">$content</span>);\n  }\n}\n</code></pre>","children":[]},{"content":"<pre data-lines=\"4958,4959\"><code>Adaptation de save() :\n</code></pre>","children":[],"payload":{"lines":"4958,4959"}},{"content":"<pre><code class=\"language-php\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">save</span>(<span class=\"hljs-params\"></span>) </span>{\n   ...\n    <span class=\"hljs-variable\">$data</span>[<span class=\"hljs-string\">'body'</span>] = <span class=\"hljs-title function_ invoke__\">replaceAbsoluteUrlsWithRelative</span>(<span class=\"hljs-variable\">$data</span>[<span class=\"hljs-string\">'body'</span>]);\n \n    <span class=\"hljs-title class_\">Post</span>::<span class=\"hljs-title function_ invoke__\">create</span>(\n    ...\n}\n</code></pre>","children":[]}],"payload":{"lines":"4937,4938","fold":1}}],"payload":{"lines":"4867,4868","fold":1}},{"content":"Réf.: <em><strong><a href=\"https://laravel.sillo.org/posts/mon-cms-creer-un-article\">https://laravel.sillo.org/posts/mon-cms-creer-un-article</a></strong></em>","children":[],"payload":{"lines":"4970,4971"}}],"payload":{"lines":"4631,4632","fold":1}},{"content":"Modifier un article","children":[{"content":"Route posts.edit","children":[{"content":"<pre data-lines=\"4976,4977\"><code>Dans le groupe du middleware 'IsAdminOrRedac' :\n</code></pre>","children":[],"payload":{"lines":"4976,4977"}},{"content":"<pre><code class=\"language-php\"><span class=\"hljs-title class_\">Volt</span>::<span class=\"hljs-title function_ invoke__\">route</span>(<span class=\"hljs-string\">'/posts/{post:slug}/edit'</span>, <span class=\"hljs-string\">'admin.posts.edit'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">name</span>(<span class=\"hljs-string\">'posts.edit'</span>);\n</code></pre>","children":[]}],"payload":{"lines":"4974,4975","fold":1}},{"content":"Lien dans tableau des articles (admin.posts.index)","children":[{"content":"<pre><code class=\"language-php\">&lt;x-table striped :headers=<span class=\"hljs-string\">\"<span class=\"hljs-subst\">$headers</span>\"</span> :rows=<span class=\"hljs-string\">\"<span class=\"hljs-subst\">$posts</span>\"</span> :sort-by=<span class=\"hljs-string\">\"<span class=\"hljs-subst\">$sortBy</span>\"</span> link=<span class=\"hljs-string\">\"/admin/posts/{slug}/edit\"</span> with-pagination&gt;\n</code></pre>","children":[]}],"payload":{"lines":"4982,4983","fold":1}},{"content":"Composant édition articles admin.posts.edit","children":[{"content":"<pre><code class=\"language-php\">php artisan make:volt admin/posts/edit --<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span>\n</span></code></pre>","children":[]}],"payload":{"lines":"4988,4989","fold":1}},{"content":"La logique admin.posts.edit","children":[{"content":"<pre><code class=\"language-php\"><span class=\"hljs-meta\">&lt;?php</span>\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">App</span>\\<span class=\"hljs-title\">Models</span>\\{<span class=\"hljs-title\">Category</span>, <span class=\"hljs-title\">Post</span>};\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Support</span>\\<span class=\"hljs-title\">Collection</span>;\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Support</span>\\<span class=\"hljs-title\">Facades</span>\\<span class=\"hljs-title\">Storage</span>;\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">illuminate</span>\\<span class=\"hljs-title\">Support</span>\\<span class=\"hljs-title\">Str</span>;\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Validation</span>\\<span class=\"hljs-title\">Rule</span>;\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Livewire</span>\\<span class=\"hljs-title\">Attributes</span>\\{<span class=\"hljs-title\">Layout</span>, <span class=\"hljs-title\">Title</span>};\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Livewire</span>\\<span class=\"hljs-title\">Features</span>\\<span class=\"hljs-title\">SupportFileUploads</span>\\<span class=\"hljs-title\">TemporaryUploadedFile</span>;\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Livewire</span>\\<span class=\"hljs-title\">Volt</span>\\<span class=\"hljs-title\">Component</span>;\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Livewire</span>\\<span class=\"hljs-title\">WithFileUploads</span>;\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Mary</span>\\<span class=\"hljs-title\">Traits</span>\\<span class=\"hljs-title\">Toast</span>;\n\n<span class=\"hljs-keyword\">new</span> <span class=\"hljs-meta\">#[Title</span>(<span class=\"hljs-string\">'Edit Post'</span>), <span class=\"hljs-meta\">Layout</span>(<span class=\"hljs-string\">'components.layouts.admin'</span>)<span class=\"hljs-meta\">]</span> \n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">Component</span> </span>{\n  <span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">WithFileUploads</span>, <span class=\"hljs-title\">Toast</span>;\n  \n  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-variable\">$postId</span>;\n  <span class=\"hljs-keyword\">public</span> ?Collection <span class=\"hljs-variable\">$categories</span>;\n  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-variable\">$category_id</span>;\n  <span class=\"hljs-keyword\">public</span> Post <span class=\"hljs-variable\">$post</span>;\n  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">string</span> <span class=\"hljs-variable\">$body</span>                  = <span class=\"hljs-string\">''</span>;\n  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">string</span> <span class=\"hljs-variable\">$title</span>                 = <span class=\"hljs-string\">''</span>;\n  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">string</span> <span class=\"hljs-variable\">$slug</span>                  = <span class=\"hljs-string\">''</span>;\n  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">bool</span> <span class=\"hljs-variable\">$active</span>                  = <span class=\"hljs-literal\">false</span>;\n  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">bool</span> <span class=\"hljs-variable\">$pinned</span>                  = <span class=\"hljs-literal\">false</span>;\n  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">string</span> <span class=\"hljs-variable\">$seo_title</span>             = <span class=\"hljs-string\">''</span>;\n  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">string</span> <span class=\"hljs-variable\">$meta_description</span>      = <span class=\"hljs-string\">''</span>;\n  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">string</span> <span class=\"hljs-variable\">$meta_keywords</span>         = <span class=\"hljs-string\">''</span>;\n  <span class=\"hljs-keyword\">public</span> ?TemporaryUploadedFile <span class=\"hljs-variable\">$photo</span> = <span class=\"hljs-literal\">null</span>;\n  \n  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">mount</span>(<span class=\"hljs-params\">Post <span class=\"hljs-variable\">$post</span></span>): <span class=\"hljs-title\">void</span> </span>{\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title function_ invoke__\">Auth</span>()-&gt;<span class=\"hljs-title function_ invoke__\">user</span>()-&gt;<span class=\"hljs-title function_ invoke__\">isRedac</span>() &amp;&amp; <span class=\"hljs-variable\">$post</span>-&gt;user_id !== <span class=\"hljs-title function_ invoke__\">Auth</span>()-&gt;<span class=\"hljs-title function_ invoke__\">id</span>()) {\n      <span class=\"hljs-title function_ invoke__\">abort</span>(<span class=\"hljs-number\">403</span>);\n    }\n  \n    <span class=\"hljs-variable language_\">$this</span>-&gt;post = <span class=\"hljs-variable\">$post</span>;\n    <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">fill</span>(<span class=\"hljs-variable\">$this</span>-&gt;post);\n    <span class=\"hljs-variable language_\">$this</span>-&gt;categories = <span class=\"hljs-title class_\">Category</span>::<span class=\"hljs-title function_ invoke__\">orderBy</span>(<span class=\"hljs-string\">'title'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">get</span>();\n  }\n  \n  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">updatedTitle</span>(<span class=\"hljs-params\"><span class=\"hljs-variable\">$value</span></span>) </span>{\n    <span class=\"hljs-variable language_\">$this</span>-&gt;slug      = <span class=\"hljs-title class_\">Str</span>::<span class=\"hljs-title function_ invoke__\">slug</span>(<span class=\"hljs-variable\">$value</span>);\n    <span class=\"hljs-variable language_\">$this</span>-&gt;seo_title = <span class=\"hljs-variable\">$value</span>;\n  }\n  \n  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">save</span>(<span class=\"hljs-params\"></span>) </span>{\n    <span class=\"hljs-variable\">$data</span> = <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">validate</span>([\n      <span class=\"hljs-string\">'title'</span>            =&gt; <span class=\"hljs-string\">'required|string|max:255'</span>,\n      <span class=\"hljs-string\">'body'</span>             =&gt; <span class=\"hljs-string\">'required|string|max:16777215'</span>,\n      <span class=\"hljs-string\">'category_id'</span>      =&gt; <span class=\"hljs-string\">'required'</span>,\n      <span class=\"hljs-string\">'photo'</span>            =&gt; <span class=\"hljs-string\">'nullable|image|max:7000'</span>,\n      <span class=\"hljs-string\">'active'</span>           =&gt; <span class=\"hljs-string\">'required'</span>,\n      <span class=\"hljs-string\">'pinned'</span>           =&gt; <span class=\"hljs-string\">'required'</span>,\n      <span class=\"hljs-string\">'slug'</span>             =&gt; [<span class=\"hljs-string\">'required'</span>, <span class=\"hljs-string\">'string'</span>, <span class=\"hljs-string\">'max:255'</span>, <span class=\"hljs-string\">'regex:/^[a-z0-9]+(?:-[a-z0-9]+)*$/'</span>, <span class=\"hljs-title class_\">Rule</span>::<span class=\"hljs-title function_ invoke__\">unique</span>(<span class=\"hljs-string\">'posts'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">ignore</span>(<span class=\"hljs-variable\">$this</span>-&gt;post-&gt;id)],\n      <span class=\"hljs-string\">'seo_title'</span>        =&gt; <span class=\"hljs-string\">'required|max:70'</span>,\n      <span class=\"hljs-string\">'meta_description'</span> =&gt; <span class=\"hljs-string\">'required|max:160'</span>,\n      <span class=\"hljs-string\">'meta_keywords'</span>    =&gt; <span class=\"hljs-string\">'required|regex:/^[A-Za-z0-9-éèàù]{1,50}?(,[A-Za-z0-9-éèàù]{1,50})*$/'</span>,\n    ]);\n  \n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-variable language_\">$this</span>-&gt;photo) {\n      <span class=\"hljs-variable\">$date</span>          = <span class=\"hljs-title function_ invoke__\">now</span>()-&gt;<span class=\"hljs-title function_ invoke__\">format</span>(<span class=\"hljs-string\">'Y/m'</span>);\n      <span class=\"hljs-variable\">$path</span>          = <span class=\"hljs-variable\">$date</span> . <span class=\"hljs-string\">'/'</span> . <span class=\"hljs-title function_ invoke__\">basename</span>(<span class=\"hljs-variable\">$this</span>-&gt;photo-&gt;<span class=\"hljs-title function_ invoke__\">store</span>(<span class=\"hljs-string\">'photos/'</span> . <span class=\"hljs-variable\">$date</span>, <span class=\"hljs-string\">'public'</span>));\n      <span class=\"hljs-variable\">$data</span>[<span class=\"hljs-string\">'image'</span>] = <span class=\"hljs-variable\">$path</span>;\n    }\n  \n    <span class=\"hljs-variable\">$data</span>[<span class=\"hljs-string\">'body'</span>] = <span class=\"hljs-title function_ invoke__\">replaceAbsoluteUrlsWithRelative</span>(<span class=\"hljs-variable\">$data</span>[<span class=\"hljs-string\">'body'</span>]);\n  \n    <span class=\"hljs-variable language_\">$this</span>-&gt;post-&gt;<span class=\"hljs-title function_ invoke__\">update</span>(\n      <span class=\"hljs-variable\">$data</span> + [\n      <span class=\"hljs-string\">'category_id'</span> =&gt; <span class=\"hljs-variable\">$this</span>-&gt;category_id,\n      ],\n    );\n  \n    <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">success</span>(<span class=\"hljs-title function_ invoke__\">__</span>(<span class=\"hljs-string\">'Post updated with success.'</span>));\n  }\n}; <span class=\"hljs-meta\">?&gt;</span>\n</code></pre>","children":[]}],"payload":{"lines":"4994,4995","fold":1}},{"content":"Formulaire d'édition","children":[{"content":"<pre><code class=\"language-php\">&lt;div&gt;\n    &lt;x-header title=\"{{ __('Edit a post') }}\" separator progress-indicator&gt;\n        &lt;x-slot:actions&gt;\n            &lt;x-button icon=\"s-building-office-2\" label=\"{{ __('Dashboard') }}\" class=\"btn-outline lg:hidden\"\n                link=\"{{ route('admin') }}\" /&gt;\n        &lt;/x-slot:actions&gt;\n    &lt;/x-header&gt;\n\n    &lt;x-card&gt;\n        &lt;x-form wire:submit=\"save\"&gt;\n            &lt;x-select label=\"{{ __('Category') }}\" option-label=\"title\" :options=\"$categories\" wire:model=\"category_id\" wire:change=\"$refresh\" /&gt;\n            &lt;br&gt;\n            &lt;div class=\"flex gap-6\"&gt;\n                &lt;x-checkbox label=\"{{ __('Published') }}\" wire:model=\"active\" /&gt;\n                &lt;x-checkbox label=\"{{ __('Pinned') }}\" wire:model=\"pinned\" /&gt;\n            &lt;/div&gt;\n            &lt;x-input type=\"text\" wire:model=\"title\" label=\"{{ __('Title') }}\"\n                placeholder=\"{{ __('Enter the title') }}\" wire:change=\"$refresh\" /&gt;\n            &lt;x-input type=\"text\" wire:model=\"slug\" label=\"{{ __('Slug') }}\" /&gt;\n            &lt;x-editor wire:model=\"body\" label=\"{{ __('Content') }}\" :config=\"config('tinymce.config')\"\n                folder=\"{{ 'photos/' . now()-&gt;format('Y/m') }}\" /&gt;\n            &lt;x-card title=\"{{ __('SEO') }}\" shadow separator&gt;\n                &lt;x-input placeholder=\"{{ __('Title') }}\" wire:model=\"seo_title\" hint=\"{{ __('Max 70 chars') }}\" /&gt;\n                &lt;br&gt;\n                &lt;x-textarea label=\"{{ __('META Description') }}\" wire:model=\"meta_description\"\n                    hint=\"{{ __('Max 160 chars') }}\" rows=\"2\" inline /&gt;\n                &lt;br&gt;\n                &lt;x-textarea label=\"{{ __('META Keywords') }}\" wire:model=\"meta_keywords\"\n                    hint=\"{{ __('Keywords separated by comma') }}\" rows=\"1\" inline /&gt;\n            &lt;/x-card&gt;\n            &lt;x-file wire:model=\"photo\" label=\"{{ __('Featured image') }}\"\n                hint=\"{{ __('Click on the image to modify') }}\" accept=\"image/png, image/jpeg\"&gt;\n                &lt;img src=\"{{ asset('storage/photos/' . $post-&gt;image) }}\" class=\"h-40\" /&gt;\n            &lt;/x-file&gt;\n            &lt;x-slot:actions&gt;\n                &lt;x-button label=\"{{ __('Preview') }}\" icon=\"m-sun\" link=\"{{ '/posts/' . $post-&gt;slug }}\" external\n                    class=\"btn-outline\" /&gt;\n                &lt;x-button label=\"{{ __('Save') }}\" icon=\"o-paper-airplane\" spinner=\"save\" type=\"submit\"\n                    class=\"btn-primary\" /&gt;\n            &lt;/x-slot:actions&gt;\n        &lt;/x-form&gt;\n    &lt;/x-card&gt;\n&lt;/div&gt;\n</code></pre>","children":[]}],"payload":{"lines":"5075,5076","fold":1}},{"content":"Traductions Édition","children":[{"content":"<pre><code class=\"language-json\"><span class=\"hljs-attr\">\"Edit a post\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Modifier un article\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Post updated with success.\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Article mis à jour avec succès.\"</span>\n</code></pre>","children":[]}],"payload":{"lines":"5123,5124","fold":1}},{"content":"Bouton édition dans le posts.show","children":[{"content":"HTML","children":[{"content":"<pre><code class=\"language-php\">@auth\n    &lt;x-popover&gt;\n        ...\n    &lt;/x-popover&gt;\n    @if (Auth::user()-&gt;isAdmin() || Auth::user()-&gt;id == $post-&gt;user_id)\n        &lt;x-popover&gt;\n            &lt;x-slot:trigger&gt;\n                &lt;x-button icon=\"c-pencil-square\" link=\"{{ route('posts.edit', $post) }}\" spinner\n                    class=\"btn-ghost btn-sm\" /&gt;\n            &lt;/x-slot:trigger&gt;\n            &lt;x-slot:content class=\"pop-small\"&gt;\n                @lang('Edit this post')\n            &lt;/x-slot:content&gt;\n        &lt;/x-popover&gt;\n    @endif\n@endauth\n</code></pre>","children":[]}],"payload":{"lines":"5132,5133"}},{"content":"Traduction Édition du post","children":[{"content":"<pre><code class=\"language-json\"><span class=\"hljs-attr\">\"Edit this post\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Modifier cet article\"</span>\n</code></pre>","children":[]}],"payload":{"lines":"5153,5154"}}],"payload":{"lines":"5130,5131","fold":1}},{"content":"Bouton clone dans le posts.show","children":[{"content":"HTML Clone","children":[{"content":"<pre><code class=\"language-php\">@if (Auth::user()-&gt;isAdmin() || Auth::user()-&gt;id == $post-&gt;user_id)\n    &lt;x-popover&gt;\n        ...\n    &lt;/x-popover&gt;\n    &lt;x-popover&gt;\n        &lt;x-slot:trigger&gt;\n            &lt;x-button icon=\"o-finger-print\" wire:click=\"clonePost({{ $post-&gt;id }})\" spinner\n                class=\"btn-ghost btn-sm\" /&gt;\n        &lt;/x-slot:trigger&gt;\n        &lt;x-slot:content class=\"pop-small\"&gt;\n            @lang('Clone this post')\n        &lt;/x-slot:content&gt;\n    &lt;/x-popover&gt;\n@endif\n</code></pre>","children":[]}],"payload":{"lines":"5161,5162","fold":1}},{"content":"Traduction Clone","children":[{"content":"<pre><code class=\"language-json\"><span class=\"hljs-attr\">\"Clone this post\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Dupliquer cet article\"</span>\n</code></pre>","children":[]}],"payload":{"lines":"5180,5181","fold":1}},{"content":"Logique du clonage","children":[{"content":"<pre><code class=\"language-php\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">clonePost</span>(<span class=\"hljs-params\"><span class=\"hljs-keyword\">int</span> <span class=\"hljs-variable\">$postId</span></span>): <span class=\"hljs-title\">void</span>\n</span>{\n    <span class=\"hljs-variable\">$originalPost</span> = <span class=\"hljs-title class_\">Post</span>::<span class=\"hljs-title function_ invoke__\">findOrFail</span>(<span class=\"hljs-variable\">$postId</span>);\n    <span class=\"hljs-variable\">$clonedPost</span> = <span class=\"hljs-variable\">$originalPost</span>-&gt;<span class=\"hljs-title function_ invoke__\">replicate</span>();\n    <span class=\"hljs-variable\">$postRepository</span> = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">PostRepository</span>();\n    <span class=\"hljs-variable\">$clonedPost</span>-&gt;slug = <span class=\"hljs-variable\">$postRepository</span>-&gt;<span class=\"hljs-title function_ invoke__\">generateUniqueSlug</span>(<span class=\"hljs-variable\">$originalPost</span>-&gt;slug);\n    <span class=\"hljs-variable\">$clonedPost</span>-&gt;active = <span class=\"hljs-literal\">false</span>;\n    <span class=\"hljs-variable\">$clonedPost</span>-&gt;<span class=\"hljs-title function_ invoke__\">save</span>();\n\n    <span class=\"hljs-title function_ invoke__\">redirect</span>()-&gt;<span class=\"hljs-title function_ invoke__\">route</span>(<span class=\"hljs-string\">'posts.edit'</span>, <span class=\"hljs-variable\">$clonedPost</span>-&gt;slug);\n}\n</code></pre>","children":[]}],"payload":{"lines":"5186,5187","fold":1}}],"payload":{"lines":"5159,5160","fold":1}},{"content":"Réf.: <em><strong><a href=\"https://laravel.sillo.org/posts/mon-cms-modifier-un-article\">https://laravel.sillo.org/posts/mon-cms-modifier-un-article</a></strong></em>","children":[],"payload":{"lines":"5202,5203"}}],"payload":{"lines":"4972,4973","fold":1}}],"payload":{"lines":"4376,4377","fold":1}},{"content":"- Les Catégories","children":[{"content":"Route categories.index","children":[{"content":"<pre><code class=\"language-php\"><span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">App</span>\\<span class=\"hljs-title\">Http</span>\\<span class=\"hljs-title\">Middleware</span>\\{<span class=\"hljs-title\">IsAdmin</span>, <span class=\"hljs-title\">IsAdminOrRedac</span>};\n...\n<span class=\"hljs-comment\">// Dans le groupe du middleware 'IsAdminOrRedac'</span>\n<span class=\"hljs-title class_\">Route</span>::<span class=\"hljs-title function_ invoke__\">middleware</span>(<span class=\"hljs-title class_\">IsAdmin</span>::<span class=\"hljs-variable language_\">class</span>)-&gt;<span class=\"hljs-title function_ invoke__\">group</span>(function () {\n    <span class=\"hljs-title class_\">Volt</span>::<span class=\"hljs-title function_ invoke__\">route</span>(<span class=\"hljs-string\">'/categories/index'</span>, <span class=\"hljs-string\">'admin.categories.index'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">name</span>(<span class=\"hljs-string\">'categories.index'</span>);\n});\n</code></pre>","children":[]}],"payload":{"lines":"5206,5207","fold":1}},{"content":"Item dans barre latérale","children":[{"content":"<pre data-lines=\"5219,5220\"><code>HTML Item dans admin.sidebar :\n</code></pre>","children":[],"payload":{"lines":"5219,5220"}},{"content":"<pre><code class=\"language-php\">&lt;x-menu-sub title=<span class=\"hljs-string\">\"{{ __('Posts') }}\"</span> icon=<span class=\"hljs-string\">\"s-document-text\"</span>&gt;\n    ...\n    @<span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title class_\">Auth</span>::<span class=\"hljs-title function_ invoke__\">user</span>()-&gt;<span class=\"hljs-title function_ invoke__\">isAdmin</span>())\n        &lt;x-menu-item title=<span class=\"hljs-string\">\"{{ __('Categories') }}\"</span> link=<span class=\"hljs-string\">\"{{ route('categories.index') }}\"</span> /&gt;\n    @<span class=\"hljs-keyword\">endif</span>\n&lt;/x-menu-sub&gt; \n</code></pre>","children":[]},{"content":"<pre data-lines=\"5230,5231\"><code>Traduction Item :\n</code></pre>","children":[],"payload":{"lines":"5230,5231"}},{"content":"<pre><code class=\"language-json\"><span class=\"hljs-attr\">\"Categories\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Catégories\"</span>\n</code></pre>","children":[]}],"payload":{"lines":"5217,5218","fold":1}},{"content":"Création composant category.index","children":[{"content":"<pre><code class=\"language-php\">php artisan make:volt admin/categories/index --<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span>\n</span></code></pre>","children":[]}],"payload":{"lines":"5236,5237","fold":1}},{"content":"Code composant categories.index","children":[{"content":"Code de base","children":[{"content":"<pre><code class=\"language-php\">&lt;?php\nuse Livewire\\Volt\\Component;\nuse App\\Models\\Category;\nuse Livewire\\WithPagination;\nuse Livewire\\Attributes\\Layout;\n\nnew #[Layout('components.layouts.admin')] \nclass extends Component {\n    use WithPagination;\n\n    public array $sortBy = ['column' =&gt; 'title', 'direction' =&gt; 'asc'];\n\n    public function headers(): array {\n        return [['key' =&gt; 'title', 'label' =&gt; __('Title')], ['key' =&gt; 'slug', 'label' =&gt; 'Slug']];\n    }\n  \n    public function with(): array {\n        return [\n            'categories' =&gt; Category::orderBy(...array_values($this-&gt;sortBy))-&gt;paginate(10),\n            'headers'    =&gt; $this-&gt;headers(),\n        ];\n    }\n  \n}; ?&gt;\n\n&lt;div&gt;\n    &lt;x-header title=\"{{ __('Categories') }}\" separator progress-indicator&gt;\n        &lt;x-slot:actions class=\"lg:hidden\"&gt;\n            &lt;x-button icon=\"s-building-office-2\" label=\"{{ __('Dashboard') }}\" class=\"btn-outline\"\n                link=\"{{ route('admin') }}\" /&gt;\n        &lt;/x-slot:actions&gt;\n    &lt;/x-header&gt;\n    &lt;x-card&gt;\n        &lt;x-table striped :headers=\"$headers\" :rows=\"$categories\" :sort-by=\"$sortBy\" link=\"#\"\n            with-pagination&gt;\n        &lt;/x-table&gt;\n    &lt;/x-card&gt;\n&lt;/div&gt;\n</code></pre>","children":[]}],"payload":{"lines":"5244,5245","fold":1}},{"content":"Ajout bouton supprimer catégorie","children":[{"content":"HTML Supprimer catégorie","children":[{"content":"<pre><code class=\"language-php\">&lt;x-table striped :headers=\"$headers\" :rows=\"$categories\" :sort-by=\"$sortBy\" link=\"#\"\n    with-pagination&gt;\n        @scope('actions', $category)\n        &lt;x-popover&gt;\n            &lt;x-slot:trigger&gt;\n                &lt;x-button icon=\"o-trash\" wire:click=\"delete({{ $category-&gt;id }})\"\n                    wire:confirm=\"{{ __('Are you sure to delete this category?') }}\" spinner\n                    class=\"text-red-500 btn-ghost btn-sm\" /&gt;\n            &lt;/x-slot:trigger&gt;\n            &lt;x-slot:content class=\"pop-small\"&gt;\n                @lang('Delete')\n            &lt;/x-slot:content&gt;\n        &lt;/x-popover&gt;\n    @endscope\n&lt;/x-table&gt;\n</code></pre>","children":[]}],"payload":{"lines":"5289,5290"}},{"content":"Logique Supprimer catégorie","children":[{"content":"<pre><code class=\"language-php\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">delete</span>(<span class=\"hljs-params\">Category <span class=\"hljs-variable\">$category</span></span>): <span class=\"hljs-title\">void</span> </span>{\n    <span class=\"hljs-variable\">$category</span>-&gt;<span class=\"hljs-title function_ invoke__\">delete</span>();\n    <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">success</span>(<span class=\"hljs-title function_ invoke__\">__</span>(<span class=\"hljs-string\">'Category deleted with success.'</span>));\n}\n</code></pre>","children":[]}],"payload":{"lines":"5309,5310"}},{"content":"Traduction Supprimer catégorie","children":[{"content":"<pre><code class=\"language-json\"><span class=\"hljs-attr\">\"Are you sure to delete this category?\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Êtes-vous sûr de vouloir supprimer cette catégorie ?\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Category deleted with success.\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Catégorie supprimée avec succès.\"</span>\n</code></pre>","children":[]}],"payload":{"lines":"5318,5319"}}],"payload":{"lines":"5287,5288","fold":1}},{"content":"Formulaire catégorie","children":[{"content":"Composant formulaire creation/modification","children":[{"content":"<pre><code class=\"language-php\">php artisan make:volt admin/categories/category-form\n</code></pre>","children":[]}],"payload":{"lines":"5327,5328"}},{"content":"HTML admin/categories/category-form.blade.php","children":[{"content":"<pre><code class=\"language-php\">&lt;x-form wire:submit=\"save\"&gt;\n    &lt;x-input label=\"{{ __('Title') }}\" wire:model.debounce.500ms=\"title\" wire:change=\"$refresh\" /&gt;\n    &lt;x-input type=\"text\" wire:model=\"slug\" label=\"{{ __('Slug') }}\" /&gt;\n    &lt;x-slot:actions&gt;\n        &lt;x-button label=\"{{ __('Save') }}\" icon=\"o-paper-airplane\" spinner=\"save\" type=\"submit\"\n            class=\"btn-primary\" /&gt;\n    &lt;/x-slot:actions&gt;\n&lt;/x-form&gt;\n</code></pre>","children":[]}],"payload":{"lines":"5333,5334"}},{"content":"Ajout du formulaire Créer catégorie (categories.index)","children":[{"content":"<pre><code class=\"language-php\">    &lt;x-card title=<span class=\"hljs-string\">\"{{ __('Create a new category') }}\"</span>&gt;\n        @<span class=\"hljs-keyword\">include</span>(<span class=\"hljs-string\">'livewire.admin.categories.category-form'</span>)\n    &lt;/x-card&gt;\n&lt;/div&gt;\n</code></pre>","children":[]}],"payload":{"lines":"5346,5347"}},{"content":"Complément logique validation catégorie","children":[{"content":"<pre><code class=\"language-php\">...\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Mary</span>\\<span class=\"hljs-title\">Traits</span>\\<span class=\"hljs-title\">Toast</span>;\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Support</span>\\<span class=\"hljs-title\">Str</span>;\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Livewire</span>\\<span class=\"hljs-title\">Attributes</span>\\{<span class=\"hljs-title\">Layout</span>, <span class=\"hljs-title\">Validate</span>};\n\n<span class=\"hljs-keyword\">new</span> <span class=\"hljs-meta\">#[Layout</span>(<span class=\"hljs-string\">'components.layouts.admin'</span>)<span class=\"hljs-meta\">]</span> \n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">Component</span> </span>{\n    <span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Toast</span>, <span class=\"hljs-title\">WithPagination</span>;\n    ...\n    <span class=\"hljs-meta\">#[Validate</span>(<span class=\"hljs-string\">'required|max:255|unique:categories,title'</span>)<span class=\"hljs-meta\">]</span>\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">string</span> <span class=\"hljs-variable\">$title</span> = <span class=\"hljs-string\">''</span>;\n  \n    <span class=\"hljs-meta\">#[Validate</span>(<span class=\"hljs-string\">'required|max:255|unique:posts,slug|regex:/^[a-z0-9]+(?:-[a-z0-9]+)*$/'</span>)<span class=\"hljs-meta\">]</span>\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">string</span> <span class=\"hljs-variable\">$slug</span> = <span class=\"hljs-string\">''</span>;\n  \n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">updatedTitle</span>(<span class=\"hljs-params\"><span class=\"hljs-variable\">$value</span></span>): <span class=\"hljs-title\">void</span> </span>{\n        <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">generateSlug</span>(<span class=\"hljs-variable\">$value</span>);\n    }\n  \n    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">generateSlug</span>(<span class=\"hljs-params\"><span class=\"hljs-keyword\">string</span> <span class=\"hljs-variable\">$title</span></span>): <span class=\"hljs-title\">void</span> </span>{\n        <span class=\"hljs-variable language_\">$this</span>-&gt;slug = <span class=\"hljs-title class_\">Str</span>::<span class=\"hljs-title function_ invoke__\">of</span>(<span class=\"hljs-variable\">$title</span>)-&gt;<span class=\"hljs-title function_ invoke__\">slug</span>(<span class=\"hljs-string\">'-'</span>);\n    }\n  \n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">save</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">void</span> </span>{\n        <span class=\"hljs-variable\">$data</span> = <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">validate</span>();\n        <span class=\"hljs-title class_\">Category</span>::<span class=\"hljs-title function_ invoke__\">create</span>(<span class=\"hljs-variable\">$data</span>);\n        <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">success</span>(<span class=\"hljs-title function_ invoke__\">__</span>(<span class=\"hljs-string\">'Category created with success.'</span>));\n  }\n</code></pre>","children":[]}],"payload":{"lines":"5355,5356"}},{"content":"Traduction Créer catégorie","children":[{"content":"<pre><code class=\"language-json\"><span class=\"hljs-attr\">\"Create a new category\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Créer une nouvelle catégorie\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Category created with success.\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Catégorie créée avec succès.\"</span>\n</code></pre>","children":[]}],"payload":{"lines":"5388,5389"}}],"payload":{"lines":"5325,5326","fold":1}}],"payload":{"lines":"5242,5243","fold":1}},{"content":"Modification d'une catégorie","children":[{"content":"Route pour la modification de catégorie","children":[{"content":"<pre><code class=\"language-php\"><span class=\"hljs-title class_\">Route</span>::<span class=\"hljs-title function_ invoke__\">middleware</span>(<span class=\"hljs-title class_\">IsAdmin</span>::<span class=\"hljs-variable language_\">class</span>)-&gt;<span class=\"hljs-title function_ invoke__\">group</span>(function () {\n    ...\n    <span class=\"hljs-title class_\">Volt</span>::<span class=\"hljs-title function_ invoke__\">route</span>(<span class=\"hljs-string\">'/categories/{category}/edit'</span>, <span class=\"hljs-string\">'admin.categories.edit'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">name</span>(<span class=\"hljs-string\">'categories.edit'</span>);\n});\n</code></pre>","children":[]}],"payload":{"lines":"5397,5398"}},{"content":"Lien dans tableau des catégories","children":[{"content":"<pre><code class=\"language-php\"><span class=\"hljs-comment\">// admin/categories/index</span>\n&lt;x-table striped :headers=<span class=\"hljs-string\">\"<span class=\"hljs-subst\">$headers</span>\"</span> :rows=<span class=\"hljs-string\">\"<span class=\"hljs-subst\">$categories</span>\"</span> :sort-by=<span class=\"hljs-string\">\"<span class=\"hljs-subst\">$sortBy</span>\"</span> link=<span class=\"hljs-string\">\"/admin/categories/{id}/edit\"</span> with-pagination&gt;\n</code></pre>","children":[]}],"payload":{"lines":"5406,5407"}},{"content":"Création du composant modification","children":[{"content":"<pre><code class=\"language-php\">php artisan make:volt admin/categories/edit --<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span>\n</span></code></pre>","children":[]}],"payload":{"lines":"5413,5414"}},{"content":"Code du composant d'édition","children":[{"content":"<pre><code class=\"language-php\">&lt;?php\nuse Mary\\Traits\\Toast;\nuse App\\Models\\Category;\nuse Illuminate\\Support\\Str;\nuse Livewire\\Volt\\Component;\nuse Livewire\\Attributes\\Layout;\nuse Illuminate\\Validation\\Rule;\n\nnew #[Layout('components.layouts.admin')] \nclass extends Component {\n  use Toast;\n  \n  public Category $category;\n  public string $title = '';\n  public string $slug  = '';\n  \n  public function mount(Category $category): void {\n    $this-&gt;category = $category;\n    $this-&gt;fill($this-&gt;category-&gt;toArray());\n  }\n  \n  public function updatedTitle($value): void {\n    $this-&gt;generateSlug($value);\n  }\n  \n  public function save(): void {\n    $data = $this-&gt;validate($this-&gt;rules());\n    $this-&gt;category-&gt;update($data);\n    $this-&gt;success(__('Category updated successfully.'), redirectTo: '/admin/categories/index');\n  }\n  \n  protected function rules(): array {\n  return [\n      'title' =&gt; 'required|string|max:255',\n      'slug'  =&gt; ['required', 'string', 'max:255', 'regex:/^[a-z0-9]+(?:-[a-z0-9]+)*$/', Rule::unique('categories')-&gt;ignore($this-&gt;category-&gt;id)],\n  ];\n  }\n  \n  private function generateSlug(string $title): void {\n    $this-&gt;slug = Str::of($title)-&gt;slug('-');\n  }\n}; ?&gt;\n\n&lt;div&gt;\n    &lt;x-header title=\"{{ __('Edit a category') }}\" separator progress-indicator&gt;\n        &lt;x-slot:actions class=\"lg:hidden\"&gt;\n            &lt;x-button icon=\"s-building-office-2\" label=\"{{ __('Dashboard') }}\" class=\"btn-outline\"\n                link=\"{{ route('admin') }}\" /&gt;\n        &lt;/x-slot:actions&gt;\n    &lt;/x-header&gt;\n    &lt;x-card&gt;\n        @include('livewire.admin.categories.category-form')\n    &lt;/x-card&gt;\n&lt;/div&gt;\n</code></pre>","children":[]}],"payload":{"lines":"5419,5420","fold":1}},{"content":"Traduction modification de catégorie","children":[{"content":"<pre><code class=\"language-json\"><span class=\"hljs-attr\">\"Category updated successfully.\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Catégorie mise à jour avec succès.\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Edit a category\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Modifier une catégorie\"</span>\n</code></pre>","children":[]}],"payload":{"lines":"5478,5479"}}],"payload":{"lines":"5395,5396","fold":1}},{"content":"Réf.: <em><strong><a href=\"https://laravel.sillo.org/posts/mon-cms-les-categories\">https://laravel.sillo.org/posts/mon-cms-les-categories</a></strong></em>","children":[],"payload":{"lines":"5485,5486"}}],"payload":{"lines":"5204,5205","fold":1}},{"content":"- Les Pages","children":[{"content":"Liste des pages","children":[{"content":"Route Pages","children":[{"content":"<pre data-lines=\"5493,5494\"><code>Groupe middleware IsAdminOrRedac &gt; IsAdmin :\n</code></pre>","children":[],"payload":{"lines":"5493,5494"}},{"content":"<pre><code class=\"language-php\"><span class=\"hljs-title class_\">Volt</span>::<span class=\"hljs-title function_ invoke__\">route</span>(<span class=\"hljs-string\">'/pages/index'</span>, <span class=\"hljs-string\">'admin.pages.index'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">name</span>(<span class=\"hljs-string\">'pages.index'</span>);\n</code></pre>","children":[]}],"payload":{"lines":"5491,5492","fold":1}},{"content":"Navigation Pages","children":[{"content":"<pre data-lines=\"5501,5502\"><code>Lien Pages dans le pavé en haut du dashboard (admin.index) :\n</code></pre>","children":[],"payload":{"lines":"5501,5502"}},{"content":"<pre><code class=\"language-php\"> &lt;a href=\"{{ route('pages.index') }}\" class=\"flex-grow\" title=\"{{ __('All pages') }}\"&gt;\n    &lt;x-stat title=\"{{ __('Pages') }}\" value=\"{{ $pages-&gt;count() }}\" icon=\"s-document\" class=\"shadow-hover\" /&gt;\n&lt;/a&gt;\n</code></pre>","children":[]},{"content":"<pre data-lines=\"5509,5510\"><code>Lien Pages dans admin.sidebar :\n</code></pre>","children":[],"payload":{"lines":"5509,5510"}},{"content":"<pre><code class=\"language-php\">...&lt;/x-menu-sub&gt;\n@<span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title class_\">Auth</span>::<span class=\"hljs-title function_ invoke__\">user</span>()-&gt;<span class=\"hljs-title function_ invoke__\">isAdmin</span>())\n    &lt;x-menu-sub title=<span class=\"hljs-string\">\"{{ __('Pages') }}\"</span> icon=<span class=\"hljs-string\">\"s-document\"</span>&gt;\n        &lt;x-menu-item title=<span class=\"hljs-string\">\"{{ __('All pages') }}\"</span> link=<span class=\"hljs-string\">\"{{ route('pages.index') }}\"</span> /&gt;\n    &lt;/x-menu-sub&gt;\n@<span class=\"hljs-keyword\">endif</span>\n...\n</code></pre>","children":[]},{"content":"<pre data-lines=\"5521,5522\"><code>Traduction Pages :\n</code></pre>","children":[],"payload":{"lines":"5521,5522"}},{"content":"<pre><code class=\"language-json\"><span class=\"hljs-attr\">\"All pages\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Toutes les pages\"</span><span class=\"hljs-punctuation\">,</span>\n</code></pre>","children":[]}],"payload":{"lines":"5499,5500","fold":1}},{"content":"Composant Pages","children":[{"content":"<pre><code class=\"language-php\">php artisan make:volt admin/pages/index --<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span>\n</span></code></pre>","children":[]},{"content":"<pre><code class=\"language-php\">&lt;?php\nuse App\\Models\\Page;\nuse Livewire\\Attributes\\{Layout, Title};\nuse Livewire\\Volt\\Component;\nuse Livewire\\WithPagination;\nuse Mary\\Traits\\Toast;\n\nnew #[Title('Pages'), Layout('components.layouts.admin')] \nclass extends Component {\n  use Toast, WithPagination;\n  \n  public function headers(): array {\n    return [\n      ['key' =&gt; 'title',  'label' =&gt; __('Title')],\n      ['key' =&gt; 'slug',   'label' =&gt; 'Slug'],\n      ['key' =&gt; 'active', 'label' =&gt; __('Published')]\n    ];\n  }\n  \n  public function deletePage(Page $page): void {\n    $page-&gt;delete();\n    $this-&gt;success(__('Page deleted'));\n  }\n  \n  public function with(): array {\n    return [\n      'pages'   =&gt; Page::select('id', 'title', 'slug', 'active')-&gt;get(),\n      'headers' =&gt; $this-&gt;headers(),\n    ];\n  }\n}; ?&gt;\n\n&lt;div&gt;\n    &lt;x-header title=\"{{ __('Pages') }}\" separator progress-indicator &gt;\n        &lt;x-slot:actions class=\"lg:hidden\"&gt;\n            &lt;x-button icon=\"s-building-office-2\" label=\"{{ __('Dashboard') }}\" class=\"btn-outline\"\n                link=\"{{ route('admin') }}\" /&gt;\n            &lt;x-button icon=\"c-document-plus\" label=\"{{ __('Add a page') }}\" class=\"btn-outline\"\n                link=\"#\" /&gt;\n        &lt;/x-slot:actions&gt;\n    &lt;/x-header&gt;\n\n    &lt;x-card&gt;\n        &lt;x-table striped :headers=\"$headers\" :rows=\"$pages\" link=\"#\"&gt;\n            @scope('cell_active', $page)\n                @if ($page-&gt;active)\n                    &lt;x-icon name=\"o-check-circle\" /&gt;\n                @endif\n            @endscope\n            @scope('actions', $page)\n                &lt;x-popover&gt;\n                    &lt;x-slot:trigger&gt;\n                        &lt;x-button icon=\"o-trash\" wire:click=\"deletePage({{ $page-&gt;id }})\"\n                            wire:confirm=\"{{ __('Are you sure to delete this page?') }}\" spinner\n                            class=\"text-red-500 btn-ghost btn-sm\" /&gt;\n                    &lt;/x-slot:trigger&gt;\n                    &lt;x-slot:content class=\"pop-small\"&gt;\n                        @lang('Delete')\n                    &lt;/x-slot:content&gt;\n                &lt;/x-popover&gt;\n            @endscope\n        &lt;/x-table&gt;\n    &lt;/x-card&gt;\n&lt;/div&gt;\n</code></pre>","children":[]},{"content":"<pre><code class=\"language-php\"><span class=\"hljs-string\">\"All pages\"</span>: <span class=\"hljs-string\">\"Toutes les pages\"</span>,\n<span class=\"hljs-string\">\"Add a page\"</span>: <span class=\"hljs-string\">\"Ajouter une page\"</span>,\n<span class=\"hljs-string\">\"Are you sure to delete this page?\"</span>: <span class=\"hljs-string\">\"Êtes-vous sûr de vouloir supprimer cette page ?\"</span>,\n<span class=\"hljs-string\">\"Page deleted\"</span>: <span class=\"hljs-string\">\"Page effacée avec succès.\"</span>\n</code></pre>","children":[]}],"payload":{"lines":"5527,5528","fold":1}}],"payload":{"lines":"5489,5490","fold":1}},{"content":"Création pages","children":[{"content":"Route Ajouter Pages","children":[{"content":"<pre><code class=\"language-php\"><span class=\"hljs-comment\">// Groupe middleware IsAdminOrRedac &gt; IsAdmin</span>\n<span class=\"hljs-title class_\">Volt</span>::<span class=\"hljs-title function_ invoke__\">route</span>(<span class=\"hljs-string\">'/pages/create'</span>, <span class=\"hljs-string\">'admin.pages.create'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">name</span>(<span class=\"hljs-string\">'pages.create'</span>);\n</code></pre>","children":[]}],"payload":{"lines":"5609,5610","fold":1}},{"content":"Liens Ajouter Pages","children":[{"content":"<pre data-lines=\"5618,5619\"><code>admin.pages.index :\n</code></pre>","children":[],"payload":{"lines":"5618,5619"}},{"content":"<pre><code class=\"language-php\">&lt;x-button icon=\"c-document-plus\" label=\"{{ __('Add a page') }}\" class=\"btn-outline\" link=\"{{ route('pages.create') }}\" /&gt;\n</code></pre>","children":[]},{"content":"<pre data-lines=\"5624,5625\"><code>admin.sidebar :\n</code></pre>","children":[],"payload":{"lines":"5624,5625"}},{"content":"<pre><code class=\"language-php\">@<span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title class_\">Auth</span>::<span class=\"hljs-title function_ invoke__\">user</span>()-&gt;<span class=\"hljs-title function_ invoke__\">isAdmin</span>())\n    &lt;x-menu-sub title=<span class=\"hljs-string\">\"{{ __('Pages') }}\"</span> icon=<span class=\"hljs-string\">\"s-document\"</span>&gt;\n        &lt;x-menu-item title=<span class=\"hljs-string\">\"{{ __('All pages') }}\"</span> link=<span class=\"hljs-string\">\"{{ route('pages.index') }}\"</span> /&gt;\n        &lt;x-menu-item title=<span class=\"hljs-string\">\"{{ __('Add a page') }}\"</span> link=<span class=\"hljs-string\">\"{{ route('pages.create') }}\"</span> /&gt;\n    &lt;/x-menu-sub&gt;\n@<span class=\"hljs-keyword\">endif</span>\n</code></pre>","children":[]}],"payload":{"lines":"5616,5617","fold":1}},{"content":"Formulaire Pages (Création &amp; modification)","children":[{"content":"<pre data-lines=\"5637,5638\"><code>Créer pages/page-form.blade.php :\n</code></pre>","children":[],"payload":{"lines":"5637,5638"}},{"content":"<pre><code class=\"language-php\">&lt;x-card&gt;\n    &lt;x-form wire:submit=\"save\"&gt;\n        &lt;x-input type=\"text\" wire:model=\"title\" label=\"{{ __('Title') }}\"\n            placeholder=\"{{ __('Enter the title') }}\" wire:change=\"$refresh\" /&gt;\n        &lt;x-input type=\"text\" wire:model=\"slug\" label=\"{{ __('Slug') }}\" /&gt;&lt;br&gt;\n        &lt;x-checkbox label=\"{{ __('Published') }}\" wire:model=\"active\" /&gt;&lt;br&gt;\n        &lt;x-editor wire:model=\"body\" label=\"{{ __('Content') }}\" :config=\"config('tinymce.config')\"\n            folder=\"{{ 'photos/' . now()-&gt;format('Y/m') }}\" /&gt;\n        &lt;x-card title=\"{{ __('SEO') }}\" shadow separator&gt;\n            &lt;x-input placeholder=\"{{ __('Title') }}\" wire:model=\"seo_title\" hint=\"{{ __('Max 70 chars') }}\" /&gt;\n            &lt;br&gt;\n            &lt;x-textarea label=\"{{ __('META Description') }}\" wire:model=\"meta_description\"\n                hint=\"{{ __('Max 160 chars') }}\" rows=\"2\" inline /&gt;\n            &lt;br&gt;\n            &lt;x-textarea label=\"{{ __('META Keywords') }}\" wire:model=\"meta_keywords\"\n                hint=\"{{ __('Keywords separated by comma') }}\" rows=\"1\" inline /&gt;\n        &lt;/x-card&gt;\n        &lt;x-slot:actions&gt;\n            &lt;x-button label=\"{{ __('Save') }}\" icon=\"o-paper-airplane\" spinner=\"save\" type=\"submit\"\n                class=\"btn-primary\" /&gt;\n        &lt;/x-slot:actions&gt;\n    &lt;/x-form&gt;\n&lt;/x-card&gt;\n</code></pre>","children":[]}],"payload":{"lines":"5635,5636","fold":1}},{"content":"CLI Creation Pages","children":[{"content":"<pre><code class=\"language-php\">php artisan make:volt admin/pages/create --<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span>\n</span></code></pre>","children":[]}],"payload":{"lines":"5665,5666","fold":1}},{"content":"Code composant Créer Pages","children":[{"content":"<pre><code class=\"language-php\">&lt;?php\nuse App\\Models\\Page;\nuse illuminate\\Support\\Str;\nuse Livewire\\Attributes\\{Layout, Validate, Title};\nuse Livewire\\Volt\\Component;\nuse Mary\\Traits\\Toast;\n\nnew #[Title('Create Page'), Layout('components.layouts.admin')] \nclass extends Component {\n    use Toast;\n  \n    #[Validate('required|max:65000')]\n    public string $body = '';\n  \n    #[Validate('required|max:255')]\n    public string $title = '';\n  \n    #[Validate('required|max:255|unique:posts,slug|regex:/^[a-z0-9]+(?:-[a-z0-9]+)*$/')]\n    public string $slug = '';\n  \n    #[Validate('required')]\n    public bool $active = false;\n  \n    #[Validate('required|max:70')]\n    public string $seo_title = '';\n  \n    #[Validate('required|max:160')]\n    public string $meta_description = '';\n  \n    #[Validate('required|regex:/^[A-Za-z0-9-éèàù]{1,50}(, ?[A-Za-z0-9-éèàù]{1,50})*$/')]\n    public string $meta_keywords = '';\n  \n    public function updatedTitle($value): void {\n        $this-&gt;generateSlug($value);\n        $this-&gt;seo_title = $value;\n    }\n  \n    public function save() {\n        $data = $this-&gt;validate();\n        Page::create($data);\n        $this-&gt;success(__('Page added with success.'), redirectTo: '/admin/pages/index');\n    }\n  \n    private function generateSlug(string $title): void {\n        $this-&gt;slug = Str::of($title)-&gt;slug('-');\n    }\n}; ?&gt;\n\n&lt;div&gt;\n    &lt;x-header title=\"{{ __('Add a page') }}\" separator progress-indicator&gt;\n        &lt;x-slot:actions class=\"lg:hidden\"&gt;\n            &lt;x-button icon=\"s-building-office-2\" label=\"{{ __('Dashboard') }}\" class=\"btn-outline\"\n                link=\"{{ route('admin') }}\" /&gt;\n        &lt;/x-slot:actions&gt;\n    &lt;/x-header&gt;\n    @include('livewire.admin.pages.page-form')\n&lt;/div&gt;\n</code></pre>","children":[]}],"payload":{"lines":"5671,5672","fold":1}},{"content":"Traduction Ajouter Pages","children":[{"content":"<pre><code class=\"language-json\"><span class=\"hljs-attr\">\"Page added with success.\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Page ajoutée avec succès.\"</span>\n</code></pre>","children":[]}],"payload":{"lines":"5733,5734","fold":1}}],"payload":{"lines":"5607,5608","fold":1}},{"content":"Modification (édition) pages","children":[{"content":"Route Éditer Pages","children":[{"content":"<pre data-lines=\"5743,5744\"><code>Groupe middleware IsAdminOrRedac &gt; IsAdmin :\n</code></pre>","children":[],"payload":{"lines":"5743,5744"}},{"content":"<pre><code class=\"language-php\"><span class=\"hljs-title class_\">Volt</span>::<span class=\"hljs-title function_ invoke__\">route</span>(<span class=\"hljs-string\">'/pages/{page:slug}/edit'</span>, <span class=\"hljs-string\">'admin.pages.edit'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">name</span>(<span class=\"hljs-string\">'pages.edit'</span>);\n</code></pre>","children":[]}],"payload":{"lines":"5741,5742","fold":1}},{"content":"Lien Éditer Pages","children":[{"content":"<pre data-lines=\"5751,5752\"><code>admin.pages.index :\n</code></pre>","children":[],"payload":{"lines":"5751,5752"}},{"content":"<pre><code class=\"language-php\">&lt;x-table striped :headers=<span class=\"hljs-string\">\"<span class=\"hljs-subst\">$headers</span>\"</span> :rows=<span class=\"hljs-string\">\"<span class=\"hljs-subst\">$pages</span>\"</span> link=<span class=\"hljs-string\">\"/admin/pages/{slug}/edit\"</span>&gt;\n</code></pre>","children":[]}],"payload":{"lines":"5749,5750","fold":1}},{"content":"CLI édition Pages","children":[{"content":"<pre><code class=\"language-php\">php artisan make:volt admin/pages/edit --<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span>\n</span></code></pre>","children":[]}],"payload":{"lines":"5757,5758","fold":1}},{"content":"Code Éditer Pages","children":[{"content":"<pre><code class=\"language-php\">&lt;?php\nuse App\\Models\\Page;\nuse illuminate\\Support\\Str;\nuse Illuminate\\Validation\\Rule;\nuse Livewire\\Attributes\\{Layout, Title};\nuse Livewire\\Volt\\Component;\nuse Mary\\Traits\\Toast;\n\nnew #[Title('Edit Page'), Layout('components.layouts.admin')] \nclass extends Component {\n    use Toast;\n  \n    public Page $page;\n    public string $body             = '';\n    public string $title            = '';\n    public string $slug             = '';\n    public bool $active             = false;\n    public string $seo_title        = '';\n    public string $meta_description = '';\n    public string $meta_keywords    = '';\n  \n    public function mount(Page $page): void {\n        $this-&gt;page = $page;\n        $this-&gt;fill($this-&gt;page);\n    }\n  \n    public function updatedTitle($value): void {\n        $this-&gt;generateSlug($value);\n    }\n  \n    public function save() {\n        $data = $this-&gt;validate([\n            'title'            =&gt; 'required|string|max:255',\n            'body'             =&gt; 'required|max:65000',\n            'active'           =&gt; 'required',\n            'slug'             =&gt; ['required', 'string', 'max:255', 'regex:/^[a-z0-9]+(?:-[a-z0-9]+)*$/', Rule::unique('pages')-&gt;ignore($this-&gt;page-&gt;id)],\n            'seo_title'        =&gt; 'required|max:70',\n            'meta_description' =&gt; 'required|max:160',\n            'meta_keywords'    =&gt; 'required|regex:/^[A-Za-z0-9-éèàù]{1,50}?(,[A-Za-z0-9-éèàù]{1,50})*$/',\n        ]);\n  \n        $this-&gt;page-&gt;update($data);\n      \n        $this-&gt;success(__('Page edited with success.'), redirectTo: '/admin/pages/index');\n    }\n  \n    private function generateSlug(string $title): void {\n        $this-&gt;slug = Str::of($title)-&gt;slug('-');\n    }\n}; ?&gt;\n\n&lt;div&gt;\n    &lt;x-header title=\"{{ __('Edit a page') }}\" shadow separator progress-indicator&gt;\n        &lt;x-slot:actions class=\"lg:hidden\"&gt;\n            &lt;x-button icon=\"s-building-office-2\" label=\"{{ __('Dashboard') }}\" class=\"btn-outline\"\n                link=\"{{ route('admin') }}\" /&gt;\n        &lt;/x-slot:actions&gt;\n    &lt;/x-header&gt;\n    @include('livewire.admin.pages.page-form')\n&lt;/div&gt;\n</code></pre>","children":[]}],"payload":{"lines":"5763,5764","fold":1}},{"content":"Traduction Éditer Pages","children":[{"content":"<pre><code class=\"language-json\"><span class=\"hljs-attr\">\"Page edited with success.\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Page mise à jour avec succès.\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Edit a page\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Modifier une page\"</span>\n</code></pre>","children":[]}],"payload":{"lines":"5828,5829","fold":1}}],"payload":{"lines":"5739,5740","fold":1}},{"content":"Réf.: <em><strong><a href=\"https://laravel.sillo.org/posts/mon-cms-les-pages\">https://laravel.sillo.org/posts/mon-cms-les-pages</a></strong></em>","children":[],"payload":{"lines":"5835,5836"}}],"payload":{"lines":"5487,5488","fold":1}},{"content":"- Les Comptes (Users)","children":[{"content":"Liste des comptes","children":[{"content":"Route Comptes","children":[{"content":"<pre><code class=\"language-php\"><span class=\"hljs-title class_\">Route</span>::<span class=\"hljs-title function_ invoke__\">middleware</span>(<span class=\"hljs-title class_\">IsAdmin</span>::<span class=\"hljs-variable language_\">class</span>)-&gt;<span class=\"hljs-title function_ invoke__\">group</span>(function () {\n    ...\n    <span class=\"hljs-title class_\">Volt</span>::<span class=\"hljs-title function_ invoke__\">route</span>(<span class=\"hljs-string\">'/users/index'</span>, <span class=\"hljs-string\">'admin.users.index'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">name</span>(<span class=\"hljs-string\">'users.index'</span>);\n});\n</code></pre>","children":[]}],"payload":{"lines":"5841,5842","fold":1}},{"content":"Liens Comptes","children":[{"content":"<pre data-lines=\"5852,5853\"><code>admin.sidebar :\n</code></pre>","children":[],"payload":{"lines":"5852,5853"}},{"content":"<pre><code class=\"language-php\">@<span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title class_\">Auth</span>::<span class=\"hljs-title function_ invoke__\">user</span>()-&gt;<span class=\"hljs-title function_ invoke__\">isAdmin</span>())\n    ...\n    &lt;x-menu-item icon=<span class=\"hljs-string\">\"s-user\"</span> title=<span class=\"hljs-string\">\"{{ __('Accounts') }}\"</span> link=<span class=\"hljs-string\">\"{{ route('users.index') }}\"</span> /&gt;\n@<span class=\"hljs-keyword\">endif</span>\n</code></pre>","children":[]},{"content":"<pre data-lines=\"5861,5862\"><code>admin.index (Pavé) :\n</code></pre>","children":[],"payload":{"lines":"5861,5862"}},{"content":"<pre data-lines=\"5870,5871\"><code>Traduction lien dans pavé :\n</code></pre>","children":[],"payload":{"lines":"5870,5871"}},{"content":"<pre><code class=\"language-php\"><span class=\"hljs-string\">\"Users list\"</span>:<span class=\"hljs-string\">\"Tous les utilisateurs\"</span>\n</code></pre>","children":[]}],"payload":{"lines":"5850,5851","fold":1}},{"content":"Composant Comptes","children":[{"content":"Création composant Comptes","children":[{"content":"<pre><code class=\"language-php\">php artisan make:volt admin/users/index --<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span>\n</span></code></pre>","children":[]}],"payload":{"lines":"5878,5879","fold":1}},{"content":"Code Comptes","children":[{"content":"<pre><code class=\"language-php\">&lt;?php\nuse App\\Models\\User;\nuse Illuminate\\Pagination\\LengthAwarePaginator;\nuse Livewire\\Attributes\\{Layout, Title};\nuse Livewire\\Volt\\Component;\nuse Livewire\\WithPagination;\nuse Mary\\Traits\\Toast;\n\nnew #[Title('Users'), Layout('components.layouts.admin')] class extends Component {\n    use Toast;\n    use WithPagination;\n  \n    public string $search = '';\n    public array $sortBy  = ['column' =&gt; 'name', 'direction' =&gt; 'asc'];\n    public string $role   = 'all';\n    public array $roles   = [];\n  \n    public function deleteUser(User $user): void {\n        $user-&gt;delete();\n        $this-&gt;success($user-&gt;name . ' ' . __('deleted'));\n    }\n  \n    // Définir les en-têtes de table.\n    public function headers(): array {\n        $headers = [\n            ['key' =&gt; 'name',  'label' =&gt; __('Name')],\n            ['key' =&gt; 'email', 'label' =&gt; 'E-mail'],\n            ['key' =&gt; 'role',  'label' =&gt; __('Role')],\n            ['key' =&gt; 'valid', 'label' =&gt; __('Valid')],\n        ];\n      \n        if ('user' !== $this-&gt;role) {\n            $headers = array_merge($headers, [\n                ['key' =&gt; 'posts_count', 'label' =&gt; __('Posts')],\n            ]);\n        }\n      \n        return array_merge($headers, [\n            ['key' =&gt; 'comments_count', 'label' =&gt; __('Comments')],\n            ['key' =&gt; 'created_at',     'label' =&gt; __('Registration')],\n      ]);\n    }\n  \n    public function users(): LengthAwarePaginator {\n        $query = User::query()\n            -&gt;when($this-&gt;search, fn ($q) =&gt; $q\n                -&gt;where('name', 'like', \"%{$this-&gt;search}%\")\n                -&gt;orWhere('email', 'like', \"%{$this-&gt;search}%\"))\n            -&gt;when('all' !== $this-&gt;role, fn ($q) =&gt; $q\n                -&gt;where('role', $this-&gt;role))\n            -&gt;withCount('posts', 'comments')\n            -&gt;orderBy(...array_values($this-&gt;sortBy));\n      \n        $users = $query-&gt;paginate(10);\n      \n        $userCountsByRole = User::selectRaw('role, count(*) as total')\n            -&gt;groupBy('role')\n            -&gt;pluck('total', 'role');\n      \n        $totalUsers = $userCountsByRole-&gt;sum();\n      \n        $this-&gt;roles = collect([\n            'all'   =&gt; __('All') . \" ({$totalUsers})\",\n            'admin' =&gt; __('Administrators'),\n            'redac' =&gt; __('Redactors'),\n            'user'  =&gt; __('Users'),\n        ])\n        -&gt;map(function ($roleName, $roleId) use ($userCountsByRole) {\n            $count = $userCountsByRole-&gt;get($roleId, 0);\n      \n            return [\n                'name' =&gt; 'all' === $roleId ? $roleName : \"{$roleName} ({$count})\",\n                'id'   =&gt; $roleId,\n            ];\n        })\n        -&gt;values()\n        -&gt;all();\n  \n        return $users;\n    }\n  \n        public function with(): array {\n            return [\n                'users'   =&gt; $this-&gt;users(),\n                'headers' =&gt; $this-&gt;headers(),\n        ];\n    }\n}; ?&gt;\n\n&lt;div&gt;\n    &lt;x-header separator progress-indicator&gt;\n        &lt;x-slot:title&gt;\n            &lt;a href=\"/admin/dashboard\" title=\"{{ __('Back to Dashboard') }}\"&gt;\n                {{ __('Users') }}\n            &lt;/a&gt;\n        &lt;/x-slot:title&gt;\n        &lt;x-slot:middle class=\"!justify-end\"&gt;\n            &lt;x-input placeholder=\"{{ __('Search') }}...\" wire:model.live.debounce=\"search\" clearable\n                icon=\"o-magnifying-glass\" /&gt;\n        &lt;/x-slot:middle&gt;\n    &lt;/x-header&gt;\n\n\n    &lt;x-radio inline :options=\"$roles\" wire:model=\"role\" wire:change=\"$refresh\" /&gt;\n    &lt;br&gt;\n\n    &lt;x-card&gt;\n\n        @if (count($users))\n\n            &lt;x-table striped :headers=\"$headers\" :rows=\"$users\" :sort-by=\"$sortBy\" link=\"/admin/users/{id}/edit\"\n                with-pagination&gt;\n                @scope('cell_name', $user)\n                    &lt;x-avatar :image=\"Gravatar::get($user-&gt;email)\"&gt;\n                        &lt;x-slot:title&gt;\n                            {{ $user-&gt;name }}\n                        &lt;/x-slot:title&gt;\n                    &lt;/x-avatar&gt;\n                @endscope\n                @scope('cell_valid', $user)\n                    @if ($user-&gt;valid)\n                        &lt;x-icon name=\"o-check-circle\" /&gt;\n                    @endif\n                @endscope\n                @scope('cell_role', $user)\n                    @if ($user-&gt;role === 'admin')\n                        &lt;x-badge value=\"{{ __('Administrator') }}\" class=\"badge-error\" /&gt;\n                    @elseif($user-&gt;role === 'redac')\n                        &lt;x-badge value=\"{{ __('Redactor') }}\" class=\"badge-warning\" /&gt;\n                    @elseif($user-&gt;role === 'user')\n                        {{ __('User') }}\n                    @endif\n                @endscope\n                @scope('cell_posts_count', $user)\n                    @if ($user-&gt;posts_count &gt; 0)\n                        &lt;x-badge value=\"{{ $user-&gt;posts_count }}\" class=\"badge-primary\" /&gt;\n                    @endif\n                @endscope\n                @scope('cell_comments_count', $user)\n                    @if ($user-&gt;comments_count &gt; 0)\n                        &lt;x-badge value=\"{{ $user-&gt;comments_count }}\" class=\"badge-success\" /&gt;\n                    @endif\n                @endscope\n                @scope('cell_created_at', $user)\n                    {{ $user-&gt;created_at-&gt;isoFormat('LL') }}\n                @endscope\n                @scope('actions', $user)\n                    &lt;div class=\"flex\"&gt;\n                        &lt;x-popover&gt;\n                            &lt;x-slot:trigger&gt;\n                                &lt;x-button icon=\"o-envelope\" link=\"mailto:{{ $user-&gt;email }}\" no-wire-navigate spinner\n                                    class=\"text-blue-500 btn-ghost btn-sm\" /&gt;\n                            &lt;/x-slot:trigger&gt;\n                            &lt;x-slot:content class=\"pop-small\"&gt;\n                                @lang('Send an email')\n                            &lt;/x-slot:content&gt;\n                        &lt;/x-popover&gt;\n                        &lt;x-popover&gt;\n                            &lt;x-slot:trigger&gt;\n                                &lt;x-button icon=\"o-trash\" wire:click=\"deleteUser({{ $user-&gt;id }})\"\n                                    wire:confirm=\"{{ __('Are you sure to delete this user?') }}\"\n                                    confirm-text=\"Are you sure?\" spinner class=\"text-red-500 btn-ghost btn-sm\" /&gt;\n                            &lt;/x-slot:trigger&gt;\n                            &lt;x-slot:content class=\"pop-small\"&gt;\n                                @lang('Delete')\n                            &lt;/x-slot:content&gt;\n                        &lt;/x-popover&gt;\n                    &lt;/div&gt;\n                @endscope\n            &lt;/x-table&gt;\n        @else\n            &lt;p&gt;@lang('No users with these criteria').&lt;/p&gt;\n        @endif\n\n    &lt;/x-card&gt;\n&lt;/div&gt;\n</code></pre>","children":[]}],"payload":{"lines":"5884,5885","fold":1}},{"content":"Traductions Comptes","children":[{"content":"<pre><code class=\"language-json\"><span class=\"hljs-attr\">\"Accounts\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Comptes\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"No users with these criteria\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Aucun utilisateur avec ces critères\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"All\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Tous\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Users list\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Liste des utilisateurs\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Administrators\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Administrateurs\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Redactors\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Rédacteurs\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Administrator\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Administrateur\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Redactor\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Rédacteur\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Role\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Rôle\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Valid\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Valide\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Valid user\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Utilisateur validé\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Send an email\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Envoyer un email\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Are you sure to delete this user?\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Êtes-vous sûr de vouloir supprimer cet utilisateur ?\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Registration\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Inscription\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Back to Dashboard\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Retour sur le Tableau de Bord\"</span>\n</code></pre>","children":[]}],"payload":{"lines":"6065,6066","fold":1}}],"payload":{"lines":"5876,5877","fold":1}}],"payload":{"lines":"5839,5840","fold":1}},{"content":"Modification de comptes","children":[{"content":"Route Modification Comptes","children":[{"content":"<pre><code class=\"language-php\"><span class=\"hljs-comment\">// Groupe middleware IsAdminOrRedac &gt; IsAdmin</span>\n<span class=\"hljs-title class_\">Volt</span>::<span class=\"hljs-title function_ invoke__\">route</span>(<span class=\"hljs-string\">'/users/{user}/edit'</span>, <span class=\"hljs-string\">'admin.users.edit'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">name</span>(<span class=\"hljs-string\">'users.edit'</span>);\n</code></pre>","children":[]}],"payload":{"lines":"6087,6088","fold":1}},{"content":"Lien Modification Comptes","children":[{"content":"<pre><code class=\"language-php\"><span class=\"hljs-comment\">// Déjà fait dans affichage de la liste (Composant Comptes) :</span>\n<span class=\"hljs-comment\">// (&lt;x-table striped :headers=\"$headers\" :rows=\"$users\" :sort-by=\"$sortBy\" link=\"/admin/users/{id}/edit\" with-pagination&gt;)</span>\n</code></pre>","children":[]}],"payload":{"lines":"6094,6095","fold":1}},{"content":"Composant Modification Comptes","children":[{"content":"CLI Modification Comptes","children":[{"content":"<pre><code class=\"language-php\">php artisan make:volt admin/users/edit --<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span>\n</span></code></pre>","children":[]}],"payload":{"lines":"6103,6104","fold":1}},{"content":"Code Modification Comptes","children":[{"content":"<pre><code class=\"language-php\">&lt;?php\nuse App\\Models\\User;\nuse Illuminate\\Validation\\Rule;\nuse Livewire\\Attributes\\{Layout, Title};\nuse Livewire\\Volt\\Component;\nuse Mary\\Traits\\Toast;\n\nnew #[Title('Edit User'), Layout('components.layouts.admin')]\nclass extends Component {\n    use Toast;\n  \n    public User $user;\n    public string $name  = '';\n    public string $email = '';\n    public string $role  = '';\n    public bool $valid   = false;\n    public bool $isStudent;\n  \n    public function mount(User $user): void {\n        $this-&gt;user = $user;\n        $this-&gt;fill($this-&gt;user);\n    }\n  \n    public function save() {\n        $data = $this-&gt;validate([\n            'name'  =&gt; ['required', 'string', 'max:255'],\n            'email' =&gt; ['required', 'email', Rule::unique('users')-&gt;ignore($this-&gt;user-&gt;id)],\n            'role'  =&gt; ['required', Rule::in(['admin', 'redac', 'user'])],\n            'valid' =&gt; ['required', 'boolean'],\n        ]);\n  \n        $this-&gt;user-&gt;update($data);\n      \n        $this-&gt;success(__('User edited with success.'), redirectTo: '/admin/users/index');\n    }\n  \n    public function with(): array {\n        return [\n            'roles' =&gt; [\n                ['name' =&gt; __('Administrator'), 'id' =&gt; 'admin'],\n                ['name' =&gt; __('Redactor'), 'id' =&gt; 'redac'],\n                ['name' =&gt; __('User'), 'id' =&gt; 'user'],\n            ],\n        ];\n    }\n}; ?&gt;\n\n&lt;div&gt;\n  &lt;x-header title=\"{{ __('Edit an account') }}\" separator progress-indicator&gt;\n    &lt;x-slot:actions&gt;\n      &lt;x-button icon=\"s-building-office-2\" label=\"{{ __('Dashboard') }}\" class=\"btn-outline lg:hidden\"\n        link=\"{{ route('admin') }}\" /&gt;\n    &lt;/x-slot:actions&gt;\n  &lt;/x-header&gt;\n  &lt;x-card&gt;\n    &lt;x-form wire:submit=\"save\"&gt;\n      &lt;x-input label=\"{{ __('Name') }}\" wire:model=\"name\" icon=\"o-user\" inline /&gt;\n      &lt;x-input label=\"{{ __('E-mail') }}\" wire:model=\"email\" icon=\"o-envelope\" inline /&gt;\n      &lt;br&gt;\n      &lt;x-radio label=\"{{ __('User role') }}\" inline label=\"{{ __('Select a role') }}\" :options=\"$roles\"\n        wire:model=\"role\" /&gt;\n      &lt;br&gt;\n      &lt;x-toggle label=\"{{ __('Valid user') }}\" inline wire:model=\"valid\" /&gt;\n      &lt;x-slot:actions&gt;\n        &lt;div class=\"text-right\"&gt;\n          &lt;x-button label=\"{{ __('Save') }}\" icon=\"o-paper-airplane\" spinner=\"save\" type=\"submit\" class=\"btn-primary\" /&gt;\n        &lt;/div&gt;\n      &lt;/x-slot:actions&gt;\n    &lt;/x-form&gt;\n  &lt;/x-card&gt;\n&lt;/div&gt;\n</code></pre>","children":[]}],"payload":{"lines":"6109,6110","fold":1}},{"content":"Traduction Modification Comptes","children":[{"content":"<pre><code class=\"language-json\"><span class=\"hljs-attr\">\"Edit an account\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Modifier un compte\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Select a role\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Sélectionnez un rôle\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"User edited with success.\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Utilisateur mis à jour avec succès.\"</span>\n</code></pre>","children":[]}],"payload":{"lines":"6185,6186","fold":1}}],"payload":{"lines":"6101,6102","fold":1}}],"payload":{"lines":"6085,6086","fold":1}},{"content":"Réf.: <em><strong><a href=\"https://laravel.sillo.org/posts/mon-cms-les-comptes\">https://laravel.sillo.org/posts/mon-cms-les-comptes</a></strong></em>","children":[],"payload":{"lines":"6193,6194"}}],"payload":{"lines":"5837,5838","fold":1}},{"content":"- Les Commentaires","children":[{"content":"Liste admin.comments","children":[{"content":"Route admin.comments.index","children":[{"content":"<pre><code class=\"language-php\"><span class=\"hljs-title class_\">Route</span>::<span class=\"hljs-title function_ invoke__\">middleware</span>(<span class=\"hljs-string\">'auth'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">group</span>(function () {\n    ...\n    <span class=\"hljs-title class_\">Route</span>::<span class=\"hljs-title function_ invoke__\">middleware</span>(<span class=\"hljs-title class_\">IsAdminOrRedac</span>::<span class=\"hljs-variable language_\">class</span>)-&gt;<span class=\"hljs-title function_ invoke__\">prefix</span>(<span class=\"hljs-string\">'admin'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">group</span>(function () {\n        ...\n        <span class=\"hljs-title class_\">Volt</span>::<span class=\"hljs-title function_ invoke__\">route</span>(<span class=\"hljs-string\">'/comments/index'</span>, <span class=\"hljs-string\">'admin.comments.index'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">name</span>(<span class=\"hljs-string\">'comments.index'</span>);\n    })\n})\n</code></pre>","children":[]}],"payload":{"lines":"6199,6200","fold":1}},{"content":"Liens comments dans admin.sidebars","children":[{"content":"<pre><code class=\"language-php\">@<span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title class_\">Auth</span>::<span class=\"hljs-title function_ invoke__\">user</span>()-&gt;<span class=\"hljs-title function_ invoke__\">isAdmin</span>())\n    ...\n@<span class=\"hljs-keyword\">endif</span>\n&lt;x-menu-item icon=<span class=\"hljs-string\">\"c-chat-bubble-left\"</span> title=<span class=\"hljs-string\">\"{{ __('Comments') }}\"</span> link=<span class=\"hljs-string\">\"{{ route('comments.index') }}\"</span> /&gt;\n</code></pre>","children":[]}],"payload":{"lines":"6211,6212","fold":1}},{"content":"Composant admin.comment","children":[{"content":"<pre><code class=\"language-php\">php artisan make:volt admin/comments/index --<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span>\n</span></code></pre>","children":[]},{"content":"<pre><code class=\"language-php\">&lt;?php\nuse Mary\\Traits\\Toast;\nuse App\\Models\\Comment;\nuse Livewire\\Volt\\Component;\nuse Livewire\\WithPagination;\nuse Livewire\\Attributes\\{Layout, Title};\nuse Illuminate\\Pagination\\LengthAwarePaginator;\n\nnew #[Title('Comments'), Layout('components.layouts.admin')] \nclass extends Component {\n    use Toast, WithPagination;\n\n    public string $search = '';\n    public array $sortBy = ['column' =&gt; 'created_at', 'direction' =&gt; 'desc'];\n    public $role = 'all';\n\n    public function deleteComment(Comment $comment): void {\n        $comment-&gt;delete();\n        $this-&gt;success(__('Comment deleted'));\n    }\n\n    public function validComment(Comment $comment): void {\n        $comment-&gt;user-&gt;valid = true;\n        $comment-&gt;user-&gt;save();\n\n        $this-&gt;success(__('Comment validated'));\n    }\n\n    public function headers(): array {\n        return [['key' =&gt; 'user_name', 'label' =&gt; __('Author')], ['key' =&gt; 'body', 'label' =&gt; __('Comment'), 'sortable' =&gt; false], ['key' =&gt; 'post_title', 'label' =&gt; __('Post')], ['key' =&gt; 'created_at', 'label' =&gt; __('Sent on')]];\n    }\n\n    public function comments(): LengthAwarePaginator {\n        return Comment::query()\n            -&gt;when($this-&gt;search, fn($q) =&gt; $q-&gt;where('body', 'like', \"%{$this-&gt;search}%\"))\n            -&gt;when('post_title' === $this-&gt;sortBy['column'], fn($q) =&gt; $q-&gt;join('posts', 'comments.post_id', '=', 'posts.id')-&gt;orderBy('posts.title', $this-&gt;sortBy['direction']), fn($q) =&gt; $q-&gt;orderBy($this-&gt;sortBy['column'], $this-&gt;sortBy['direction']))\n            -&gt;when(Auth::user()-&gt;isRedac(), fn($q) =&gt; $q-&gt;whereRelation('post', 'user_id', Auth::id()))\n            -&gt;with([\n                'user:id,name,email,valid',\n                'post:id,title,slug,user_id',\n            ])\n            -&gt;withAggregate('user', 'name')\n            -&gt;paginate(10);\n    }\n\n    public function with(): array {\n        return [\n            'headers'  =&gt; $this-&gt;headers(),\n            'comments' =&gt; $this-&gt;comments(),\n        ];\n    }\n}; ?&gt;\n\n&lt;div&gt;\n    &lt;x-header title=\"{{ __('Comments') }}\" separator progress-indicator&gt;\n        &lt;x-slot:actions&gt;\n            &lt;x-button icon=\"s-building-office-2\" label=\"{{ __('Dashboard') }}\" class=\"btn-outline lg:hidden\"\n                link=\"{{ route('admin') }}\" /&gt;\n            &lt;x-input placeholder=\"{{ __('Search') }}...\" wire:model.live.debounce=\"search\" clearable\n                icon=\"o-magnifying-glass\" /&gt;\n        &lt;/x-slot:actions&gt;\n    &lt;/x-header&gt;\n    &lt;x-card&gt;\n        &lt;x-table striped :headers=\"$headers\" :rows=\"$comments\" link=\"/admin/comments/{id}/edit\" :sort-by=\"$sortBy\"\n            with-pagination&gt;\n            @scope('cell_created_at', $comment)\n                {{ $comment-&gt;created_at-&gt;isoFormat('LL') }} {{ __('at') }}\n                {{ $comment-&gt;created_at-&gt;isoFormat('HH:mm') }}\n            @endscope\n            @scope('cell_body', $comment)\n                {!! nl2br($comment-&gt;body) !!}\n            @endscope\n            @scope('cell_user_name', $comment)\n                &lt;x-avatar :image=\"Gravatar::get($comment-&gt;user-&gt;email)\"&gt;\n                    &lt;x-slot:title&gt;\n                        {{ $comment-&gt;user-&gt;name }}\n                    &lt;/x-slot:title&gt;\n                &lt;/x-avatar&gt;\n            @endscope\n            @scope('cell_post_title', $comment)\n                {{ $comment-&gt;post-&gt;title }}\n            @endscope\n            @scope('actions', $comment)\n                &lt;div class=\"flex\"&gt;\n                    @if (!$comment-&gt;user-&gt;valid)\n                        &lt;x-popover&gt;\n                            &lt;x-slot:trigger&gt;\n                                &lt;x-button icon=\"c-eye\" wire:click=\"validComment({{ $comment-&gt;id }})\"\n                                    wire:confirm=\"{{ __('Are you sure to validate this user for comment?') }}\" spinner\n                                    class=\"text-yellow-500 btn-ghost btn-sm\" /&gt;\n                            &lt;/x-slot:trigger&gt;\n                            &lt;x-slot:content class=\"pop-small\"&gt;\n                                @lang('Validate the user')\n                            &lt;/x-slot:content&gt;\n                        &lt;/x-popover&gt;\n                    @endif\n                    &lt;x-popover&gt;\n                        &lt;x-slot:trigger&gt;\n                            &lt;x-button icon=\"s-document-text\" link=\"{{ route('posts.show', $comment-&gt;post-&gt;slug) }}\" spinner\n                                class=\"btn-ghost btn-sm\" /&gt;\n                        &lt;/x-slot:trigger&gt;\n                        &lt;x-slot:content class=\"pop-small\"&gt;\n                            @lang('Show post')\n                        &lt;/x-slot:content&gt;\n                    &lt;/x-popover&gt;\n                    &lt;x-popover&gt;\n                        &lt;x-slot:trigger&gt;\n                            &lt;x-button icon=\"o-trash\" wire:click=\"deleteComment({{ $comment-&gt;id }})\"\n                                wire:confirm=\"{{ __('Are you sure to delete this comment?') }}\" spinner\n                                class=\"text-red-500 btn-ghost btn-sm\" /&gt;\n                        &lt;/x-slot:trigger&gt;\n                        &lt;x-slot:content class=\"pop-small\"&gt;\n                            @lang('Delete')\n                        &lt;/x-slot:content&gt;\n                    &lt;/x-popover&gt;\n                &lt;/div&gt;\n            @endscope\n        &lt;/x-table&gt;\n    &lt;/x-card&gt;\n&lt;/div&gt;\n</code></pre>","children":[]},{"content":"<pre><code class=\"language-json\"><span class=\"hljs-attr\">\"Comment validated\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Commentaire validé\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Comment deleted\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Commentaire supprimé\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Sent on\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Envoyé le\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Post\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Article\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Are you sure to validate this user for comment?\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Êtes-vous sûr de vouloir valider cet utilisateur pour les commentaires ?\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Validate the user\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Valider l'utilisateur\"</span>\n</code></pre>","children":[]}],"payload":{"lines":"6220,6221","fold":1}}],"payload":{"lines":"6197,6198","fold":1}},{"content":"Modifier admin.comments","children":[{"content":"Route admin.comments.edit","children":[{"content":"<pre><code class=\"language-php\"><span class=\"hljs-title class_\">Route</span>::<span class=\"hljs-title function_ invoke__\">middleware</span>(<span class=\"hljs-string\">'auth'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">group</span>(function () {\n    ...\n    <span class=\"hljs-title class_\">Route</span>::<span class=\"hljs-title function_ invoke__\">middleware</span>(<span class=\"hljs-title class_\">IsAdminOrRedac</span>::<span class=\"hljs-variable language_\">class</span>)-&gt;<span class=\"hljs-title function_ invoke__\">prefix</span>(<span class=\"hljs-string\">'admin'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">group</span>(function () {\n        ...\n        <span class=\"hljs-title class_\">Volt</span>::<span class=\"hljs-title function_ invoke__\">route</span>(<span class=\"hljs-string\">'/comments/{comment}/edit'</span>, <span class=\"hljs-string\">'admin.comments.edit'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">name</span>(<span class=\"hljs-string\">'comments.edit'</span>);\n    })\n})\n</code></pre>","children":[]}],"payload":{"lines":"6360,6361","fold":1}},{"content":"Liens modif. admin. Comment","children":[{"content":"<pre data-lines=\"6374,6375\"><code>Pour pavé Commentaires de Dashboard :\n</code></pre>","children":[],"payload":{"lines":"6374,6375"}},{"content":"<pre><code class=\"language-php\">&lt;a href=\"{{ route('comments.index') }}\" class=\"flex-grow\" title=\"{{  __('All comments') }}\"&gt;\n    &lt;x-stat title=\"{{ __('Comments') }}\" value=\"{{ $commentsNumber }}\" icon=\"c-chat-bubble-left\" class=\"shadow-hover\" /&gt;\n&lt;/a&gt;\n</code></pre>","children":[]},{"content":"<pre data-lines=\"6382,6383\"><code>Dans la liste des commentaires récents :\n</code></pre>","children":[],"payload":{"lines":"6382,6383"}},{"content":"<pre><code class=\"language-php\">&lt;x-popover&gt;\n    &lt;x-slot:trigger&gt;\n        &lt;x-button icon=\"c-eye\" link=\"{{ route('comments.edit', $comment-&gt;id) }}\" spinner class=\"btn-ghost btn-sm\" /&gt;                       \n    &lt;/x-slot:trigger&gt;\n    &lt;x-slot:content class=\"pop-small\"&gt;\n        @lang('Edit or answer')\n    &lt;/x-slot:content&gt;\n&lt;/x-popover&gt;\n</code></pre>","children":[]},{"content":"<pre data-lines=\"6395,6397\"><code>Affichage explicite d'une alerte de commentaires à valider :\n(Issu(s) d'users non validés)\n</code></pre>","children":[],"payload":{"lines":"6395,6397"}},{"content":"<pre><code class=\"language-php\">... &lt;br&gt;\n@foreach ($comments as $comment)\n    @if (!$comment-&gt;user-&gt;valid)\n        &lt;x-alert title=\"{!! __('Comment to valid from ') . $comment-&gt;user-&gt;name !!}\" description=\"{!! $comment-&gt;body !!}\" icon=\"c-chat-bubble-left\"\n            class=\"shadow-md alert-warning\"&gt;\n            &lt;x-slot:actions&gt;\n                &lt;x-button link=\"{{ route('comments.index') }}\" label=\"{!! __('Show this comment') !!}\" /&gt;\n            &lt;/x-slot:actions&gt;\n        &lt;/x-alert&gt;\n        &lt;br&gt;\n    @endif\n@endforeach\n... Bloc 'Recent posts'\n</code></pre>","children":[]}],"payload":{"lines":"6372,6373","fold":1}},{"content":"Pré-requis","children":[{"content":"<pre data-lines=\"6416,6417\"><code>Models/Comment - Ajout de :\n</code></pre>","children":[],"payload":{"lines":"6416,6417"}},{"content":"<pre><code class=\"language-php\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">getDepth</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">int</span> </span>{\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-built_in\">parent</span> ? <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-built_in\">parent</span>-&gt;<span class=\"hljs-title function_ invoke__\">getDepth</span>() + <span class=\"hljs-number\">1</span> : <span class=\"hljs-number\">0</span>;\n}\n</code></pre>","children":[]},{"content":"<pre data-lines=\"6424,6425\"><code>Fichier ./config/tinymce.php :\n</code></pre>","children":[],"payload":{"lines":"6424,6425"}},{"content":"<pre><code class=\"language-php\"><span class=\"hljs-keyword\">return</span> [\n    <span class=\"hljs-string\">'config'</span> =&gt; [\n        ...\n    ],\n    <span class=\"hljs-string\">'config_comment'</span> =&gt; [\n        <span class=\"hljs-string\">'language'</span>       =&gt; <span class=\"hljs-title function_ invoke__\">env</span>(<span class=\"hljs-string\">'APP_TINYMCE_LOCALE'</span>, <span class=\"hljs-string\">'en_US'</span>),\n        <span class=\"hljs-string\">'plugins'</span>        =&gt; <span class=\"hljs-string\">'codesample'</span>,\n        <span class=\"hljs-string\">'toolbar'</span>        =&gt; <span class=\"hljs-string\">'undo redo | styles | copy cut paste pastetext | hr | codesample'</span>,\n        <span class=\"hljs-string\">'toolbar_sticky'</span> =&gt; <span class=\"hljs-literal\">true</span>,\n        <span class=\"hljs-string\">'min_height'</span>     =&gt; <span class=\"hljs-number\">300</span>,\n        <span class=\"hljs-string\">'license_key'</span>    =&gt; <span class=\"hljs-string\">'gpl'</span>,\n    ],\n];\n</code></pre>","children":[]}],"payload":{"lines":"6414,6415","fold":1}},{"content":"Composant admin.comments.edit","children":[{"content":"<pre data-lines=\"6444,6445\"><code>Création composant admin des commentaires :\n</code></pre>","children":[],"payload":{"lines":"6444,6445"}},{"content":"<pre><code class=\"language-php\">php artisan make:volt admin/comments/edit --<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span>\n</span></code></pre>","children":[]},{"content":"<pre data-lines=\"6450,6451\"><code>Code composant admin. des modifs. :\n</code></pre>","children":[],"payload":{"lines":"6450,6451"}},{"content":"<pre><code class=\"language-php\">&lt;?php\nuse App\\Models\\Comment;\nuse Livewire\\Attributes\\{Layout, Title};\nuse Livewire\\Volt\\Component;\nuse Mary\\Traits\\Toast;\n\nnew #[Title('Edit Comment'), Layout('components.layouts.admin')] \nclass extends Component {\n    use Toast;\n  \n    public Comment $comment;\n    public string $body        = '';\n    public string $body_answer = '';\n    public int $depth          = 0;\n  \n    public function mount(Comment $comment): void {\n        $this-&gt;authorizeCommentAccess($comment);\n  \n        $this-&gt;comment = $comment;\n        $this-&gt;fill($this-&gt;comment-&gt;toArray());\n        $this-&gt;depth = $this-&gt;comment-&gt;getDepth();\n    }\n  \n    public function save() {\n        $data = $this-&gt;validate([\n            'body' =&gt; 'required|max:10000',\n        ]);\n  \n        $this-&gt;comment-&gt;update($data);\n  \n        $this-&gt;success(__('Comment edited with success.'), redirectTo: '/admin/comments/index');\n    }\n  \n    public function saveAnswer() {\n        $data = $this-&gt;validate([\n            'body_answer' =&gt; 'required|max:10000',\n        ]);\n  \n        $data['body']      = $data['body_answer'];\n        $data['user_id']   = Auth::id();\n        $data['parent_id'] = $this-&gt;comment-&gt;id;\n        $data['post_id']   = $this-&gt;comment-&gt;post_id;\n  \n        Comment::create($data);\n  \n        $this-&gt;success(__('Answer created with success.'), redirectTo: '/admin/comments/index');\n    }\n  \n    private function authorizeCommentAccess(Comment $comment): void {\n        if (auth()-&gt;user()-&gt;isRedac() &amp;&amp; $comment-&gt;post-&gt;user_id !== auth()-&gt;id()) {\n          abort(403);\n      }\n    }\n}; ?&gt;\n\n&lt;div&gt;\n    &lt;x-header title=\"{{ __('Edit a comment') }}\" separator progress-indicator&gt;\n        &lt;x-slot:actions class=\"lg:hidden\"&gt;\n            &lt;x-button icon=\"s-building-office-2\" label=\"{{ __('Dashboard') }}\" class=\"btn-outline\"\n                link=\"{{ route('admin') }}\" /&gt;\n        &lt;/x-slot:actions&gt;\n    &lt;/x-header&gt;\n    &lt;x-card&gt;\n        &lt;x-form wire:submit=\"save\"&gt;\n            &lt;x-textarea wire:model=\"body\" label=\"{{ __('Content') }}\" hint=\"{{ __('Max 10000 chars') }}\" rows=\"5\"\n                inline /&gt;\n            &lt;x-slot:actions&gt;\n                &lt;x-button label=\"{{ __('Cancel') }}\" icon=\"o-hand-thumb-down\" class=\"btn-outline\"\n                    link=\"/admin/comments/index\" /&gt;\n                &lt;x-button label=\"{{ __('Save') }}\" icon=\"o-paper-airplane\" spinner=\"save\" type=\"submit\"\n                    class=\"btn-primary\" /&gt;\n            &lt;/x-slot:actions&gt;\n        &lt;/x-form&gt;\n\n        @if ($depth &lt; 3)\n            &lt;x-card title=\"{{ __('Your answer') }}\" shadow separator progress-indicator&gt;\n                &lt;x-form wire:submit=\"saveAnswer\"&gt;\n                    &lt;x-editor wire:model=\"body_answer\" label=\"{{ __('Content') }}\" :config=\"config('tinymce.config_comment')\" folder=\"photos\" /&gt;\n                    &lt;x-slot:actions&gt;\n                        &lt;x-button label=\"{{ __('Save') }}\" icon=\"o-paper-airplane\" spinner=\"save\" type=\"submit\"\n                            class=\"btn-primary\" /&gt;\n                    &lt;/x-slot:actions&gt;\n                &lt;/x-form&gt;\n            &lt;/x-card&gt;\n        @endif\n    &lt;/x-card&gt;\n&lt;/div&gt;\n</code></pre>","children":[]},{"content":"<pre data-lines=\"6542,6543\"><code>Traductions admin. modif. des commentaires :\n</code></pre>","children":[],"payload":{"lines":"6542,6543"}},{"content":"<pre><code class=\"language-json\"><span class=\"hljs-attr\">\"Edit a comment\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Modifier un commentaire\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Your answer\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Votre réponse\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Comment edited with success.\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Commentaire mis à jour avec succès.\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Answer created with success.\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Réponse ajoutée avec succès.\"</span>\n</code></pre>","children":[]}],"payload":{"lines":"6442,6443","fold":1}}],"payload":{"lines":"6358,6359","fold":1}},{"content":"Réf.: <em><strong><a href=\"https://laravel.sillo.org/posts/mon-cms-les-commentaires\">https://laravel.sillo.org/posts/mon-cms-les-commentaires</a></strong></em>","children":[],"payload":{"lines":"6551,6552"}},{"content":"//2do admin.contact","children":[],"payload":{"lines":"6553,6554"}}],"payload":{"lines":"6195,6196","fold":1}},{"content":"- Les Menus","children":[{"content":"Liste des Menus &amp; Submenus","children":[{"content":"Route admin.menus.index","children":[{"content":"<pre><code class=\"language-php\"><span class=\"hljs-title class_\">Route</span>::<span class=\"hljs-title function_ invoke__\">middleware</span>(<span class=\"hljs-string\">'auth'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">group</span>(function () {\n    ...\n    <span class=\"hljs-title class_\">Route</span>::<span class=\"hljs-title function_ invoke__\">middleware</span>(<span class=\"hljs-title class_\">IsAdminOrRedac</span>::<span class=\"hljs-variable language_\">class</span>)-&gt;<span class=\"hljs-title function_ invoke__\">prefix</span>(<span class=\"hljs-string\">'admin'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">group</span>(function () {\n        ...\n        <span class=\"hljs-title class_\">Route</span>::<span class=\"hljs-title function_ invoke__\">middleware</span>(<span class=\"hljs-title class_\">IsAdmin</span>::<span class=\"hljs-variable language_\">class</span>)-&gt;<span class=\"hljs-title function_ invoke__\">group</span>(function () {\n            ...\n            <span class=\"hljs-title class_\">Volt</span>::<span class=\"hljs-title function_ invoke__\">route</span>(<span class=\"hljs-string\">'/menus/index'</span>, <span class=\"hljs-string\">'admin.menus.index'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">name</span>(<span class=\"hljs-string\">'menus.index'</span>);\n        });\n    });\n});\n</code></pre>","children":[]}],"payload":{"lines":"6559,6560","fold":1}},{"content":"Lien Menus dans admin.sidebar","children":[{"content":"<pre><code class=\"language-php\">... Lien de comments.index\n@<span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title class_\">Auth</span>::<span class=\"hljs-title function_ invoke__\">user</span>()-&gt;<span class=\"hljs-title function_ invoke__\">isAdmin</span>())\n    &lt;x-menu-sub title=<span class=\"hljs-string\">\"{{ __('Menus') }}\"</span> icon=<span class=\"hljs-string\">\"m-list-bullet\"</span>&gt;\n        &lt;x-menu-item title=<span class=\"hljs-string\">\"{{ __('Navbar') }}\"</span> link=<span class=\"hljs-string\">\"{{ route('menus.index') }}\"</span> /&gt;\n    &lt;/x-menu-sub&gt;\n... Lien <span class=\"hljs-string\">'Allez sur le site'</span> (/)\n@<span class=\"hljs-keyword\">endif</span>\n</code></pre>","children":[]},{"content":"<pre><code class=\"language-php\"><span class=\"hljs-string\">\"Navbar\"</span>: <span class=\"hljs-string\">\"Navigation\"</span>\n</code></pre>","children":[]}],"payload":{"lines":"6574,6575","fold":1}},{"content":"Trait ManageMenus (Menus &amp; submenus)","children":[{"content":"<pre data-lines=\"6592,6593\"><code>Créer un trait ./app/Traits/ManageMenus.php :\n</code></pre>","children":[],"payload":{"lines":"6592,6593"}},{"content":"<pre><code class=\"language-php\"><span class=\"hljs-meta\">&lt;?php</span>\n<span class=\"hljs-keyword\">namespace</span> <span class=\"hljs-title class_\">App</span>\\<span class=\"hljs-title class_\">Traits</span>;\n\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">App</span>\\<span class=\"hljs-title\">Models</span>\\{<span class=\"hljs-title\">Category</span>, <span class=\"hljs-title\">Page</span>, <span class=\"hljs-title\">Post</span>};\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Support</span>\\<span class=\"hljs-title\">Collection</span>;\n\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">trait</span> <span class=\"hljs-title\">ManageMenus</span>\n</span>{\n    <span class=\"hljs-keyword\">public</span> ?<span class=\"hljs-keyword\">int</span> <span class=\"hljs-variable\">$post_id</span> = <span class=\"hljs-literal\">null</span>;\n    <span class=\"hljs-keyword\">public</span> Collection <span class=\"hljs-variable\">$postsSearchable</span>;\n    \n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">search</span>(<span class=\"hljs-params\"><span class=\"hljs-keyword\">string</span> <span class=\"hljs-variable\">$value</span> = <span class=\"hljs-string\">''</span></span>): <span class=\"hljs-title\">void</span> </span>{\n        <span class=\"hljs-variable\">$selectedOption</span> = <span class=\"hljs-title class_\">Post</span>::<span class=\"hljs-title function_ invoke__\">select</span>(<span class=\"hljs-string\">'id'</span>, <span class=\"hljs-string\">'title'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">where</span>(<span class=\"hljs-string\">'id'</span>, <span class=\"hljs-variable\">$this</span>-&gt;post_id)-&gt;<span class=\"hljs-title function_ invoke__\">get</span>();\n    \n        <span class=\"hljs-variable language_\">$this</span>-&gt;postsSearchable = <span class=\"hljs-title class_\">Post</span>::<span class=\"hljs-title function_ invoke__\">query</span>()\n            -&gt;<span class=\"hljs-title function_ invoke__\">select</span>(<span class=\"hljs-string\">'id'</span>, <span class=\"hljs-string\">'title'</span>)\n            -&gt;<span class=\"hljs-title function_ invoke__\">where</span>(<span class=\"hljs-string\">'title'</span>, <span class=\"hljs-string\">'like'</span>, <span class=\"hljs-string\">\"%<span class=\"hljs-subst\">{$value}</span>%\"</span>)\n            -&gt;<span class=\"hljs-title function_ invoke__\">orderBy</span>(<span class=\"hljs-string\">'title'</span>)\n            -&gt;<span class=\"hljs-title function_ invoke__\">take</span>(<span class=\"hljs-number\">5</span>)\n            -&gt;<span class=\"hljs-title function_ invoke__\">get</span>()\n            -&gt;<span class=\"hljs-title function_ invoke__\">merge</span>(<span class=\"hljs-variable\">$selectedOption</span>);\n    }\n    \n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">changeSelection</span>(<span class=\"hljs-params\"><span class=\"hljs-variable\">$value</span></span>): <span class=\"hljs-title\">void</span> </span>{\n        <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">updateSubProperties</span>([<span class=\"hljs-string\">'model'</span> =&gt; <span class=\"hljs-title class_\">Post</span>::<span class=\"hljs-variable language_\">class</span>, <span class=\"hljs-string\">'route'</span> =&gt; <span class=\"hljs-string\">'posts.show'</span>], <span class=\"hljs-variable\">$value</span>);\n    }\n    \n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">updating</span>(<span class=\"hljs-params\"><span class=\"hljs-variable\">$property</span>, <span class=\"hljs-variable\">$value</span></span>): <span class=\"hljs-title\">void</span> </span>{\n        <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-string\">''</span> === <span class=\"hljs-variable\">$value</span>) {\n            <span class=\"hljs-keyword\">return</span>;\n        }\n    \n        <span class=\"hljs-variable\">$modelMap</span> = [\n            <span class=\"hljs-string\">'subPage'</span>     =&gt; [<span class=\"hljs-string\">'model'</span> =&gt; <span class=\"hljs-title class_\">Page</span>::<span class=\"hljs-variable language_\">class</span>, <span class=\"hljs-string\">'route'</span> =&gt; <span class=\"hljs-string\">'pages.show'</span>],\n            <span class=\"hljs-string\">'subCategory'</span> =&gt; [<span class=\"hljs-string\">'model'</span> =&gt; <span class=\"hljs-title class_\">Category</span>::<span class=\"hljs-variable language_\">class</span>, <span class=\"hljs-string\">'route'</span> =&gt; <span class=\"hljs-string\">'category'</span>],\n        ];\n    \n        <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title function_ invoke__\">array_key_exists</span>(<span class=\"hljs-variable\">$property</span>, <span class=\"hljs-variable\">$modelMap</span>)) {\n            <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">updateSubProperties</span>(<span class=\"hljs-variable\">$modelMap</span>[<span class=\"hljs-variable\">$property</span>], <span class=\"hljs-variable\">$value</span>);\n        } <span class=\"hljs-keyword\">elseif</span> (<span class=\"hljs-string\">'subOption'</span> === <span class=\"hljs-variable\">$property</span>) {\n            <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">resetSubProperties</span>();\n            <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">search</span>();\n        }\n    }\n    \n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">with</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">array</span> </span>{\n        <span class=\"hljs-keyword\">return</span> [\n            <span class=\"hljs-string\">'pages'</span>      =&gt; <span class=\"hljs-title class_\">Page</span>::<span class=\"hljs-title function_ invoke__\">select</span>(<span class=\"hljs-string\">'id'</span>, <span class=\"hljs-string\">'title'</span>, <span class=\"hljs-string\">'slug'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">get</span>(),\n            <span class=\"hljs-string\">'categories'</span> =&gt; <span class=\"hljs-title class_\">Category</span>::<span class=\"hljs-title function_ invoke__\">all</span>(),\n            <span class=\"hljs-string\">'subOptions'</span> =&gt; [[<span class=\"hljs-string\">'id'</span> =&gt; <span class=\"hljs-number\">1</span>, <span class=\"hljs-string\">'name'</span> =&gt; <span class=\"hljs-title function_ invoke__\">__</span>(<span class=\"hljs-string\">'Post'</span>)], [<span class=\"hljs-string\">'id'</span> =&gt; <span class=\"hljs-number\">2</span>, <span class=\"hljs-string\">'name'</span> =&gt; <span class=\"hljs-title function_ invoke__\">__</span>(<span class=\"hljs-string\">'Page'</span>)], [<span class=\"hljs-string\">'id'</span> =&gt; <span class=\"hljs-number\">3</span>, <span class=\"hljs-string\">'name'</span> =&gt; <span class=\"hljs-title function_ invoke__\">__</span>(<span class=\"hljs-string\">'Category'</span>)]],\n        ];\n    }\n    \n    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">updateSubProperties</span>(<span class=\"hljs-params\"><span class=\"hljs-variable\">$modelInfo</span>, <span class=\"hljs-variable\">$value</span></span>): <span class=\"hljs-title\">void</span> </span>{\n        <span class=\"hljs-variable\">$model</span> = <span class=\"hljs-variable\">$modelInfo</span>[<span class=\"hljs-string\">'model'</span>]::<span class=\"hljs-title function_ invoke__\">find</span>(<span class=\"hljs-variable\">$value</span>);\n        <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-variable\">$model</span>) {\n            <span class=\"hljs-variable language_\">$this</span>-&gt;sublabel = <span class=\"hljs-variable\">$model</span>-&gt;title;\n            <span class=\"hljs-variable language_\">$this</span>-&gt;sublink  = <span class=\"hljs-string\">'posts.show'</span> === <span class=\"hljs-variable\">$modelInfo</span>[<span class=\"hljs-string\">'route'</span>] || <span class=\"hljs-string\">'pages.show'</span> === <span class=\"hljs-variable\">$modelInfo</span>[<span class=\"hljs-string\">'route'</span>]\n                ? <span class=\"hljs-title function_ invoke__\">route</span>(<span class=\"hljs-variable\">$modelInfo</span>[<span class=\"hljs-string\">'route'</span>], <span class=\"hljs-variable\">$model</span>-&gt;slug)\n                : <span class=\"hljs-title function_ invoke__\">url</span>(<span class=\"hljs-variable\">$modelInfo</span>[<span class=\"hljs-string\">'route'</span>] . <span class=\"hljs-string\">'/'</span> . <span class=\"hljs-variable\">$model</span>-&gt;slug);\n        }\n    }\n    \n    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">resetSubProperties</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">void</span> </span>{\n        <span class=\"hljs-variable language_\">$this</span>-&gt;sublabel    = <span class=\"hljs-string\">''</span>;\n        <span class=\"hljs-variable language_\">$this</span>-&gt;sublink     = <span class=\"hljs-string\">''</span>;\n        <span class=\"hljs-variable language_\">$this</span>-&gt;subPost     = <span class=\"hljs-number\">0</span>;\n        <span class=\"hljs-variable language_\">$this</span>-&gt;subPage     = <span class=\"hljs-number\">0</span>;\n        <span class=\"hljs-variable language_\">$this</span>-&gt;subCategory = <span class=\"hljs-number\">0</span>;\n        <span class=\"hljs-variable language_\">$this</span>-&gt;subOption   = <span class=\"hljs-number\">1</span>;  \n  }\n}\n</code></pre>","children":[]}],"payload":{"lines":"6590,6591","fold":1}},{"content":"Formulaire submenus (Création &amp; Modification)","children":[{"content":"<pre data-lines=\"6671,6672\"><code>Créer admin.menus.submenu-form.blade.php :\n</code></pre>","children":[],"payload":{"lines":"6671,6672"}},{"content":"<pre><code class=\"language-php\">&lt;x-form wire:submit=\"saveSubmenu({{ $menu-&gt;id ?? 'null' }})\"&gt;\n    &lt;x-radio :options=\"$subOptions\" wire:model=\"subOption\" wire:change=\"$refresh\" /&gt;\n    @if ($subOption == 1)\n        &lt;x-choices label=\"{{ __('Post') }}\" wire:model=\"subPost\" :options=\"$postsSearchable\" option-label=\"title\"\n            hint=\"{{ __('Select a post, type to search') }}\" debounce=\"300ms\" min-chars=\"2\"\n            no-result-text=\"{{ __('No result found!') }}\" single searchable @change-selection=\"$wire.changeSelection($event.detail.value)\" /&gt;\n    @elseif($subOption == 2)\n        &lt;x-select label=\"{{ __('Page') }}\" option-label=\"title\" :options=\"$pages\"\n            placeholder=\"{{ __('Select a page') }}\" wire:model=\"subPage\"\n            wire:change=\"$refresh\" /&gt;\n    @elseif($subOption == 3)\n        &lt;x-select label=\"{{ __('Category') }}\" option-label=\"title\" :options=\"$categories\"\n            placeholder=\"{{ __('Select a category') }}\" wire:model=\"subCategory\"\n            wire:change=\"$refresh\" /&gt;\n    @endif\n    &lt;x-input label=\"{{ __('Title') }}\" wire:model=\"sublabel\" /&gt;\n    &lt;x-input type=\"text\" wire:model=\"sublink\" label=\"{{ __('Link') }}\" /&gt;\n    &lt;x-slot:actions&gt;\n        &lt;x-button label=\"{{ __('Save') }}\" icon=\"o-paper-airplane\" spinner=\"save\"\n            type=\"submit\" class=\"btn-primary\" /&gt;\n    &lt;/x-slot:actions&gt;\n&lt;/x-form&gt;\n</code></pre>","children":[]}],"payload":{"lines":"6669,6670","fold":1}},{"content":"Composant Liste des Menus (admin.menus.index)","children":[{"content":"Création admin.menus.index","children":[{"content":"<pre><code class=\"language-php\">php artisan make:volt admin/menus/index --<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span>\n</span></code></pre>","children":[]}],"payload":{"lines":"6700,6701","fold":1}},{"content":"Code admin.menus.index","children":[{"content":"<pre><code class=\"language-php\">&lt;?php\nuse Mary\\Traits\\Toast;\nuse App\\Traits\\ManageMenus;\nuse Livewire\\Volt\\Component;\nuse App\\Models\\{Menu, Submenu};\nuse Illuminate\\Support\\Collection;\nuse Livewire\\Attributes\\{Layout, Title, Validate};\nuse Illuminate\\Contracts\\Database\\Eloquent\\Builder;\n\nnew #[Title('Nav Menu'), Layout('components.layouts.admin')]\nclass extends Component {\n    use Toast;\n    use ManageMenus;\n    \n    public Collection $menus;\n    \n    #[Validate('required|max:255|unique:menus,label')]\n    public string $label = '';\n    \n    #[Validate('nullable|regex:/\\/([a-z0-9_-]\\/*)*[a-z0-9_-]*/')]\n    public string $link = '';\n    \n    public string $sublabel = '';\n    public string $sublink  = '';\n    public int $subPost     = 0;\n    public int $subPage     = 0;\n    public int $subCategory = 0;\n    public int $subOption   = 1;\n    \n    // Méthode appelée lors de l'initialisation du composant.\n    public function mount(): void {\n        $this-&gt;getMenus();\n        $this-&gt;search();\n    }\n    \n    // Récupérer les menus avec leurs sous-menus triés par ordre.\n    public function getMenus(): void {\n        $this-&gt;menus = Menu::with([\n            'submenus' =&gt; function (Builder $query) {\n                $query-&gt;orderBy('order');\n            },\n        ])\n            -&gt;orderBy('order')\n            -&gt;get();\n    }\n    \n    public function up(Menu $menu): void {\n        $this-&gt;move($menu, 'up');\n    }\n    \n    public function upSub(Submenu $submenu): void {\n        $this-&gt;move($submenu, 'up', true);\n    }\n    \n    public function down(Menu $menu): void {\n        $this-&gt;move($menu, 'down');\n    }\n    \n    public function downSub(Submenu $submenu): void {\n        $this-&gt;move($submenu, 'down', true);\n    }\n    \n    public function deleteMenu(Menu $menu): void {\n        $this-&gt;deleteItem($menu);\n    }\n    \n    public function deleteSubmenu(Menu $menu, Submenu $submenu): void {\n        $this-&gt;deleteItem($submenu, $menu);\n    }\n    \n    // Enregistrer un nouveau menu.\n    public function saveMenu(): void {\n        $data          = $this-&gt;validate();\n        $data['order'] = $this-&gt;menus-&gt;count() + 1;\n        Menu::create($data);\n    \n        $this-&gt;success(__('Menu created with success.'), redirectTo: '/admin/menus/index');\n    }\n    \n    // Enregistrer un nouveau sous-menu.\n    public function saveSubmenu(Menu $menu): void {\n        $data = $this-&gt;validate([\n            'sublabel' =&gt; ['required', 'string', 'max:255'],\n            'sublink'  =&gt; 'required|regex:/\\/([a-z0-9_-]\\/*)*[a-z0-9_-]*/',\n        ]);\n    \n        $data['order'] = $menu-&gt;submenus-&gt;count() + 1;\n        $data['label'] = $this-&gt;sublabel;\n        $data['link']  = $this-&gt;sublink;\n    \n        $menu-&gt;submenus()-&gt;save(new Submenu($data));\n    \n        $this-&gt;sublabel = '';\n        $this-&gt;sublink  = '';\n    \n        $this-&gt;success(__('Submenu created with success.'));\n    }\n    \n    // Méthode générique pour déplacer un élément (menu ou sous-menu)\n    private function move($item, $direction, $isSubmenu = false): void {\n        $operator       = 'up' === $direction ? '&lt;' : '&gt;';\n        $orderDirection = 'up' === $direction ? 'desc' : 'asc';\n    \n        $query = $isSubmenu ? Submenu::where('menu_id', $item-&gt;menu_id) : Menu::query();\n    \n        $adjacentItem = $query\n            -&gt;where('order', $operator, $item-&gt;order)\n            -&gt;orderBy('order', $orderDirection)\n            -&gt;first();\n    \n        if ($adjacentItem) {\n            $this-&gt;swap($item, $adjacentItem);\n        }\n    }\n    \n    private function swap($item1, $item2): void {\n        $tempOrder    = $item1-&gt;order;\n        $item1-&gt;order = $item2-&gt;order;\n        $item2-&gt;order = $tempOrder;\n    \n        $item1-&gt;save();\n        $item2-&gt;save();\n    \n        $this-&gt;getMenus();\n    }\n    \n    // Méthode générique pour supprimer un élément (menu ou sous-menu)\n    private function deleteItem($item, $parent = null): void {\n        $isSubmenu = null !== $parent;\n    \n        $item-&gt;delete();\n    \n        if ($isSubmenu) {\n            $this-&gt;reorderItems($parent-&gt;submenus());\n        } else {\n            $this-&gt;reorderItems(Menu::query());\n        }\n    \n        $this-&gt;getMenus();\n        $this-&gt;success(__($isSubmenu ? 'Submenu' : 'Menu') . __(' deleted with success.'));\n    }\n    \n    // Méthode générique pour réordonner les éléments\n    private function reorderItems($query): void {\n        $items = $query-&gt;orderBy('order')-&gt;get();\n        foreach ($items as $index =&gt; $item) {\n            $item-&gt;order = $index + 1;\n            $item-&gt;save();\n        }\n    }\n};?&gt;\n\n&lt;div&gt;\n  &lt;x-header title=\"{{ __('Navigation') }}\" separator progress-indicator&gt;\n    &lt;x-slot:actions class=\"lg:hidden\"&gt;\n      &lt;x-button icon=\"s-building-office-2\" label=\"{{ __('Dashboard') }}\" class=\"btn-outline\"\n        link=\"{{ route('admin') }}\" /&gt;\n    &lt;/x-slot:actions&gt;\n  &lt;/x-header&gt;\n  &lt;x-card&gt;\n    @foreach ($menus as $menu)\n    &lt;x-list-item :item=\"$menu\" no-separator no-hover&gt;\n      &lt;x-slot:value&gt;\n        {{ $menu-&gt;label }}\n      &lt;/x-slot:value&gt;\n      &lt;x-slot:sub-value&gt;\n        @if ($menu-&gt;link)\n        {{ $menu-&gt;link }}\n        @else\n        @lang('Root menu')\n        @endif\n      &lt;/x-slot:sub-value&gt;\n      &lt;x-slot:actions&gt;\n        @if ($menu-&gt;order &gt; 1)\n        &lt;x-popover&gt;\n          &lt;x-slot:trigger&gt;\n            &lt;x-button icon=\"s-chevron-up\" wire:click=\"up({{ $menu-&gt;id }})\" spinner /&gt;\n          &lt;/x-slot:trigger&gt;\n          &lt;x-slot:content class=\"pop-small\"&gt;\n            @lang('Up')\n          &lt;/x-slot:content&gt;\n        &lt;/x-popover&gt;\n        @endif\n        @if ($menu-&gt;order &lt; $menus-&gt;count())\n          &lt;x-popover&gt;\n            &lt;x-slot:trigger&gt;\n              &lt;x-button icon=\"s-chevron-down\" wire:click=\"down({{ $menu-&gt;id }})\" spinner /&gt;\n            &lt;/x-slot:trigger&gt;\n            &lt;x-slot:content class=\"pop-small\"&gt;\n              @lang('Down')\n            &lt;/x-slot:content&gt;\n          &lt;/x-popover&gt;\n          @endif\n          &lt;x-popover&gt;\n            &lt;x-slot:trigger&gt;\n              &lt;x-button icon=\"c-arrow-path-rounded-square\" link=\"#\" class=\"text-blue-500 btn-ghost btn-sm\" spinner /&gt;\n            &lt;/x-slot:trigger&gt;\n            &lt;x-slot:content class=\"pop-small\"&gt;\n              @lang('Edit')\n            &lt;/x-slot:content&gt;\n          &lt;/x-popover&gt;\n          &lt;x-popover&gt;\n            &lt;x-slot:trigger&gt;\n              &lt;x-button icon=\"o-trash\" wire:click=\"deleteMenu({{ $menu-&gt;id }})\"\n                wire:confirm=\"{{ __('Are you sure to delete this menu?') }}\" spinner\n                class=\"text-red-500 btn-ghost btn-sm\" /&gt;\n            &lt;/x-slot:trigger&gt;\n            &lt;x-slot:content class=\"pop-small\"&gt;\n              @lang('Delete')\n            &lt;/x-slot:content&gt;\n          &lt;/x-popover&gt;\n      &lt;/x-slot:actions&gt;\n    &lt;/x-list-item&gt;\n\n    &lt;x-collapse collapse-plus-minus no-icon class=\"ml-8\"&gt;\n      &lt;x-slot:heading&gt;\n        &lt;x-icon name=\"o-chevron-down\" /&gt;&lt;span class=\"pl-2 text-sm\"&gt;{{ __('Submenus') }}&lt;/span&gt;\n      &lt;/x-slot:heading&gt;\n      &lt;x-slot:content&gt;\n        @foreach ($menu-&gt;submenus as $submenu)\n        &lt;x-list-item :item=\"$menu\" no-separator no-hover&gt;\n          &lt;x-slot:value&gt;\n            {{ $submenu-&gt;label }}\n          &lt;/x-slot:value&gt;\n          &lt;x-slot:sub-value&gt;\n            {{ $submenu-&gt;link }}\n          &lt;/x-slot:sub-value&gt;\n          &lt;x-slot:actions&gt;\n            @if ($submenu-&gt;order &gt; 1)\n            &lt;x-popover&gt;\n              &lt;x-slot:trigger&gt;\n                &lt;x-button icon=\"s-chevron-up\" wire:click=\"upSub({{ $submenu-&gt;id }})\" spinner /&gt;\n              &lt;/x-slot:trigger&gt;\n              &lt;x-slot:content class=\"pop-small\"&gt;\n                @lang('Up')\n              &lt;/x-slot:content&gt;\n            &lt;/x-popover&gt;\n            @endif\n            @if ($submenu-&gt;order &lt; $menu-&gt;submenus-&gt;count())\n              &lt;x-popover&gt;\n                &lt;x-slot:trigger&gt;\n                  &lt;x-button icon=\"s-chevron-down\" wire:click=\"downSub({{ $submenu-&gt;id }})\" spinner /&gt;\n                &lt;/x-slot:trigger&gt;\n                &lt;x-slot:content class=\"pop-small\"&gt;\n                  @lang('Down')\n                &lt;/x-slot:content&gt;\n              &lt;/x-popover&gt;\n              @endif\n              &lt;x-popover&gt;\n                &lt;x-slot:trigger&gt;\n                  &lt;x-button icon=\"c-arrow-path-rounded-square\" link=\"#\" class=\"text-blue-500 btn-ghost btn-sm\"\n                    spinner /&gt;\n                &lt;/x-slot:trigger&gt;\n                &lt;x-slot:content class=\"pop-small\"&gt;\n                  @lang('Edit')\n                &lt;/x-slot:content&gt;\n              &lt;/x-popover&gt;\n              &lt;x-popover&gt;\n                &lt;x-slot:trigger&gt;\n                  &lt;x-button icon=\"o-trash\" wire:click=\"deleteSubmenu({{ $menu-&gt;id }}, {{ $submenu-&gt;id }})\"\n                    wire:confirm=\"{{ __('Are you sure to delete this menu?') }}\" spinner\n                    class=\"text-red-500 btn-ghost btn-sm\" /&gt;\n                &lt;/x-slot:trigger&gt;\n                &lt;x-slot:content class=\"pop-small\"&gt;\n                  @lang('Delete')\n                &lt;/x-slot:content&gt;\n              &lt;/x-popover&gt;\n          &lt;/x-slot:actions&gt;\n        &lt;/x-list-item&gt;\n        @endforeach\n\n        &lt;br&gt;\n\n        &lt;x-card class=\"\" title=\"{{ __('Create a new submenu') }}\"&gt;\n          @include('livewire.admin.menus.submenu-form')\n        &lt;/x-card&gt;\n\n      &lt;/x-slot:content&gt;\n    &lt;/x-collapse&gt;\n    @endforeach\n\n  &lt;/x-card&gt;\n\n  &lt;br&gt;\n\n  &lt;x-card class=\"\" title=\"{{ __('Create a new menu') }}\"&gt;\n\n    &lt;x-form wire:submit=\"saveMenu\"&gt;\n      &lt;x-input label=\"{{ __('Title') }}\" wire:model=\"label\" /&gt;\n      &lt;x-input type=\"text\" wire:model=\"link\" label=\"{{ __('Link') }}\" /&gt;\n      &lt;x-slot:actions&gt;\n        &lt;x-button label=\"{{ __('Save') }}\" icon=\"o-paper-airplane\" spinner=\"save\" type=\"submit\" class=\"btn-primary\" /&gt;\n      &lt;/x-slot:actions&gt;\n    &lt;/x-form&gt;\n\n  &lt;/x-card&gt;\n&lt;/div&gt;\n</code></pre>","children":[]}],"payload":{"lines":"6706,6707","fold":1}},{"content":"Traductions Liste Menus","children":[{"content":"<pre data-lines=\"7010,7011\"><code>N.B.: \"Edit\" existe déjà, mais remplacé ici\n</code></pre>","children":[],"payload":{"lines":"7010,7011"}},{"content":"<pre><code class=\"language-json\"><span class=\"hljs-attr\">\"Submenus\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Sous-menus\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Edit a submenu\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Modifier un sous-menu\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Create a new menu\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Créer un nouveau menu\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Are you sure to delete this menu?\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Êtes-vous sûr de vouloir supprimer ce menu ?\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Menu created with success.\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Menu ajouté avec succès.\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Menu updated with success.\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Menu mis à jour avec succès.\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Edit a menu\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Modifier un menu\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Create a new submenu\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Créer un nouveau sous-menu\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Are you sure to delete this submenu?\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Êtes-vous sûr de vouloir supprimer ce sous-menu ?\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\" deleted with success.\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\" supprimé avec succès.\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Root menu\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Menu racine\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Submenu\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Sous-menu\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Edit\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Modifier\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Link\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Lien\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Select a post, type to search\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Sélectionnez un article, tapez pour rechercher\"</span>\n</code></pre>","children":[]}],"payload":{"lines":"7008,7009","fold":1}}],"payload":{"lines":"6698,6699","fold":1}}],"payload":{"lines":"6557,6558","fold":1}},{"content":"Réf.: <em><strong><a href=\"https://laravel.sillo.org/posts/mon-cms-les-menus-partie-1\">https://laravel.sillo.org/posts/mon-cms-les-menus-partie-1</a></strong></em>","children":[],"payload":{"lines":"7030,7031"}},{"content":"Modification d'un menu","children":[{"content":"Route admin.menus.edit","children":[{"content":"<pre><code class=\"language-php\"><span class=\"hljs-title class_\">Route</span>::<span class=\"hljs-title function_ invoke__\">middleware</span>(<span class=\"hljs-string\">'auth'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">group</span>(function () {\n    ...\n    <span class=\"hljs-title class_\">Route</span>::<span class=\"hljs-title function_ invoke__\">middleware</span>(<span class=\"hljs-title class_\">IsAdminOrRedac</span>::<span class=\"hljs-variable language_\">class</span>)-&gt;<span class=\"hljs-title function_ invoke__\">prefix</span>(<span class=\"hljs-string\">'admin'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">group</span>(function () {\n        ...\n        <span class=\"hljs-title class_\">Route</span>::<span class=\"hljs-title function_ invoke__\">middleware</span>(<span class=\"hljs-title class_\">IsAdmin</span>::<span class=\"hljs-variable language_\">class</span>)-&gt;<span class=\"hljs-title function_ invoke__\">group</span>(function () {\n            ...\n            <span class=\"hljs-title class_\">Volt</span>::<span class=\"hljs-title function_ invoke__\">route</span>(<span class=\"hljs-string\">'/menus/{menu}/edit'</span>, <span class=\"hljs-string\">'admin.menus.edit'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">name</span>(<span class=\"hljs-string\">'menus.edit'</span>);\n        });\n    });\n});\n</code></pre>","children":[]}],"payload":{"lines":"7034,7035","fold":1}},{"content":"Lien Modification de Menus dans la liste (admin.menus.index)","children":[{"content":"<pre><code class=\"language-php\">@if ($menu-&gt;order &lt; $menus-&gt;count())\n    &lt;x-popover&gt;\n        ...\n    &lt;/x-popover&gt;\n@endif\n&lt;x-popover&gt;\n    &lt;x-slot:trigger&gt;\n        &lt;x-button icon=\"c-arrow-path-rounded-square\" link=\"{{ route('menus.edit', $menu-&gt;id) }}\"\n        class=\"text-blue-500 btn-ghost btn-sm\" spinner /&gt;\n    ...\n</code></pre>","children":[]}],"payload":{"lines":"7049,7050","fold":1}},{"content":"Composant modification d'un menu (admin.menus.edit)","children":[{"content":"Création admin.menus.edit","children":[{"content":"<pre><code class=\"language-php\">php artisan make:volt admin/menus/edit --<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span>\n</span></code></pre>","children":[]}],"payload":{"lines":"7066,7067","fold":1}},{"content":"Code admin.menus.edit","children":[{"content":"<pre><code class=\"language-php\">&lt;?php\nuse App\\Models\\Menu;\nuse Illuminate\\Validation\\Rule;\nuse Livewire\\Attributes\\{Layout, Title};\nuse Livewire\\Volt\\Component;\nuse Mary\\Traits\\Toast;\n\nnew #[Title('Edit menu'), Layout('components.layouts.admin')]\nclass extends Component {\n    use Toast;\n\n    public Menu $menu;\n    public string $label = '';\n    public ?string $link = null;\n\n    public function mount(Menu $menu): void {\n        $this-&gt;menu = $menu;\n        $this-&gt;fill($this-&gt;menu);\n    }\n\n    public function save(): void {\n        $data = $this-&gt;validate([\n            'label' =&gt; ['required', 'string', 'max:255', Rule::unique('menus')-&gt;ignore($this-&gt;menu-&gt;id)],\n            'link' =&gt; 'nullable|regex:/\\/([a-z0-9_-]\\/*)*[a-z0-9_-]*/',\n        ]);\n\n        $this-&gt;menu-&gt;update($data);\n\n        $this-&gt;success(__('Menu updated with success.'), redirectTo: '/admin/menus/index');\n    }\n}; ?&gt;\n\n&lt;div&gt;\n    &lt;x-header title=\"{{ __('Edit a menu') }}\" separator progress-indicator&gt;\n        &lt;x-slot:actions class=\"lg:hidden\"&gt;\n            &lt;x-button icon=\"s-building-office-2\" label=\"{{ __('Dashboard') }}\" class=\"btn-outline\"\n                link=\"{{ route('admin') }}\" /&gt;\n        &lt;/x-slot:actions&gt;\n    &lt;/x-header&gt;\n    &lt;x-card&gt;\n        &lt;x-form wire:submit=\"save\"&gt;\n            &lt;x-input label=\"{{ __('Title') }}\" wire:model=\"label\" /&gt;\n            &lt;x-input type=\"text\" wire:model=\"link\" label=\"{{ __('Link') }}\" /&gt;\n            &lt;x-slot:actions&gt;\n                &lt;x-button label=\"{{ __('Save') }}\" icon=\"o-paper-airplane\" spinner=\"save\" type=\"submit\"\n                    class=\"btn-primary\" /&gt;\n            &lt;/x-slot:actions&gt;\n        &lt;/x-form&gt;\n    &lt;/x-card&gt;\n&lt;/div&gt;\n</code></pre>","children":[]}],"payload":{"lines":"7072,7073","fold":1}}],"payload":{"lines":"7064,7065","fold":1}}],"payload":{"lines":"7032,7033","fold":1}},{"content":"Modification d'un submenu","children":[{"content":"Route admin.menus.editsub","children":[{"content":"<pre><code class=\"language-php\"><span class=\"hljs-title class_\">Volt</span>::<span class=\"hljs-title function_ invoke__\">route</span>(<span class=\"hljs-string\">'/submenus/{submenu}/edit'</span>, <span class=\"hljs-string\">'admin.menus.editsub'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">name</span>(<span class=\"hljs-string\">'submenus.edit'</span>);\n</code></pre>","children":[]}],"payload":{"lines":"7129,7130","fold":1}},{"content":"Lien Modification d'un submenu dans la liste (admin.menus.index)","children":[{"content":"<pre><code class=\"language-php\">@<span class=\"hljs-keyword\">if</span> (<span class=\"hljs-variable\">$submenu</span>-&gt;order &lt; <span class=\"hljs-variable\">$menu</span>-&gt;submenus-&gt;<span class=\"hljs-title function_ invoke__\">count</span>())\n    &lt;x-popover&gt;\n        ...\n    &lt;/x-popover&gt;\n@<span class=\"hljs-keyword\">endif</span>\n&lt;x-popover&gt;\n    &lt;x-slot:trigger&gt;\n        &lt;x-button icon=<span class=\"hljs-string\">\"c-arrow-path-rounded-square\"</span> link=<span class=\"hljs-string\">\"{{ route('submenus.edit', <span class=\"hljs-subst\">$submenu</span>-&gt;id) }}\"</span>...(À la place du <span class=\"hljs-string\">'#'</span>)\n    ...\n</code></pre>","children":[]}],"payload":{"lines":"7135,7136","fold":1}},{"content":"Composant modification d'un submenu (admin.menus.editsub)","children":[{"content":"Création admin.menus.editsub","children":[{"content":"<pre><code class=\"language-php\">php artisan make:volt admin/menus/editsub --<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span>\n</span></code></pre>","children":[]}],"payload":{"lines":"7151,7152","fold":1}},{"content":"Code admin.menus.editsub","children":[{"content":"<pre><code class=\"language-php\">&lt;?php\nuse Mary\\Traits\\Toast;\nuse App\\Models\\Submenu;\nuse App\\Traits\\ManageMenus;\nuse Livewire\\Volt\\Component;\nuse Livewire\\Attributes\\{Layout, Title};\n\nnew #[Title('Edit Submenu'), Layout('components.layouts.admin')] class extends Component {\n    use Toast, ManageMenus;\n\n    public Submenu $submenu;\n    public string $sublabel = '';\n    public string $sublink  = '';\n    public int $subPost     = 0;\n    public int $subPage     = 0;\n    public int $subCategory = 0;\n    public int $subOption   = 1;\n\n    public function mount(Submenu $submenu): void {\n        $this-&gt;submenu  = $submenu;\n        $this-&gt;sublabel = $submenu-&gt;label;\n        $this-&gt;sublink  = $submenu-&gt;link;\n        $this-&gt;search();\n    }\n\n    public function saveSubmenu($menu = null): void {\n        $data = $this-&gt;validate([\n            'sublabel' =&gt; ['required', 'string', 'max:255'],\n            'sublink'  =&gt; 'required|regex:/\\/([a-z0-9_-]\\/*)*[a-z0-9_-]*/',\n        ]);\n\n        $this-&gt;submenu-&gt;update([\n            'label' =&gt; $data['sublabel'],\n            'link'  =&gt; $data['sublink'],\n        ]);\n\n        $this-&gt;success(__('Menu updated with success.'), redirectTo: '/admin/menus/index');\n    }\n}; ?&gt;\n\n&lt;div&gt;\n    &lt;x-header title=\"{{ __('Edit a submenu') }}\" separator progress-indicator&gt;\n        &lt;x-slot:actions class=\"lg:hidden\"&gt;\n            &lt;x-button icon=\"s-building-office-2\" label=\"{{ __('Dashboard') }}\" class=\"btn-outline\"\n                link=\"{{ route('admin') }}\" /&gt;\n        &lt;/x-slot:actions&gt;\n    &lt;/x-header&gt;\n    &lt;x-card&gt;\n        @include('livewire.admin.menus.submenu-form')\n    &lt;/x-card&gt;\n&lt;/div&gt;\n</code></pre>","children":[]}],"payload":{"lines":"7157,7158","fold":1}}],"payload":{"lines":"7149,7150","fold":1}}],"payload":{"lines":"7127,7128","fold":1}},{"content":"Le menu du footer","children":[{"content":"Route admin.menus.footers","children":[{"content":"<pre><code class=\"language-php\"><span class=\"hljs-title class_\">Volt</span>::<span class=\"hljs-title function_ invoke__\">route</span>(<span class=\"hljs-string\">'/footers/index'</span>, <span class=\"hljs-string\">'admin.menus.footers'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">name</span>(<span class=\"hljs-string\">'menus.footers'</span>);\n</code></pre>","children":[]}],"payload":{"lines":"7215,7216"}},{"content":"Lien du menu du footer dans la sidebar (admin.sidebar)","children":[{"content":"<pre><code class=\"language-php\">@<span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title class_\">Auth</span>::<span class=\"hljs-title function_ invoke__\">user</span>()-&gt;<span class=\"hljs-title function_ invoke__\">isAdmin</span>())\n    &lt;x-menu-sub title=<span class=\"hljs-string\">\"{{ __('Menus') }}\"</span> icon=<span class=\"hljs-string\">\"m-list-bullet\"</span>&gt;\n        ...\n        &lt;x-menu-item title=<span class=\"hljs-string\">\"{{ __('Footer') }}\"</span> link=<span class=\"hljs-string\">\"{{ route('menus.footers') }}\"</span> /&gt;\n</code></pre>","children":[]},{"content":"<pre><code class=\"language-php\"><span class=\"hljs-string\">\"Footer\"</span>: <span class=\"hljs-string\">\"Pied de page\"</span>\n</code></pre>","children":[]}],"payload":{"lines":"7221,7222"}},{"content":"Composant menu du footer (admin.menus.footers)","children":[{"content":"Création admin.menus.footers","children":[{"content":"<pre><code class=\"language-php\">php artisan make:volt admin/menus/footers --<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span>\n</span></code></pre>","children":[]}],"payload":{"lines":"7236,7237","fold":1}},{"content":"Code admin.menus.footers","children":[{"content":"<pre><code class=\"language-php\">&lt;?php\nuse Mary\\Traits\\Toast;\nuse App\\Models\\{Footer};\nuse Livewire\\Volt\\Component;\nuse Illuminate\\Support\\Collection;\nuse Livewire\\Attributes\\{Layout, Validate, Title};\n\nnew #[Title('Footer Menu'), Layout('components.layouts.admin')]\nclass extends Component {\n    use Toast;\n    \n    public Collection $footers;\n    \n    #[Validate('required|max:255|unique:footers,label')]\n    public string $label = '';\n    \n    #[Validate('nullable|regex:/\\/([a-z0-9_-]\\/*)*[a-z0-9_-]*/')]\n    public string $link = '';\n    \n    public function mount(): void {\n        $this-&gt;getFooters();\n    }\n    \n    public function getFooters(): void {\n        $this-&gt;footers = Footer::orderBy('order')-&gt;get();\n    }\n    \n    public function up(Footer $footer): void {\n        $previousFooter = Footer::where('order', '&lt;', $footer-&gt;order)\n            -&gt;orderBy('order', 'desc')\n            -&gt;first();\n    \n        $this-&gt;swap($footer, $previousFooter);\n    }\n    \n    public function down(Footer $footer): void {\n        $previousFooter = Footer::where('order', '&gt;', $footer-&gt;order)\n            -&gt;orderBy('order', 'asc')\n            -&gt;first();\n    \n        $this-&gt;swap($footer, $previousFooter);\n    }\n    \n    public function deleteFooter(Footer $footer): void {\n        $footer-&gt;delete();\n        $this-&gt;reorderFooters();\n        $this-&gt;getFooters();\n        $this-&gt;success(__('Footer deleted with success.'));\n    }\n    \n    public function saveFooter(): void {\n        $data          = $this-&gt;validate();\n        $data['order'] = $this-&gt;footers-&gt;count() + 1;\n        $newFooter     = Footer::create($data);\n        $this-&gt;footers-&gt;push($newFooter);\n        $this-&gt;success(__('Footer created with success.'));\n    }\n    \n    private function swap(Footer $footer, Footer $previousFooter): void {\n        $tempOrder             = $footer-&gt;order;\n        $footer-&gt;order         = $previousFooter-&gt;order;\n        $previousFooter-&gt;order = $tempOrder;\n    \n        $footer-&gt;save();\n        $previousFooter-&gt;save();\n        $this-&gt;getFooters();\n    }\n    \n    private function reorderFooters(): void {\n        $footers = Footer::orderBy('order')-&gt;get();\n      foreach ($footers as $index =&gt; $footer) {\n          $footer-&gt;order = $index + 1;\n          $footer-&gt;save();\n      }\n  }\n}; ?&gt;\n\n&lt;div&gt;\n    &lt;x-header title=\"{{ __('Footer') }}\" separator progress-indicator&gt;\n        &lt;x-slot:actions class=\"lg:hidden\"&gt;\n            &lt;x-button icon=\"s-building-office-2\" label=\"{{ __('Dashboard') }}\" class=\"btn-outline\"\n                link=\"{{ route('admin') }}\" /&gt;\n        &lt;/x-slot:actions&gt;\n    &lt;/x-header&gt;\n    &lt;x-card&gt;\n\n        @foreach ($footers as $footer)\n            &lt;x-list-item :item=\"$footer\" no-separator no-hover&gt;\n                &lt;x-slot:value&gt;\n                    {{ $footer-&gt;label }}\n                &lt;/x-slot:value&gt;\n                &lt;x-slot:sub-value&gt;\n                    {{ $footer-&gt;link }}\n                &lt;/x-slot:sub-value&gt;\n                &lt;x-slot:actions&gt;\n                    @if ($footer-&gt;order &gt; 1)\n                        &lt;x-popover&gt;\n                            &lt;x-slot:trigger&gt;\n                                &lt;x-button icon=\"s-chevron-up\" wire:click=\"up({{ $footer-&gt;id }})\" spinner /&gt;\n                            &lt;/x-slot:trigger&gt;\n                            &lt;x-slot:content class=\"pop-small\"&gt;\n                                @lang('Up')\n                            &lt;/x-slot:content&gt;\n                        &lt;/x-popover&gt;\n                    @endif\n                    @if ($footer-&gt;order &lt; $footers-&gt;count())\n                        &lt;x-popover&gt;\n                            &lt;x-slot:trigger&gt;\n                                &lt;x-button icon=\"s-chevron-down\" wire:click=\"down({{ $footer-&gt;id }})\" spinner /&gt;\n                            &lt;/x-slot:trigger&gt;\n                            &lt;x-slot:content class=\"pop-small\"&gt;\n                                @lang('Down')\n                            &lt;/x-slot:content&gt;\n                        &lt;/x-popover&gt;\n                    @endif\n                    &lt;x-popover&gt;\n                        &lt;x-slot:trigger&gt;\n                            &lt;x-button icon=\"c-arrow-path-rounded-square\" link=\"{{ route('footers.edit', $footer-&gt;id) }}\" class=\"text-blue-500 btn-ghost btn-sm\" spinner /&gt;\n                        &lt;/x-slot:trigger&gt;\n                        &lt;x-slot:content class=\"pop-small\"&gt;\n                            @lang('Edit')\n                        &lt;/x-slot:content&gt;\n                    &lt;/x-popover&gt;\n                    &lt;x-popover&gt;\n                        &lt;x-slot:trigger&gt;\n                            &lt;x-button icon=\"o-trash\" wire:click=\"deleteFooter({{ $footer-&gt;id }})\"\n                                wire:confirm=\"{{ __('Are you sure to delete this footer?') }}\" spinner\n                                class=\"text-red-500 btn-ghost btn-sm\" /&gt;\n                        &lt;/x-slot:trigger&gt;\n                        &lt;x-slot:content class=\"pop-small\"&gt;\n                            @lang('Delete')\n                        &lt;/x-slot:content&gt;\n                    &lt;/x-popover&gt;\n                &lt;/x-slot:actions&gt;\n            &lt;/x-list-item&gt;\n        @endforeach\n\n    &lt;/x-card&gt;\n\n    &lt;br&gt;\n\n    &lt;x-card class=\"\" title=\"{{ __('Create a new footer') }}\"&gt;\n\n        &lt;x-form wire:submit=\"saveFooter\"&gt;\n            &lt;x-input label=\"{{ __('Title') }}\" wire:model=\"label\" /&gt;\n            &lt;x-input type=\"text\" wire:model=\"link\"\n                label=\"{{ __('Link') }} ({{ __('i.e.') }}: /{{ __('my_page') }}, /pages/slug {{ __('or') }} /pages/{{ strtolower(__('Folder')) }}/{{ __('my_page') }}-1)\" /&gt;\n            &lt;x-slot:actions&gt;\n                &lt;x-button label=\"{{ __('Save') }}\" icon=\"o-paper-airplane\" spinner=\"save\" type=\"submit\"\n                    class=\"btn-primary\" /&gt;\n            &lt;/x-slot:actions&gt;\n        &lt;/x-form&gt;\n    &lt;/x-card&gt;\n&lt;/div&gt;\n</code></pre>","children":[]},{"content":"<pre><code class=\"language-php\"><span class=\"hljs-string\">\"Edit a footer\"</span>: <span class=\"hljs-string\">\"Modifier le pied de page\"</span>,\n<span class=\"hljs-string\">\"Footer deleted with success.\"</span>: <span class=\"hljs-string\">\"Pied de page supprimé avec succès.\"</span>,\n<span class=\"hljs-string\">\"Create a new footer\"</span>: <span class=\"hljs-string\">\"Créer un nouveau pied de page\"</span>,\n<span class=\"hljs-string\">\"Are you sure to delete this footer?\"</span>: <span class=\"hljs-string\">\"Êtes-vous sûr de vouloir supprimer ce menu de pied de page ?\"</span>\n</code></pre>","children":[]}],"payload":{"lines":"7242,7243","fold":1}},{"content":"Traductions admin.menus.footers","children":[{"content":"<pre><code class=\"language-php\"><span class=\"hljs-string\">\"Edit a footer\"</span>: <span class=\"hljs-string\">\"Modifier le pied de page\"</span>,\n<span class=\"hljs-string\">\"Footer deleted with success.\"</span>: <span class=\"hljs-string\">\"Pied de page supprimé avec succès.\"</span>,\n<span class=\"hljs-string\">\"Create a new footer\"</span>: <span class=\"hljs-string\">\"Créer un nouveau pied de page\"</span>,\n<span class=\"hljs-string\">\"Are you sure to delete this footer?\"</span>: <span class=\"hljs-string\">\"Êtes-vous sûr de vouloir supprimer ce menu de pied de page ?\"</span>,\n<span class=\"hljs-string\">\"i.e.\"</span>: <span class=\"hljs-string\">\"Ex. \"</span>,\n<span class=\"hljs-string\">\"my_page\"</span>: <span class=\"hljs-string\">\"ma_page\"</span>,\n<span class=\"hljs-string\">\"or\"</span>: <span class=\"hljs-string\">\"ou\"</span>,\n<span class=\"hljs-string\">\"Folder\"</span>: <span class=\"hljs-string\">\"Dossier\"</span>\n</code></pre>","children":[]}],"payload":{"lines":"7408,7409","fold":1}}],"payload":{"lines":"7234,7235"}}],"payload":{"lines":"7213,7214","fold":1}},{"content":"Modification du menu du footer","children":[{"content":"Route admin.menus.editfooter","children":[{"content":"<pre><code class=\"language-php\"><span class=\"hljs-title class_\">Volt</span>::<span class=\"hljs-title function_ invoke__\">route</span>(<span class=\"hljs-string\">'/footers/{footer}/edit'</span>, <span class=\"hljs-string\">'admin.menus.editfooter'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">name</span>(<span class=\"hljs-string\">'footers.edit'</span>);\n</code></pre>","children":[]}],"payload":{"lines":"7423,7424"}},{"content":"Lien Modification d'un menu du footer dans la liste (admin.menus.footer)","children":[{"content":"<pre data-lines=\"7431,7432\"><code>(Déjà posé dans le code)\n</code></pre>","children":[],"payload":{"lines":"7431,7432"}},{"content":"<pre><code class=\"language-php\">&lt;x-button icon=\"c-arrow-path-rounded-square\" link=\"{{ route('footers.edit', $footer-&gt;id) }}\" class=\"text-blue-500 btn-ghost btn-sm\" spinner /&gt;\n</code></pre>","children":[]}],"payload":{"lines":"7429,7430"}},{"content":"Composant modification d'un menu footer (admin.menus.editfooter)","children":[{"content":"Création admin.menus.editfooter","children":[{"content":"<pre><code class=\"language-php\">php artisan make:volt admin/menus/editfooter --<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span>\n</span></code></pre>","children":[]}],"payload":{"lines":"7439,7440","fold":1}},{"content":"Code admin.menus.editfooter","children":[{"content":"<pre><code class=\"language-php\">&lt;?php\nuse Mary\\Traits\\Toast;\nuse App\\Models\\Footer;\nuse Livewire\\Volt\\Component;\nuse Illuminate\\Validation\\Rule;\nuse Livewire\\Attributes\\{Layout, Title};\n\nnew #[Title('Edit Footer'), Layout('components.layouts.admin')] \nclass extends Component {\n    use Toast;\n    \n    public Footer $footer;\n    public string $label = '';\n    public string $link  = '';\n    \n    public function mount(Footer $footer): void {\n        $this-&gt;footer = $footer;\n        $this-&gt;fill($this-&gt;footer);\n    }\n    \n    public function save(): void {\n        $data = $this-&gt;validate([\n            'label' =&gt; ['required', 'string', 'max:255', Rule::unique('footers')-&gt;ignore($this-&gt;footer-&gt;id)],\n            'link'  =&gt; 'regex:/\\/([a-z0-9_-]\\/*)*[a-z0-9_-]*/',\n        ]);\n    \n        $this-&gt;footer-&gt;update($data);\n    \n        $this-&gt;success(__('Footer updated with success.'), redirectTo: '/admin/footers/index');\n  }\n}; ?&gt;\n\n&lt;div&gt;\n    &lt;x-header title=\"{{ __('Edit a footer') }}\" separator progress-indicator&gt;\n        &lt;x-slot:actions class=\"lg:hidden\"&gt;\n            &lt;x-button icon=\"s-building-office-2\" label=\"{{ __('Dashboard') }}\" class=\"btn-outline\"\n                link=\"{{ route('admin') }}\" /&gt;\n        &lt;/x-slot:actions&gt;\n    &lt;/x-header&gt;\n    &lt;x-card&gt;\n        &lt;x-form wire:submit=\"save\"&gt;\n            &lt;x-input label=\"{{ __('Title') }}\" wire:model=\"label\" /&gt;\n            &lt;x-input type=\"text\" wire:model=\"link\" label=\"{{ __('Link') }}\" /&gt;\n            &lt;x-slot:actions&gt;\n                &lt;x-button label=\"{{ __('Save') }}\" icon=\"o-paper-airplane\" spinner=\"save\" type=\"submit\"\n                    class=\"btn-primary\" /&gt;\n            &lt;/x-slot:actions&gt;\n        &lt;/x-form&gt;\n    &lt;/x-card&gt;\n&lt;/div&gt;\n</code></pre>","children":[]},{"content":"<pre><code class=\"language-php\"><span class=\"hljs-string\">\"Footer updated with success.\"</span>: <span class=\"hljs-string\">\"Pied de page mis à jour avec succès\"</span>\n</code></pre>","children":[]}],"payload":{"lines":"7445,7446","fold":1}}],"payload":{"lines":"7437,7438"}}],"payload":{"lines":"7421,7422","fold":1}},{"content":"Réf.: <em><strong><a href=\"https://laravel.sillo.org/posts/mon-cms-les-menus-partie-2\">https://laravel.sillo.org/posts/mon-cms-les-menus-partie-2</a></strong></em>","children":[],"payload":{"lines":"7504,7505"}}],"payload":{"lines":"6555,6556","fold":1}},{"content":"- Les Médias","children":[{"content":"1 ) &nbsp;Gestion des Images","children":[{"content":"Route admin.images.index","children":[{"content":"<pre data-lines=\"7512,7514\"><code>À noter : La route images.edit est créée 'en avance' car nécessaire dans la vue images.index\n(Cela évite une erreur à l'affichage si on clique maintenant sur le lien de la sidebar...)\n</code></pre>","children":[],"payload":{"lines":"7512,7514"}},{"content":"<pre><code class=\"language-php\"><span class=\"hljs-title class_\">Route</span>::<span class=\"hljs-title function_ invoke__\">middleware</span>(<span class=\"hljs-string\">'auth'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">group</span>(function () {\n    ...\n    <span class=\"hljs-title class_\">Route</span>::<span class=\"hljs-title function_ invoke__\">middleware</span>(<span class=\"hljs-title class_\">IsAdminOrRedac</span>::<span class=\"hljs-variable language_\">class</span>)-&gt;<span class=\"hljs-title function_ invoke__\">prefix</span>(<span class=\"hljs-string\">'admin'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">group</span>(function () {\n        ...\n        <span class=\"hljs-title class_\">Route</span>::<span class=\"hljs-title function_ invoke__\">middleware</span>(<span class=\"hljs-title class_\">IsAdmin</span>::<span class=\"hljs-variable language_\">class</span>)-&gt;<span class=\"hljs-title function_ invoke__\">group</span>(function () {\n            ...\n            <span class=\"hljs-title class_\">Volt</span>::<span class=\"hljs-title function_ invoke__\">route</span>(<span class=\"hljs-string\">'/images/index'</span>, <span class=\"hljs-string\">'admin.images.index'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">name</span>(<span class=\"hljs-string\">'images.index'</span>);\n            <span class=\"hljs-title class_\">Volt</span>::<span class=\"hljs-title function_ invoke__\">route</span>(<span class=\"hljs-string\">'/images/{year}/{month}/{id}/edit'</span>, <span class=\"hljs-string\">'admin.images.edit'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">name</span>(<span class=\"hljs-string\">'images.edit'</span>);\n</code></pre>","children":[]}],"payload":{"lines":"7510,7511","fold":1}},{"content":"Lien admin.images.index dans admin.sidebar","children":[{"content":"<pre><code class=\"language-php\">... Route Menus\n    &lt;/x-menu-sub&gt;\n    @<span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title class_\">Auth</span>::<span class=\"hljs-title function_ invoke__\">user</span>()-&gt;<span class=\"hljs-title function_ invoke__\">isAdmin</span>())\n        ...\n        &lt;x-menu-item icon=<span class=\"hljs-string\">\"c-photo\"</span> title=<span class=\"hljs-string\">\"{{ __('Images') }}\"</span> link=<span class=\"hljs-string\">\"{{ route('images.index') }}\"</span> /&gt;\n    @<span class=\"hljs-keyword\">endif</span>\n@<span class=\"hljs-keyword\">endif</span>\n</code></pre>","children":[]}],"payload":{"lines":"7526,7527","fold":1}},{"content":"Composant admin.images.index","children":[{"content":"Création composant admin.images.index","children":[{"content":"<pre><code class=\"language-php\">php artisan make:volt admin/images/index --<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span>\n</span></code></pre>","children":[]}],"payload":{"lines":"7540,7541","fold":1}},{"content":"Code composant admin.images.index","children":[{"content":"À noter : La fonction \"Gérer l'image\" n'est pas encore codée","children":[],"payload":{"lines":"7548,7549"}},{"content":"<em>Le code étant un peu long, il est scindé en 2 fichiers</em> <strong>:</strong>","children":[],"payload":{"lines":"7550,7551"}},{"content":"PHP : Créer admin/images/index_images.php","children":[{"content":"<pre><code class=\"language-php\"><span class=\"hljs-meta\">&lt;?php</span>\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Mary</span>\\<span class=\"hljs-title\">Traits</span>\\<span class=\"hljs-title\">Toast</span>;\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Livewire</span>\\<span class=\"hljs-title\">Volt</span>\\<span class=\"hljs-title\">Component</span>;\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Livewire</span>\\<span class=\"hljs-title\">WithPagination</span>;\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Support</span>\\<span class=\"hljs-title\">Collection</span>;\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Support</span>\\<span class=\"hljs-title\">Facades</span>\\<span class=\"hljs-title\">Storage</span>;\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Livewire</span>\\<span class=\"hljs-title\">Attributes</span>\\{<span class=\"hljs-title\">Layout</span>, <span class=\"hljs-title\">Title</span>};\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Pagination</span>\\<span class=\"hljs-title\">LengthAwarePaginator</span>;\n\n<span class=\"hljs-keyword\">new</span> <span class=\"hljs-meta\">#[Title</span>(<span class=\"hljs-string\">'Images'</span>)<span class=\"hljs-meta\">]</span> <span class=\"hljs-meta\">#[Layout</span>(<span class=\"hljs-string\">'components.layouts.admin'</span>)<span class=\"hljs-meta\">]</span>\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">Component</span> </span>{\n    <span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Toast</span>;\n    <span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">WithPagination</span>;\n    \n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">array</span> <span class=\"hljs-variable\">$allImages</span> = [];\n    <span class=\"hljs-keyword\">public</span> Collection <span class=\"hljs-variable\">$years</span>;\n    <span class=\"hljs-keyword\">public</span> Collection <span class=\"hljs-variable\">$months</span>;\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-variable\">$selectedYear</span>;\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-variable\">$selectedMonth</span>;\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-variable\">$perPage</span> = <span class=\"hljs-number\">10</span>;\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-variable\">$page</span>    = <span class=\"hljs-number\">1</span>;\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-variable\">$myDirectory</span>;\n    \n    <span class=\"hljs-comment\">// Définir les en-têtes de table.</span>\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">headers</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">array</span> </span>{\n        <span class=\"hljs-keyword\">return</span> [\n            [<span class=\"hljs-string\">'key'</span> =&gt; <span class=\"hljs-string\">'image'</span>, <span class=\"hljs-string\">'label'</span> =&gt; <span class=\"hljs-string\">'Image'</span>], <span class=\"hljs-comment\">// Colonne ne correspondant pas à un champs de la BdD</span>\n            [<span class=\"hljs-string\">'key'</span> =&gt; <span class=\"hljs-string\">'path'</span>, <span class=\"hljs-string\">'label'</span> =&gt; <span class=\"hljs-title function_ invoke__\">__</span>(<span class=\"hljs-string\">'Path'</span>) . <span class=\"hljs-string\">' (/photos/)'</span>],\n            [<span class=\"hljs-string\">'key'</span> =&gt; <span class=\"hljs-string\">'actions'</span>, <span class=\"hljs-string\">'label'</span> =&gt; <span class=\"hljs-string\">'Actions'</span>, <span class=\"hljs-string\">'class'</span> =&gt; <span class=\"hljs-string\">'bg-red-500/10 text-center'</span>], <span class=\"hljs-comment\">// 3 colonnes groupées</span>\n        ];\n    }\n    \n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">mount</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">void</span> </span>{\n        <span class=\"hljs-variable language_\">$this</span>-&gt;years  = <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">getYears</span>();\n        <span class=\"hljs-variable language_\">$this</span>-&gt;months = <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">getMonths</span>(<span class=\"hljs-variable\">$this</span>-&gt;selectedYear);\n        <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">getImages</span>();\n    }\n    \n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">updating</span>(<span class=\"hljs-params\"><span class=\"hljs-variable\">$property</span>, <span class=\"hljs-variable\">$value</span></span>): <span class=\"hljs-title\">void</span> </span>{\n        <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-string\">'selectedYear'</span> == <span class=\"hljs-variable\">$property</span>) {\n            <span class=\"hljs-variable language_\">$this</span>-&gt;months = <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">getMonths</span>(<span class=\"hljs-variable\">$value</span>);\n        }\n    }\n    \n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">getImages</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">LengthAwarePaginator</span> </span>{\n        <span class=\"hljs-variable\">$imagesPath</span> = <span class=\"hljs-string\">\"photos/<span class=\"hljs-subst\">{$this-&gt;selectedYear}</span>/<span class=\"hljs-subst\">{$this-&gt;selectedMonth}</span>\"</span>;\n        <span class=\"hljs-variable\">$allFiles</span>   = <span class=\"hljs-title class_\">Storage</span>::<span class=\"hljs-title function_ invoke__\">disk</span>(<span class=\"hljs-string\">'public'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">files</span>(<span class=\"hljs-variable\">$imagesPath</span>);\n    \n        <span class=\"hljs-variable language_\">$this</span>-&gt;allImages = <span class=\"hljs-title function_ invoke__\">collect</span>(<span class=\"hljs-variable\">$allFiles</span>)\n            -&gt;<span class=\"hljs-title function_ invoke__\">map</span>(function (<span class=\"hljs-variable\">$file</span>) {\n                <span class=\"hljs-keyword\">return</span> [\n                    <span class=\"hljs-string\">'path'</span> =&gt; (<span class=\"hljs-title function_ invoke__\">strlen</span>(<span class=\"hljs-variable\">$file</span>) &gt; <span class=\"hljs-number\">30</span>) ? <span class=\"hljs-title function_ invoke__\">substr</span>(<span class=\"hljs-variable\">$file</span>, <span class=\"hljs-number\">7</span>, <span class=\"hljs-number\">13</span>) . <span class=\"hljs-string\">' ... '</span> . <span class=\"hljs-title function_ invoke__\">substr</span>(<span class=\"hljs-variable\">$file</span>, -<span class=\"hljs-number\">9</span>) : <span class=\"hljs-title function_ invoke__\">substr</span>(<span class=\"hljs-variable\">$file</span>, <span class=\"hljs-number\">7</span>, <span class=\"hljs-number\">23</span>),\n                    <span class=\"hljs-comment\">// 'path' =&gt; $file,</span>\n                    <span class=\"hljs-string\">'url'</span> =&gt; <span class=\"hljs-title class_\">Storage</span>::<span class=\"hljs-title function_ invoke__\">disk</span>(<span class=\"hljs-string\">'public'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">url</span>(<span class=\"hljs-variable\">$file</span>),\n                ];\n            })\n            -&gt;<span class=\"hljs-title function_ invoke__\">toArray</span>();\n    \n        <span class=\"hljs-variable language_\">$this</span>-&gt;page = <span class=\"hljs-title class_\">LengthAwarePaginator</span>::<span class=\"hljs-title function_ invoke__\">resolveCurrentPage</span>(<span class=\"hljs-string\">'page'</span>);\n        <span class=\"hljs-variable\">$total</span>      = <span class=\"hljs-title function_ invoke__\">count</span>(<span class=\"hljs-variable\">$this</span>-&gt;allImages);\n        <span class=\"hljs-variable\">$images</span>     = <span class=\"hljs-title function_ invoke__\">array_slice</span>(<span class=\"hljs-variable\">$this</span>-&gt;allImages, (<span class=\"hljs-variable\">$this</span>-&gt;page - <span class=\"hljs-number\">1</span>) * <span class=\"hljs-variable language_\">$this</span>-&gt;perPage, <span class=\"hljs-variable language_\">$this</span>-&gt;perPage, <span class=\"hljs-literal\">true</span>);\n    \n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">LengthAwarePaginator</span>(<span class=\"hljs-variable\">$images</span>, <span class=\"hljs-variable\">$total</span>, <span class=\"hljs-variable language_\">$this</span>-&gt;perPage, <span class=\"hljs-variable language_\">$this</span>-&gt;page, [\n            <span class=\"hljs-string\">'path'</span>     =&gt; <span class=\"hljs-title class_\">LengthAwarePaginator</span>::<span class=\"hljs-title function_ invoke__\">resolveCurrentPath</span>(),\n            <span class=\"hljs-string\">'pageName'</span> =&gt; <span class=\"hljs-string\">'page'</span>,\n        ]);\n    }\n    \n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">deleteImage</span>(<span class=\"hljs-params\"><span class=\"hljs-variable\">$index</span></span>): <span class=\"hljs-title\">void</span> </span>{\n        <span class=\"hljs-variable\">$url</span> = <span class=\"hljs-variable language_\">$this</span>-&gt;allImages[<span class=\"hljs-variable\">$index</span>][<span class=\"hljs-string\">'url'</span>];\n    \n        <span class=\"hljs-comment\">// Trouver la position de '/storage'</span>\n        <span class=\"hljs-variable\">$pos</span> = <span class=\"hljs-title function_ invoke__\">strpos</span>(<span class=\"hljs-variable\">$url</span>, <span class=\"hljs-string\">'/storage'</span>);\n        <span class=\"hljs-comment\">// Extraire la partie de l'URL après '/storage'</span>\n        <span class=\"hljs-variable\">$path</span> = <span class=\"hljs-title function_ invoke__\">substr</span>(<span class=\"hljs-variable\">$url</span>, <span class=\"hljs-variable\">$pos</span> + <span class=\"hljs-title function_ invoke__\">strlen</span>(<span class=\"hljs-string\">'/storage'</span>));\n        <span class=\"hljs-comment\">// dd($index, $url, $relativePath);</span>\n    \n        <span class=\"hljs-title class_\">Storage</span>::<span class=\"hljs-title function_ invoke__\">disk</span>(<span class=\"hljs-string\">'public'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">delete</span>(<span class=\"hljs-variable\">$path</span>);\n    \n        <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">success</span>(<span class=\"hljs-title function_ invoke__\">__</span>(<span class=\"hljs-string\">'Image deleted with success.'</span>));\n    \n        <span class=\"hljs-comment\">// $this-&gt;getImages();</span>\n        <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">deleteDirectoryIfEmpty</span>();\n    }\n    \n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">deleteDirectoryIfEmpty</span>(<span class=\"hljs-params\"></span>) </span>{\n        <span class=\"hljs-variable\">$directory</span> = <span class=\"hljs-string\">\"photos/<span class=\"hljs-subst\">{$this-&gt;selectedYear}</span>/<span class=\"hljs-subst\">{$this-&gt;selectedMonth}</span>\"</span>;\n        <span class=\"hljs-variable\">$files</span>     = <span class=\"hljs-title class_\">Storage</span>::<span class=\"hljs-title function_ invoke__\">disk</span>(<span class=\"hljs-string\">'public'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">files</span>(<span class=\"hljs-variable\">$directory</span>);\n    \n        <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-number\">0</span> == <span class=\"hljs-title function_ invoke__\">count</span>(<span class=\"hljs-variable\">$files</span>)) {\n            <span class=\"hljs-title class_\">Storage</span>::<span class=\"hljs-title function_ invoke__\">disk</span>(<span class=\"hljs-string\">'public'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">deleteDirectory</span>(<span class=\"hljs-variable\">$directory</span>);\n            <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">success</span>(<span class=\"hljs-title function_ invoke__\">__</span>(<span class=\"hljs-string\">'Image and empty directory deleted with success.'</span>));\n            <span class=\"hljs-title function_ invoke__\">redirect</span>()-&gt;<span class=\"hljs-title function_ invoke__\">route</span>(<span class=\"hljs-string\">'images.index'</span>);\n        } <span class=\"hljs-keyword\">else</span> {\n            <span class=\"hljs-comment\">// $this-&gt;error(__('Directory is not empty.'));</span>\n            <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">success</span>(<span class=\"hljs-title function_ invoke__\">__</span>(<span class=\"hljs-string\">'Image deleted with success.'</span>));\n            <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">getImages</span>();\n        }\n    }\n    \n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">with</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">array</span> </span>{\n        <span class=\"hljs-keyword\">return</span> [\n            <span class=\"hljs-string\">'headers'</span> =&gt; <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">headers</span>(),\n            <span class=\"hljs-string\">'images'</span>  =&gt; <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">getImages</span>(),\n        ];\n    }\n    \n    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">getYears</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">Collection</span> </span>{\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">getDirectories</span>(<span class=\"hljs-string\">'photos'</span>, function (<span class=\"hljs-variable\">$years</span>) {\n            <span class=\"hljs-variable language_\">$this</span>-&gt;selectedYear = <span class=\"hljs-variable\">$years</span>-&gt;<span class=\"hljs-title function_ invoke__\">first</span>()[<span class=\"hljs-string\">'id'</span>] ?? <span class=\"hljs-literal\">null</span>;\n    \n            <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable\">$years</span>;\n        });\n    }\n    \n    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">getMonths</span>(<span class=\"hljs-params\"><span class=\"hljs-variable\">$year</span></span>): <span class=\"hljs-title\">Collection</span> </span>{\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">getDirectories</span>(<span class=\"hljs-string\">\"photos/<span class=\"hljs-subst\">{$year}</span>\"</span>, function (<span class=\"hljs-variable\">$months</span>) {\n            <span class=\"hljs-variable language_\">$this</span>-&gt;selectedMonth = <span class=\"hljs-variable\">$months</span>-&gt;<span class=\"hljs-title function_ invoke__\">first</span>()[<span class=\"hljs-string\">'id'</span>] ?? <span class=\"hljs-literal\">null</span>;\n            <span class=\"hljs-comment\">// À activer avec l'exemple de débogage à dé-commenter aussi (en fin de ce code)</span>\n            <span class=\"hljs-comment\">// IMPORTANT: Faire une copie de l'image de ce dossier 07 pour la régénérer aisément...</span>\n            <span class=\"hljs-comment\">// $this-&gt;selectedMonth = '07'; // '07' par défaut</span>\n            <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">getImages</span>();\n    \n            <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable\">$months</span>;\n        });\n    }\n    \n    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">getDirectories</span>(<span class=\"hljs-params\"><span class=\"hljs-keyword\">string</span> <span class=\"hljs-variable\">$basePath</span>, <span class=\"hljs-built_in\">Closure</span> <span class=\"hljs-variable\">$callback</span></span>): <span class=\"hljs-title\">Collection</span> </span>{\n        <span class=\"hljs-variable\">$directories</span> = <span class=\"hljs-title class_\">Storage</span>::<span class=\"hljs-title function_ invoke__\">disk</span>(<span class=\"hljs-string\">'public'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">directories</span>(<span class=\"hljs-variable\">$basePath</span>);\n  \n      <span class=\"hljs-variable\">$items</span> = <span class=\"hljs-title function_ invoke__\">collect</span>(<span class=\"hljs-variable\">$directories</span>)-&gt;<span class=\"hljs-title function_ invoke__\">map</span>(function (<span class=\"hljs-variable\">$path</span>) {\n          <span class=\"hljs-variable\">$name</span> = <span class=\"hljs-title function_ invoke__\">basename</span>(<span class=\"hljs-variable\">$path</span>);\n  \n          <span class=\"hljs-keyword\">return</span> [<span class=\"hljs-string\">'id'</span> =&gt; <span class=\"hljs-variable\">$name</span>, <span class=\"hljs-string\">'name'</span> =&gt; <span class=\"hljs-variable\">$name</span>];\n      })-&gt;<span class=\"hljs-title function_ invoke__\">sortByDesc</span>(<span class=\"hljs-string\">'id'</span>);\n  \n      <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable\">$callback</span>(<span class=\"hljs-variable\">$items</span>);\n    }\n};\n</code></pre>","children":[]}],"payload":{"lines":"7552,7553","fold":1}},{"content":"BLADE (Le fichier créé par la commande en CLI) - admin/images/index.blade.php","children":[{"content":"<pre><code class=\"language-php\">&lt;?php\ninclude_once 'index_images.php';\n?&gt;\n\n&lt;div&gt;\n    &lt;x-header title=\"{{ __('Images') }}\" separator progress-indicator&gt;\n        &lt;x-slot:actions class=\"lg:hidden\"&gt;\n            &lt;x-button icon=\"s-building-office-2\" label=\"{{ __('Dashboard') }}\" class=\"btn-outline\"\n                link=\"{{ route('admin') }}\" /&gt;\n        &lt;/x-slot:actions&gt;\n    &lt;/x-header&gt;\n\n    &lt;x-card title=\"{!! __('Select year and month') !!}\" class=\"shadow-md\"&gt;\n        &lt;x-select label=\"{{ __('Year') }}\" :options=\"$years\" wire:model=\"selectedYear\" wire:change=\"$refresh\" /&gt;\n        &lt;br&gt;\n        &lt;x-select label=\"{{ __('Month') }}\" :options=\"$months\" wire:model=\"selectedMonth\" wire:change=\"$refresh\" /&gt;\n    &lt;/x-card&gt;\n\n    &lt;x-card&gt;\n        &lt;x-table striped :headers=\"$headers\" :rows=\"$images\" class=\"border-2 border-red-500/10\" with-pagination&gt;\n\n            @scope('cell_image', $image)\n                &lt;div class=\"w-20 border-white border-[3px]\"&gt;\n                    &lt;a href=\"{{ $image['url'] }}\" target=\"_blank\"&gt;\n                        &lt;img src=\"{{ $image['url'] }}\" alt=\"\" title=\"{{ __('Click here to see bigger!') }}\"&gt;\n                    &lt;/a&gt;\n                    {{-- {{ dd($image) }} --}}\n                &lt;/div&gt;\n            @endscope\n\n            @scope('cell_actions', $image, $selectedYear, $selectedMonth, $perPage, $page, $loop)\n                &lt;div class=\"flex flex-nowrap justify-center text-center gap-2 h-12\"&gt;\n                    &lt;x-popover&gt;\n\n                        &lt;x-slot:trigger&gt;\n                            &lt;x-button icon=\"s-briefcase\" data-url=\"{{ $image['url'] }}\" onClick=\"copyUrl(this)\"\n                                class=\"text-blue-500 btn-ghost btn-sm\" spinner /&gt;\n                        &lt;/x-slot:trigger&gt;\n                        &lt;x-slot:content class=\"pop-small\"&gt;\n                            @lang('Copy url')\n                        &lt;/x-slot:content&gt;\n\n                    &lt;/x-popover&gt;\n                    &lt;x-popover&gt;\n\n                        &lt;x-slot:trigger&gt;\n                            &lt;x-button icon=\"c-wrench\"\n                                link=\"{{ route('images.edit', ['year' =&gt; $selectedYear, 'month' =&gt; $selectedMonth, 'id' =&gt; $loop-&gt;index + ($page - 1) * $perPage]) }}\"\n                                class=\"text-blue-500 btn-ghost btn-sm\" spinner /&gt;\n                        &lt;/x-slot:trigger&gt;\n                        &lt;x-slot:content class=\"pop-small\"&gt;\n                            @lang('Manage image')\n                        &lt;/x-slot:content&gt;\n\n                    &lt;/x-popover&gt;\n                    &lt;x-popover class=\"border-white border-2\"&gt;\n\n                        &lt;x-slot:trigger&gt;\n                            &lt;x-button icon=\"o-trash\" wire:click=\"deleteImage({{ $loop-&gt;index }})\"\n                                wire:confirm=\"{{ __('Are you sure to delete this image?') }}\" spinner\n                                class=\"text-red-500 btn-ghost btn-sm\" /&gt;\n                        &lt;/x-slot:trigger&gt;\n                        &lt;x-slot:content class=\"pop-small\"&gt;\n                            @lang('Delete image')\n                        &lt;/x-slot:content&gt;\n\n                    &lt;/x-popover&gt;\n                &lt;/div&gt;\n            @endscope\n        &lt;/x-table&gt;\n\n        &lt;x-header class=\"my-3 mb-0\" separator progress-indicator /&gt;\n\n        {{--\n        &lt;h3 class=\"text-xl font-bold\"&gt;Exemple de débogage rapide :&lt;/h3&gt;\n        &lt;pre&gt;\n            @php\n                $imagesPath = \"photos/{$this-&gt;selectedYear}/{$this-&gt;selectedMonth}\";\n                $allFiles = Storage::disk('public')-&gt;files($imagesPath);\n                echo 'Dossier demandé : ' . $imagesPath . '&lt;br&gt;';\n                // var_dump($allFiles);\n                print_r($allFiles);\n                echo '&lt;br&gt;&lt;hr&gt;&lt;br&gt;';\n\n                // Exemple de l'image 2024/07 :\n                $path = '/photos/2024/07/j6pMm9U3u2VbmaHYePcDfXzeHC3hIn8fvjH7nlzo.jpg';\n                echo 'La photo : &lt;b&gt;photos/2024/07/j6pMm9U3u2VbmaHYePcDfXzeHC3hIn8fvjH7nlzo.jpg&lt;/b&gt;&lt;br&gt;\n                existe t\\'elle dans 2024/07 ? &lt;b&gt;' . (Storage::disk('public')-&gt;exists($path) ? 'Oui' : 'Non').' !&lt;/b&gt;';\n                // Attention: Décommenter ci-dessous effacera réellement l'image...Conserver la copie pour une restauration facile\n                // Storage::disk('public')-&gt;delete($path);\n            @endphp\n        &lt;/pre&gt;\n        --}}\n\n    &lt;/x-card&gt;\n    &lt;script&gt;\n        function copyUrl(button) {\n            const url = button.getAttribute('data-url');\n            const textArea = document.createElement('textarea');\n            textArea.value = url;\n            document.body.appendChild(textArea);\n            textArea.select();\n            try {\n                document.execCommand('copy');\n                alert('URL copiée : ' + url);\n            } catch (err) {\n                console.error('Erreur lors de la copie de l\\'URL: ', err);\n            }\n            document.body.removeChild(textArea);\n        }\n    &lt;/script&gt;\n&lt;/div&gt;\n</code></pre>","children":[]}],"payload":{"lines":"7696,7697","fold":1}}],"payload":{"lines":"7546,7547","fold":1}},{"content":"Traduction code composant admin.images.index","children":[{"content":"<pre><code class=\"language-json\"><span class=\"hljs-attr\">\"Select year and month\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Sélectionner l'année et le mois\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Year\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Année\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Month\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Mois\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Click here to see bigger!\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Cliquer ici pour voir en plus grand !\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Path\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Chemin\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Copy url\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Copier l'URL\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Manage image\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Gérer l'image\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Delete image\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Supprimer l'image\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Image deleted with success.\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Image supprimée avec succès.\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Image and empty directory deleted with success.\"</span><span class=\"hljs-punctuation\">:</span><span class=\"hljs-string\">\"Image et dossier (vide) supprimés avec succès.\"</span>\n</code></pre>","children":[]}],"payload":{"lines":"7813,7814","fold":1}}],"payload":{"lines":"7538,7539","fold":1}}],"payload":{"lines":"7508,7509","fold":1}},{"content":"Réf.: <em><strong><a href=\"https://laravel.sillo.org/posts/mon-cms-les-medias-partie-1\">https://laravel.sillo.org/posts/mon-cms-les-medias-partie-1</a></strong></em>","children":[],"payload":{"lines":"7828,7829"}},{"content":"2 ) &nbsp;Modification des Images","children":[{"content":"Route admin.images.edit (Déjà créée à l'étape précédente, gestion des Images)","children":[],"payload":{"lines":"7832,7833"}},{"content":"Lien admin.images.edit dans admin.images.index (Partie Blade)","children":[{"content":"<pre data-lines=\"7836,7837\"><code>(Déjà posé aussi)\n</code></pre>","children":[],"payload":{"lines":"7836,7837"}},{"content":"<pre><code class=\"language-php\">&lt;x-popover&gt;\n    &lt;x-slot:trigger&gt;\n        &lt;x-button icon=<span class=\"hljs-string\">\"c-wrench\"</span>\n            link=<span class=\"hljs-string\">\"{{ route('images.edit', ['year' =&gt; <span class=\"hljs-subst\">$selectedYear</span>, 'month' =&gt; <span class=\"hljs-subst\">$selectedMonth</span>, 'id' =&gt; <span class=\"hljs-subst\">$loop</span>-&gt;index + (<span class=\"hljs-subst\">$page</span> - 1) * <span class=\"hljs-subst\">$perPage</span>]) }}\"</span>...\n</code></pre>","children":[]}],"payload":{"lines":"7834,7835","fold":1}},{"content":"Package  Intervention Image","children":[{"content":"Installation Intervention Image","children":[{"content":"<pre><code class=\"language-php\">composer <span class=\"hljs-keyword\">require</span> intervention/image-laravel\n</code></pre>","children":[]}],"payload":{"lines":"7847,7848"}},{"content":"Publication de la configuration Intervention Image","children":[{"content":"<pre><code class=\"language-php\">php artisan vendor:publish --provider=<span class=\"hljs-string\">\"Intervention\\Image\\Laravel\\ServiceProvider\"</span>\n</code></pre>","children":[]}],"payload":{"lines":"7853,7854"}},{"content":"Réf.: <a href=\"https://image.intervention.io/v3/introduction/frameworks\">https://image.intervention.io</a>","children":[],"payload":{"lines":"7859,7860"}}],"payload":{"lines":"7845,7846","fold":1}},{"content":"Composant admin.images.edit","children":[{"content":"Création composant admin.images.edit","children":[{"content":"<pre><code class=\"language-php\">php artisan make:volt admin/images/edit --<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span>\n</span></code></pre>","children":[]}],"payload":{"lines":"7863,7864","fold":1}},{"content":"Code composant admin.images.edit","children":[{"content":"<em>Le code étant long, il est scindé en 2 fichiers</em> <strong>:</strong>","children":[],"payload":{"lines":"7871,7872"}},{"content":"PHP : Créer admin/images/edit_image.php","children":[{"content":"<pre><code class=\"language-php\"><span class=\"hljs-meta\">&lt;?php</span>\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Mary</span>\\<span class=\"hljs-title\">Traits</span>\\<span class=\"hljs-title\">Toast</span>;\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Livewire</span>\\<span class=\"hljs-title\">Volt</span>\\<span class=\"hljs-title\">Component</span>;\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">App</span>\\<span class=\"hljs-title\">Models</span>\\{<span class=\"hljs-title\">Page</span>, <span class=\"hljs-title\">Post</span>};\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Intervention</span>\\<span class=\"hljs-title\">Image</span>\\<span class=\"hljs-title\">ImageManager</span>;\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Livewire</span>\\<span class=\"hljs-title\">Attributes</span>\\{<span class=\"hljs-title\">Layout</span>, <span class=\"hljs-title\">Title</span>};\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Intervention</span>\\<span class=\"hljs-title\">Image</span>\\<span class=\"hljs-title\">Drivers</span>\\<span class=\"hljs-title\">Gd</span>\\<span class=\"hljs-title\">Driver</span>;\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Support</span>\\<span class=\"hljs-title\">Facades</span>\\{<span class=\"hljs-title\">File</span>, <span class=\"hljs-title\">Storage</span>};\n\n<span class=\"hljs-keyword\">new</span> <span class=\"hljs-meta\">#[Title</span>(<span class=\"hljs-string\">'Edit Image'</span>), <span class=\"hljs-meta\">Layout</span>(<span class=\"hljs-string\">'components.layouts.admin'</span>)<span class=\"hljs-meta\">]</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">Component</span> </span>{\n    <span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Toast</span>;\n    \n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-variable\">$year</span>;\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-variable\">$month</span>;\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-variable\">$id</span>;\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">string</span> <span class=\"hljs-variable\">$image</span>;\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">string</span> <span class=\"hljs-variable\">$displayImage</span>;\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">array</span> <span class=\"hljs-variable\">$usage</span>;\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">string</span> <span class=\"hljs-variable\">$fileName</span>;\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">string</span> <span class=\"hljs-variable\">$imagePath</span>;\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">string</span> <span class=\"hljs-variable\">$tempPath</span>;\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-variable\">$width</span>;\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-variable\">$height</span>;\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">string</span> <span class=\"hljs-variable\">$imageScale</span>  = <span class=\"hljs-string\">'1'</span>;\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">array</span> <span class=\"hljs-variable\">$selectValues</span> = [[<span class=\"hljs-string\">'id'</span> =&gt; <span class=\"hljs-string\">'1'</span>, <span class=\"hljs-string\">'name'</span> =&gt; <span class=\"hljs-string\">'1'</span>], [<span class=\"hljs-string\">'id'</span> =&gt; <span class=\"hljs-string\">'0.95'</span>, <span class=\"hljs-string\">'name'</span> =&gt; <span class=\"hljs-string\">'0.95'</span>], [<span class=\"hljs-string\">'id'</span> =&gt; <span class=\"hljs-string\">'0.9'</span>, <span class=\"hljs-string\">'name'</span> =&gt; <span class=\"hljs-string\">'0.9'</span>], [<span class=\"hljs-string\">'id'</span> =&gt; <span class=\"hljs-string\">'0.85'</span>, <span class=\"hljs-string\">'name'</span> =&gt; <span class=\"hljs-string\">'0.85'</span>], [<span class=\"hljs-string\">'id'</span> =&gt; <span class=\"hljs-string\">'0.8'</span>, <span class=\"hljs-string\">'name'</span> =&gt; <span class=\"hljs-string\">'0.8'</span>]];\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">string</span> <span class=\"hljs-variable\">$group</span>;\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-variable\">$brightness</span> = <span class=\"hljs-number\">0</span>;\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-variable\">$contrast</span>   = <span class=\"hljs-number\">0</span>;\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-variable\">$gamma</span>      = <span class=\"hljs-number\">10</span>;\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-variable\">$red</span>        = <span class=\"hljs-number\">0</span>;\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-variable\">$green</span>      = <span class=\"hljs-number\">0</span>;\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-variable\">$blue</span>       = <span class=\"hljs-number\">0</span>;\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-variable\">$reduce</span>     = <span class=\"hljs-number\">0</span>;\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-variable\">$blur</span>       = <span class=\"hljs-number\">0</span>;\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-variable\">$sharpen</span>    = <span class=\"hljs-number\">0</span>;\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">bool</span> <span class=\"hljs-variable\">$changed</span>;\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-variable\">$clipW</span> = <span class=\"hljs-number\">0</span>;\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-variable\">$clipH</span> = <span class=\"hljs-number\">0</span>;\n    \n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">mount</span>(<span class=\"hljs-params\"><span class=\"hljs-variable\">$year</span>, <span class=\"hljs-variable\">$month</span>, <span class=\"hljs-variable\">$id</span></span>): <span class=\"hljs-title\">void</span> </span>{\n        <span class=\"hljs-variable language_\">$this</span>-&gt;year  = <span class=\"hljs-variable\">$year</span>;\n        <span class=\"hljs-variable language_\">$this</span>-&gt;month = <span class=\"hljs-variable\">$month</span>;\n        <span class=\"hljs-variable language_\">$this</span>-&gt;id    = <span class=\"hljs-variable\">$id</span>;\n        <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">getImage</span>(<span class=\"hljs-variable\">$year</span>, <span class=\"hljs-variable\">$month</span>, <span class=\"hljs-variable\">$id</span>);\n        <span class=\"hljs-variable language_\">$this</span>-&gt;usage = <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">findUsage</span>();\n        <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">saveImageToTemp</span>(<span class=\"hljs-literal\">false</span>);\n        <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">getImageInfos</span>();\n    }\n    \n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">saveImageToTemp</span>(<span class=\"hljs-params\"><span class=\"hljs-variable\">$viewToast</span></span>): <span class=\"hljs-title\">void</span> </span>{\n        <span class=\"hljs-variable\">$tempDir</span>        = <span class=\"hljs-title class_\">Storage</span>::<span class=\"hljs-title function_ invoke__\">disk</span>(<span class=\"hljs-string\">'public'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">path</span>(<span class=\"hljs-string\">'temp'</span>);\n        <span class=\"hljs-variable language_\">$this</span>-&gt;tempPath = <span class=\"hljs-string\">\"<span class=\"hljs-subst\">{$tempDir}</span>/<span class=\"hljs-subst\">{$this-&gt;fileName}</span>\"</span>;\n    \n        <span class=\"hljs-keyword\">if</span> (!<span class=\"hljs-title class_\">File</span>::<span class=\"hljs-title function_ invoke__\">exists</span>(<span class=\"hljs-variable\">$tempDir</span>)) {\n            <span class=\"hljs-title class_\">File</span>::<span class=\"hljs-title function_ invoke__\">makeDirectory</span>(<span class=\"hljs-variable\">$tempDir</span>, <span class=\"hljs-number\">0o755</span>, <span class=\"hljs-literal\">true</span>);\n        }\n    \n        <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title class_\">File</span>::<span class=\"hljs-title function_ invoke__\">exists</span>(<span class=\"hljs-variable\">$this</span>-&gt;imagePath)) {\n            <span class=\"hljs-title class_\">File</span>::<span class=\"hljs-title function_ invoke__\">copy</span>(<span class=\"hljs-variable\">$this</span>-&gt;imagePath, <span class=\"hljs-variable\">$this</span>-&gt;tempPath);\n        }\n    \n        <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-variable\">$viewToast</span>) {\n            <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">success</span>(<span class=\"hljs-title function_ invoke__\">__</span>(<span class=\"hljs-string\">'Changes validated'</span>));\n        }\n        <span class=\"hljs-variable language_\">$this</span>-&gt;image = <span class=\"hljs-title class_\">Storage</span>::<span class=\"hljs-title function_ invoke__\">disk</span>(<span class=\"hljs-string\">'public'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">url</span>(<span class=\"hljs-string\">'temp/'</span> . <span class=\"hljs-variable\">$this</span>-&gt;fileName);\n    }\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">restoreImage</span>(<span class=\"hljs-params\"><span class=\"hljs-variable\">$cancel</span></span>): <span class=\"hljs-title\">void</span> </span>{\n        <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title class_\">File</span>::<span class=\"hljs-title function_ invoke__\">exists</span>(<span class=\"hljs-variable\">$this</span>-&gt;imagePath)) {\n            <span class=\"hljs-title class_\">File</span>::<span class=\"hljs-title function_ invoke__\">copy</span>(<span class=\"hljs-variable\">$this</span>-&gt;imagePath, <span class=\"hljs-variable\">$this</span>-&gt;tempPath);\n            <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">refreshImageUrl</span>();\n            <span class=\"hljs-variable language_\">$this</span>-&gt;clipW = <span class=\"hljs-number\">0</span>;\n            <span class=\"hljs-variable language_\">$this</span>-&gt;clipH = <span class=\"hljs-number\">0</span>;\n            <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">getImageInfos</span>();\n            <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">success</span>(<span class=\"hljs-title function_ invoke__\">__</span>(<span class=\"hljs-string\">'Image restored'</span>));\n        }\n    \n        <span class=\"hljs-variable language_\">$this</span>-&gt;changed = <span class=\"hljs-literal\">false</span>;\n    \n        <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-variable\">$cancel</span>) {\n            <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">info</span>(<span class=\"hljs-title function_ invoke__\">__</span>(<span class=\"hljs-string\">'No modification has been made'</span>));\n            <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-keyword\">exit</span>();\n        }\n    }\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">updated</span>(<span class=\"hljs-params\"><span class=\"hljs-variable\">$property</span>, <span class=\"hljs-variable\">$value</span></span>) </span>{\n        <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-string\">'group'</span> === <span class=\"hljs-variable\">$property</span>) {\n            <span class=\"hljs-keyword\">return</span>;\n        }\n        <span class=\"hljs-variable\">$manager</span> = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">ImageManager</span>(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Driver</span>());\n        <span class=\"hljs-variable\">$image</span>   = <span class=\"hljs-variable\">$manager</span>-&gt;<span class=\"hljs-title function_ invoke__\">read</span>(<span class=\"hljs-variable\">$this</span>-&gt;tempPath);\n        <span class=\"hljs-keyword\">switch</span> (<span class=\"hljs-variable\">$property</span>) {\n            <span class=\"hljs-keyword\">case</span> <span class=\"hljs-string\">'imageScale'</span>:\n                <span class=\"hljs-variable\">$image</span>-&gt;<span class=\"hljs-title function_ invoke__\">scale</span>(<span class=\"hljs-attr\">height</span>: <span class=\"hljs-variable\">$this</span>-&gt;height * <span class=\"hljs-variable\">$value</span>);\n                <span class=\"hljs-variable language_\">$this</span>-&gt;width      = <span class=\"hljs-variable\">$image</span>-&gt;<span class=\"hljs-title function_ invoke__\">width</span>();\n                <span class=\"hljs-variable language_\">$this</span>-&gt;height     = <span class=\"hljs-variable\">$image</span>-&gt;<span class=\"hljs-title function_ invoke__\">height</span>();\n                <span class=\"hljs-variable language_\">$this</span>-&gt;imageScale = <span class=\"hljs-string\">'1'</span>;\n                <span class=\"hljs-keyword\">break</span>;\n            <span class=\"hljs-keyword\">case</span> <span class=\"hljs-string\">'brightness'</span>:\n                <span class=\"hljs-variable\">$image</span>-&gt;<span class=\"hljs-title function_ invoke__\">brightness</span>(<span class=\"hljs-variable\">$value</span>);\n                <span class=\"hljs-variable language_\">$this</span>-&gt;brightness = <span class=\"hljs-number\">0</span>;\n                <span class=\"hljs-keyword\">break</span>;\n            <span class=\"hljs-keyword\">case</span> <span class=\"hljs-string\">'contrast'</span>:\n                <span class=\"hljs-variable\">$image</span>-&gt;<span class=\"hljs-title function_ invoke__\">contrast</span>(<span class=\"hljs-variable\">$value</span>);\n                <span class=\"hljs-variable language_\">$this</span>-&gt;contrast = <span class=\"hljs-number\">0</span>;\n                <span class=\"hljs-keyword\">break</span>;\n            <span class=\"hljs-keyword\">case</span> <span class=\"hljs-string\">'gamma'</span>:\n                <span class=\"hljs-variable\">$image</span>-&gt;<span class=\"hljs-title function_ invoke__\">gamma</span>(<span class=\"hljs-variable\">$value</span> / <span class=\"hljs-number\">10.0</span>);\n                <span class=\"hljs-variable language_\">$this</span>-&gt;gamma = <span class=\"hljs-number\">10</span>;\n                <span class=\"hljs-keyword\">break</span>;\n            <span class=\"hljs-keyword\">case</span> <span class=\"hljs-string\">'red'</span>:\n                <span class=\"hljs-variable\">$image</span>-&gt;<span class=\"hljs-title function_ invoke__\">colorize</span>(<span class=\"hljs-attr\">red</span>: <span class=\"hljs-variable\">$value</span>);\n                <span class=\"hljs-variable language_\">$this</span>-&gt;red = <span class=\"hljs-number\">0</span>;\n                <span class=\"hljs-keyword\">break</span>;\n            <span class=\"hljs-keyword\">case</span> <span class=\"hljs-string\">'green'</span>:\n                <span class=\"hljs-variable\">$image</span>-&gt;<span class=\"hljs-title function_ invoke__\">colorize</span>(<span class=\"hljs-attr\">green</span>: <span class=\"hljs-variable\">$value</span>);\n                <span class=\"hljs-variable language_\">$this</span>-&gt;green = <span class=\"hljs-number\">0</span>;\n                <span class=\"hljs-keyword\">break</span>;\n            <span class=\"hljs-keyword\">case</span> <span class=\"hljs-string\">'blue'</span>:\n                <span class=\"hljs-variable\">$image</span>-&gt;<span class=\"hljs-title function_ invoke__\">colorize</span>(<span class=\"hljs-attr\">blue</span>: <span class=\"hljs-variable\">$value</span>);\n                <span class=\"hljs-variable language_\">$this</span>-&gt;blue = <span class=\"hljs-number\">0</span>;\n                <span class=\"hljs-keyword\">break</span>;\n            <span class=\"hljs-keyword\">case</span> <span class=\"hljs-string\">'blur'</span>:\n                <span class=\"hljs-variable\">$image</span>-&gt;<span class=\"hljs-title function_ invoke__\">blur</span>(<span class=\"hljs-variable\">$value</span>);\n                <span class=\"hljs-variable language_\">$this</span>-&gt;blur = <span class=\"hljs-number\">0</span>;\n                <span class=\"hljs-keyword\">break</span>;\n            <span class=\"hljs-keyword\">case</span> <span class=\"hljs-string\">'sharpen'</span>:\n                <span class=\"hljs-variable\">$image</span>-&gt;<span class=\"hljs-title function_ invoke__\">sharpen</span>(<span class=\"hljs-variable\">$value</span>);\n                <span class=\"hljs-variable language_\">$this</span>-&gt;sharpen = <span class=\"hljs-number\">0</span>;\n                <span class=\"hljs-keyword\">break</span>;\n            <span class=\"hljs-keyword\">case</span> <span class=\"hljs-string\">'clipW'</span>:\n                <span class=\"hljs-variable\">$width</span>  = <span class=\"hljs-variable language_\">$this</span>-&gt;width - <span class=\"hljs-variable language_\">$this</span>-&gt;width * <span class=\"hljs-variable\">$value</span> * <span class=\"hljs-number\">0.01</span>;\n                <span class=\"hljs-variable\">$offset</span> = (<span class=\"hljs-variable language_\">$this</span>-&gt;width - <span class=\"hljs-variable\">$width</span>) / <span class=\"hljs-number\">2</span>;\n                <span class=\"hljs-variable\">$image</span>-&gt;<span class=\"hljs-title function_ invoke__\">crop</span>(<span class=\"hljs-variable\">$width</span>, <span class=\"hljs-variable\">$this</span>-&gt;height, <span class=\"hljs-variable\">$offset</span>);\n                <span class=\"hljs-variable language_\">$this</span>-&gt;width  = <span class=\"hljs-variable\">$image</span>-&gt;<span class=\"hljs-title function_ invoke__\">width</span>();\n                <span class=\"hljs-variable language_\">$this</span>-&gt;height = <span class=\"hljs-variable\">$image</span>-&gt;<span class=\"hljs-title function_ invoke__\">height</span>();\n                <span class=\"hljs-variable language_\">$this</span>-&gt;clipW  = <span class=\"hljs-number\">0</span>;\n                <span class=\"hljs-keyword\">break</span>;\n            <span class=\"hljs-keyword\">case</span> <span class=\"hljs-string\">'clipH'</span>:\n                <span class=\"hljs-variable\">$height</span> = <span class=\"hljs-variable language_\">$this</span>-&gt;height - <span class=\"hljs-variable language_\">$this</span>-&gt;height * <span class=\"hljs-variable\">$value</span> * <span class=\"hljs-number\">0.01</span>;\n                <span class=\"hljs-variable\">$offset</span> = (<span class=\"hljs-variable language_\">$this</span>-&gt;height - <span class=\"hljs-variable\">$height</span>) / <span class=\"hljs-number\">2</span>;\n                <span class=\"hljs-variable\">$image</span>-&gt;<span class=\"hljs-title function_ invoke__\">crop</span>(<span class=\"hljs-variable\">$this</span>-&gt;width, <span class=\"hljs-variable\">$height</span>, <span class=\"hljs-number\">0</span>, <span class=\"hljs-variable\">$offset</span>);\n                <span class=\"hljs-variable language_\">$this</span>-&gt;width  = <span class=\"hljs-variable\">$image</span>-&gt;<span class=\"hljs-title function_ invoke__\">width</span>();\n                <span class=\"hljs-variable language_\">$this</span>-&gt;height = <span class=\"hljs-variable\">$image</span>-&gt;<span class=\"hljs-title function_ invoke__\">height</span>();\n                <span class=\"hljs-variable language_\">$this</span>-&gt;clipH  = <span class=\"hljs-number\">0</span>;\n                <span class=\"hljs-keyword\">break</span>;\n            <span class=\"hljs-keyword\">case</span> <span class=\"hljs-string\">'reduce'</span>:\n                <span class=\"hljs-variable\">$image</span>-&gt;<span class=\"hljs-title function_ invoke__\">reduceColors</span>(<span class=\"hljs-number\">49</span> - <span class=\"hljs-variable\">$value</span>);\n                <span class=\"hljs-variable language_\">$this</span>-&gt;reduce = <span class=\"hljs-number\">0</span>;\n                <span class=\"hljs-keyword\">break</span>;\n            <span class=\"hljs-keyword\">default</span>:\n                <span class=\"hljs-keyword\">break</span>;\n        }\n        <span class=\"hljs-variable\">$image</span>-&gt;<span class=\"hljs-title function_ invoke__\">save</span>();\n        <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">info</span>(<span class=\"hljs-title function_ invoke__\">__</span>(<span class=\"hljs-string\">'Image modified ! (Not saved yet)'</span>));\n        <span class=\"hljs-variable language_\">$this</span>-&gt;changed = <span class=\"hljs-literal\">true</span>;\n        <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">refreshImageUrl</span>();\n    }\n    \n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">invert</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">void</span> </span>{\n        <span class=\"hljs-variable\">$manager</span> = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">ImageManager</span>(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Driver</span>());\n        <span class=\"hljs-variable\">$image</span>   = <span class=\"hljs-variable\">$manager</span>-&gt;<span class=\"hljs-title function_ invoke__\">read</span>(<span class=\"hljs-variable\">$this</span>-&gt;tempPath);\n        <span class=\"hljs-variable\">$image</span>-&gt;<span class=\"hljs-title function_ invoke__\">invert</span>();\n        <span class=\"hljs-variable\">$image</span>-&gt;<span class=\"hljs-title function_ invoke__\">save</span>();\n        <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">info</span>(<span class=\"hljs-title function_ invoke__\">__</span>(<span class=\"hljs-string\">'Image modified ! (Not saved yet)'</span>));\n        <span class=\"hljs-variable language_\">$this</span>-&gt;changed = <span class=\"hljs-literal\">true</span>;\n        <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">refreshImageUrl</span>();\n    }\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">getImage</span>(<span class=\"hljs-params\"><span class=\"hljs-variable\">$year</span>, <span class=\"hljs-variable\">$month</span>, <span class=\"hljs-variable\">$id</span></span>): <span class=\"hljs-title\">void</span> </span>{\n        <span class=\"hljs-variable\">$imagesPath</span>         = <span class=\"hljs-string\">\"photos/<span class=\"hljs-subst\">{$year}</span>/<span class=\"hljs-subst\">{$month}</span>\"</span>;\n        <span class=\"hljs-variable\">$allFiles</span>           = <span class=\"hljs-title class_\">Storage</span>::<span class=\"hljs-title function_ invoke__\">disk</span>(<span class=\"hljs-string\">'public'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">files</span>(<span class=\"hljs-variable\">$imagesPath</span>);\n        <span class=\"hljs-variable\">$image</span>              = <span class=\"hljs-variable\">$allFiles</span>[<span class=\"hljs-variable\">$id</span>];\n        <span class=\"hljs-variable language_\">$this</span>-&gt;imagePath    = <span class=\"hljs-title class_\">Storage</span>::<span class=\"hljs-title function_ invoke__\">disk</span>(<span class=\"hljs-string\">'public'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">path</span>(<span class=\"hljs-variable\">$image</span>);\n        <span class=\"hljs-variable language_\">$this</span>-&gt;fileName     = <span class=\"hljs-title function_ invoke__\">basename</span>(<span class=\"hljs-variable\">$this</span>-&gt;imagePath);\n        <span class=\"hljs-variable language_\">$this</span>-&gt;image        = <span class=\"hljs-title class_\">Storage</span>::<span class=\"hljs-title function_ invoke__\">disk</span>(<span class=\"hljs-string\">'public'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">url</span>(<span class=\"hljs-string\">\"temp/<span class=\"hljs-subst\">{$this-&gt;fileName}</span>\"</span>);\n        <span class=\"hljs-variable language_\">$this</span>-&gt;displayImage = <span class=\"hljs-title class_\">Storage</span>::<span class=\"hljs-title function_ invoke__\">disk</span>(<span class=\"hljs-string\">'public'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">url</span>(<span class=\"hljs-variable\">$image</span>);\n        <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">refreshImageUrl</span>();\n    }\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">keepVersion</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">void</span> </span>{\n        <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title class_\">File</span>::<span class=\"hljs-title function_ invoke__\">exists</span>(<span class=\"hljs-variable\">$this</span>-&gt;tempPath)) {\n            <span class=\"hljs-title class_\">File</span>::<span class=\"hljs-title function_ invoke__\">copy</span>(<span class=\"hljs-variable\">$this</span>-&gt;tempPath, <span class=\"hljs-variable\">$this</span>-&gt;imagePath);\n        }\n        <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">success</span>(<span class=\"hljs-title function_ invoke__\">__</span>(<span class=\"hljs-string\">'Image changes applied successfully'</span>));\n        <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-keyword\">exit</span>();\n    }\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">exit</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">void</span> </span>{\n        <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title class_\">File</span>::<span class=\"hljs-title function_ invoke__\">exists</span>(<span class=\"hljs-variable\">$this</span>-&gt;tempPath)) {\n            <span class=\"hljs-title class_\">File</span>::<span class=\"hljs-title function_ invoke__\">delete</span>(<span class=\"hljs-variable\">$this</span>-&gt;tempPath);\n        }\n        <span class=\"hljs-title function_ invoke__\">redirect</span>()-&gt;<span class=\"hljs-title function_ invoke__\">route</span>(<span class=\"hljs-string\">'images.index'</span>);\n    }\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">applyChanges</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">void</span> </span>{\n        <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title class_\">File</span>::<span class=\"hljs-title function_ invoke__\">exists</span>(<span class=\"hljs-variable\">$this</span>-&gt;tempPath)) {\n            <span class=\"hljs-title class_\">File</span>::<span class=\"hljs-title function_ invoke__\">copy</span>(<span class=\"hljs-variable\">$this</span>-&gt;tempPath, <span class=\"hljs-variable\">$this</span>-&gt;imagePath);\n        }\n        <span class=\"hljs-variable language_\">$this</span>-&gt;changed = <span class=\"hljs-literal\">false</span>;\n        <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">success</span>(<span class=\"hljs-title function_ invoke__\">__</span>(<span class=\"hljs-string\">'Image changes applied successfully'</span>));\n    }\n    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">getImageInfos</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">void</span> </span>{\n        <span class=\"hljs-variable\">$manager</span>      = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">ImageManager</span>(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Driver</span>());\n        <span class=\"hljs-variable\">$image</span>        = <span class=\"hljs-variable\">$manager</span>-&gt;<span class=\"hljs-title function_ invoke__\">read</span>(<span class=\"hljs-variable\">$this</span>-&gt;tempPath);\n        <span class=\"hljs-variable language_\">$this</span>-&gt;width  = <span class=\"hljs-variable\">$image</span>-&gt;<span class=\"hljs-title function_ invoke__\">width</span>();\n        <span class=\"hljs-variable language_\">$this</span>-&gt;height = <span class=\"hljs-variable\">$image</span>-&gt;<span class=\"hljs-title function_ invoke__\">height</span>();\n    }\n    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">findUsage</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">array</span> </span>{\n        <span class=\"hljs-variable\">$usage</span> = [];\n        <span class=\"hljs-variable\">$name</span> = <span class=\"hljs-variable language_\">$this</span>-&gt;year . <span class=\"hljs-string\">'/'</span> . <span class=\"hljs-title function_ invoke__\">str_pad</span>(<span class=\"hljs-variable\">$this</span>-&gt;month, <span class=\"hljs-number\">2</span>, <span class=\"hljs-string\">'0'</span>, STR_PAD_LEFT) . <span class=\"hljs-string\">'/'</span> . <span class=\"hljs-variable language_\">$this</span>-&gt;fileName;\n        <span class=\"hljs-variable\">$posts</span> = <span class=\"hljs-title class_\">Post</span>::<span class=\"hljs-title function_ invoke__\">select</span>(<span class=\"hljs-string\">'id'</span>, <span class=\"hljs-string\">'title'</span>, <span class=\"hljs-string\">'slug'</span>)\n            -&gt;<span class=\"hljs-title function_ invoke__\">where</span>(<span class=\"hljs-string\">'image'</span>, <span class=\"hljs-string\">'LIKE'</span>, <span class=\"hljs-string\">\"%<span class=\"hljs-subst\">{$name}</span>%\"</span>)\n            -&gt;<span class=\"hljs-title function_ invoke__\">orWhere</span>(<span class=\"hljs-string\">'body'</span>, <span class=\"hljs-string\">'LIKE'</span>, <span class=\"hljs-string\">\"%<span class=\"hljs-subst\">{$name}</span>%\"</span>)\n            -&gt;<span class=\"hljs-title function_ invoke__\">get</span>();\n        <span class=\"hljs-keyword\">foreach</span> (<span class=\"hljs-variable\">$posts</span> <span class=\"hljs-keyword\">as</span> <span class=\"hljs-variable\">$post</span>) {\n            <span class=\"hljs-variable\">$usage</span>[] = [\n                <span class=\"hljs-string\">'type'</span>  =&gt; <span class=\"hljs-string\">'post'</span>,\n                <span class=\"hljs-string\">'id'</span>    =&gt; <span class=\"hljs-variable\">$post</span>-&gt;id,\n                <span class=\"hljs-string\">'title'</span> =&gt; <span class=\"hljs-variable\">$post</span>-&gt;title,\n              <span class=\"hljs-string\">'slug'</span>  =&gt; <span class=\"hljs-variable\">$post</span>-&gt;slug,\n          ];\n      }\n      <span class=\"hljs-variable\">$pages</span> = <span class=\"hljs-title class_\">Page</span>::<span class=\"hljs-title function_ invoke__\">where</span>(<span class=\"hljs-string\">'body'</span>, <span class=\"hljs-string\">'LIKE'</span>, <span class=\"hljs-string\">\"%<span class=\"hljs-subst\">{$name}</span>%\"</span>)-&gt;<span class=\"hljs-title function_ invoke__\">get</span>();\n      <span class=\"hljs-keyword\">foreach</span> (<span class=\"hljs-variable\">$pages</span> <span class=\"hljs-keyword\">as</span> <span class=\"hljs-variable\">$page</span>) {\n          <span class=\"hljs-variable\">$usage</span>[] = [\n              <span class=\"hljs-string\">'type'</span>  =&gt; <span class=\"hljs-string\">'page'</span>,\n              <span class=\"hljs-string\">'id'</span>    =&gt; <span class=\"hljs-variable\">$page</span>-&gt;id,\n              <span class=\"hljs-string\">'title'</span> =&gt; <span class=\"hljs-variable\">$page</span>-&gt;title,\n              <span class=\"hljs-string\">'slug'</span>  =&gt; <span class=\"hljs-variable\">$page</span>-&gt;slug,\n          ];\n      }\n      <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable\">$usage</span>;\n    }\n    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">refreshImageUrl</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">void</span> </span>{\n        <span class=\"hljs-variable language_\">$this</span>-&gt;image = <span class=\"hljs-title class_\">Storage</span>::<span class=\"hljs-title function_ invoke__\">disk</span>(<span class=\"hljs-string\">'public'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">url</span>(<span class=\"hljs-string\">\"temp/<span class=\"hljs-subst\">{$this-&gt;fileName}</span>\"</span>) . <span class=\"hljs-string\">'?'</span> . <span class=\"hljs-title function_ invoke__\">now</span>()-&gt;timestamp;\n    }\n};\n</code></pre>","children":[]}],"payload":{"lines":"7873,7874","fold":1}},{"content":"BLADE : admin/images/edit.blade.php","children":[{"content":"<pre><code class=\"language-php\">&lt;?php\ninclude_once 'edit_image.php';\n?&gt;\n\n&lt;div class=\"flex flex-col h-full lg:flex-row\"&gt;\n    &lt;div class=\"w-full p-4 lg:w-3/4\"&gt;\n        &lt;x-header title=\"{{ __('Manage an image') }}\" separator progress-indicator&gt;\n            &lt;x-slot:actions class=\"lg:hidden\"&gt;\n                &lt;x-button icon=\"s-building-office-2\" label=\"{{ __('Dashboard') }}\" class=\"btn-outline\"\n                    link=\"{{ route('admin') }}\" /&gt;\n            &lt;/x-slot:actions&gt;\n        &lt;/x-header&gt;\n        &lt;x-card&gt;\n            &lt;div class=\"flex items-center justify-between h-full\"&gt;\n                &lt;p&gt;@lang('The url of this image is :') &lt;i&gt;{{ $this-&gt;displayImage }}&lt;/i&gt;&lt;/p&gt;\n                &lt;x-button label=\"{!! __('Copy url') !!}\" data-url=\"{{ $this-&gt;displayImage }}\" onclick=\"copyUrl(this)\"\n                    class=\"btn-sm\" /&gt;\n            &lt;/div&gt;\n            &lt;br&gt;\n            @if (empty($this-&gt;usage))\n                &lt;x-badge value=\"{!! __('This image is not used') !!}\" class=\"badge-warning\" /&gt;\n            @else\n                @foreach ($this-&gt;usage as $use)\n                    @if ($use['type'] == 'post')\n                        &lt;p&gt;@lang('This image is in the post ') : &lt;b&gt;&lt;a href=\"{{ route('posts.show', $use['slug']) }}\" target=\"_blank\"&gt;{{ $use['title'] }}&lt;/a&gt;&lt;/b&gt;&lt;/p&gt;\n                    @else\n                        &lt;p&gt;@lang('This image is in the page ') :\n                            &lt;b&gt;&lt;a href=\"{{ route('pages.show', $use['slug']) }}\" target=\"_blank\"&gt;{{ $use['title'] }}&lt;/a&gt;&lt;/b&gt;\n                        &lt;/p&gt;\n                    @endif\n                @endforeach\n            @endif\n            &lt;br&gt;&lt;br&gt;\n            &lt;x-header separator progress-indicator /&gt;\n            &lt;div class=\"flex items-center justify-center h-full\"&gt;\n                &lt;img src=\"{{ $image }}\" alt=\"\"&gt;\n            &lt;/div&gt;\n            &lt;x-header separator progress-indicator /&gt;\n        &lt;/x-card&gt;\n    &lt;/div&gt;\n\n    &lt;div class=\"w-full p-4 lg:w-1/4\"&gt;\n        &lt;p class=\"mb-2 text-3xl\"&gt;@lang('Settings')&lt;/p&gt;\n        &lt;x-accordion wire:model=\"group\" class=\"mb-4 shadow-md\"&gt;\n            &lt;x-collapse name=\"group1\"&gt;\n                &lt;x-slot:heading&gt;\n                    @lang('Size change')\n                &lt;/x-slot:heading&gt;\n                &lt;x-slot:content&gt;\n                    @lang('Height') :\n                    &lt;x-badge value=\"{{ $this-&gt;height }}px\" class=\"badge-primary\" /&gt;&lt;br&gt;\n                    @lang('Width') :\n                    &lt;x-badge value=\"{{ $this-&gt;width }}px\" class=\"badge-primary\" /&gt;&lt;br&gt;&lt;br&gt;\n                    &lt;x-radio inline label=\"{{ __('Select a rescale value') }}\" :options=\"$selectValues\"\n                        wire:model=\"imageScale\" wire:change=\"$refresh\" /&gt;\n                &lt;/x-slot:content&gt;\n            &lt;/x-collapse&gt;\n            &lt;x-collapse name=\"group2\"&gt;\n                &lt;x-slot:heading&gt;\n                    @lang('Brightness, contrast and gamma correction')\n                &lt;/x-slot:heading&gt;\n                &lt;x-slot:content&gt;\n                    &lt;x-range wire:model.live.debounce=\"brightness\" min=\"-20\" max=\"20\" step=\"2\"\n                        label=\"{{ __('Brightness') }}\" class=\"range-primary\" /&gt;\n                    &lt;x-range wire:model.live.debounce=\"contrast\" min=\"-20\" max=\"20\" step=\"2\"\n                        label=\"{{ __('Contrast') }}\" class=\"range-primary\" /&gt;\n                    &lt;x-range wire:model.live.debounce=\"gamma\" min=\"5\" max=\"22\"\n                        label=\"{{ __('Gamma Correction') }}\" class=\"range-primary\" /&gt;\n                &lt;/x-slot:content&gt;\n            &lt;/x-collapse&gt;\n            &lt;x-collapse name=\"group3\"&gt;\n                &lt;x-slot:heading&gt;\n                    @lang('Color correction')\n                &lt;/x-slot:heading&gt;\n                &lt;x-slot:content&gt;\n                    &lt;x-range wire:model.live.debounce=\"red\" min=\"-20\" max=\"20\" step=\"2\"\n                        label=\"{{ __('Red') }}\" class=\"range-primary\" /&gt;\n                    &lt;x-range wire:model.live.debounce=\"green\" min=\"-20\" max=\"20\" step=\"2\"\n                        label=\"{{ __('Green') }}\" class=\"range-primary\" /&gt;\n                    &lt;x-range wire:model.live.debounce=\"blue\" min=\"-20\" max=\"20\" step=\"2\"\n                        label=\"{{ __('Blue') }}\" class=\"range-primary\" /&gt;\n                    &lt;x-range wire:model.live.debounce=\"reduce\" min=\"0\" max=\"48\" step=\"2\"\n                        label=\"{{ __('Reduce color') }}\" class=\"range-primary\" /&gt;\n                    &lt;x-button label=\"{{ __('Invert colors') }}\" wire:click=\"invert\" class=\"mt-2 btn-outline btn-sm\" /&gt;\n                &lt;/x-slot:content&gt;\n            &lt;/x-collapse&gt;\n            &lt;x-collapse name=\"group4\"&gt;\n                &lt;x-slot:heading&gt;\n                    @lang('Blur and sharpen')\n                &lt;/x-slot:heading&gt;\n                &lt;x-slot:content&gt;\n                    &lt;x-range wire:model.live.debounce=\"blur\" min=\"0\" max=\"20\" step=\"2\"\n                        label=\"{{ __('Blur') }}\" class=\"range-primary\" /&gt;\n                    &lt;x-range wire:model.live.debounce=\"sharpen\" min=\"0\" max=\"20\" step=\"2\"\n                        label=\"{{ __('Sharpen') }}\" class=\"range-primary\" /&gt;\n                &lt;/x-slot:content&gt;\n            &lt;/x-collapse&gt;\n            &lt;x-collapse name=\"group5\"&gt;\n                &lt;x-slot:heading&gt;\n                    @lang('Crop')\n                &lt;/x-slot:heading&gt;\n                &lt;x-slot:content&gt;\n                    &lt;x-range wire:model.live.debounce=\"clipW\" min=\"0\" max=\"40\" step=\"2\"\n                        label=\"{{ __('Width') }}\" class=\"range-primary\" /&gt;\n                    &lt;x-range wire:model.live.debounce=\"clipH\" min=\"0\" max=\"40\" step=\"2\"\n                        label=\"{{ __('Height') }}\" class=\"range-primary\" /&gt;\n                &lt;/x-slot:content&gt;\n            &lt;/x-collapse&gt;\n        &lt;/x-accordion&gt;\n        @if ($changed)\n            &lt;x-button wire:click=\"restoreImage(false)\" class=\"btn-sm\"&gt;@lang('Restore image to its original state')\n            &lt;/x-button&gt;&lt;br&gt;\n            &lt;x-button wire:click=\"applyChanges\" class=\"mt-2 btn-sm\"&gt;@lang('Valid changes')&lt;/x-button&gt;&lt;br&gt;\n            &lt;x-button wire:click=\"restoreImage(true)\" class=\"mt-2 btn-sm\"&gt;@lang('Finish and discard this version')&lt;/x-button&gt;\n        @endif\n        &lt;x-button wire:click=\"keepVersion\" class=\"mt-2 btn-sm\"&gt;@lang('Finish and keep this version')&lt;/x-button&gt;&lt;br&gt;\n    &lt;/div&gt;\n\n    &lt;script&gt;\n        function copyUrl(button) {\n            const url = button.dataset.url; //+ succinct...\n            const textArea = document.createElement('textarea');\n            textArea.value = url;\n            document.body.appendChild(textArea);\n            textArea.select();\n            try {\n                document.execCommand('copy');\n                alert('URL copiée: ' + url);\n            } catch (err) {\n                console.error('Erreur lors de la copie de l\\'URL: ', err);\n            }\n            document.body.removeChild(textArea);\n        }\n    &lt;/script&gt;\n&lt;/div&gt;\n</code></pre>","children":[]}],"payload":{"lines":"8110,8111","fold":1}}],"payload":{"lines":"7869,7870","fold":1}},{"content":"Traduction code composant admin.images.edit","children":[{"content":"<pre><code class=\"language-json\"><span class=\"hljs-attr\">\"Manage an image\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Gérer une image\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"The url of this image is :\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"L'URL de cette image est :\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"This image is in the post \"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Cette image est dans l'article \"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"This image is in the page \"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Cette image est dans la page \"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Select a rescale value\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Sélectionnez une valeur de redimensionnement\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Height\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Hauteur\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Width\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Largeur\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Size change\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Changement des dimensions\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Brightness\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Luminosité\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Brightness, contrast and gamma correction\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Correction de luminosité, contraste et gamma\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Contrast\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Contraste\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Restore image to its original state\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Restaurer l'image à son état d'origine\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Color correction\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Correction de couleur\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Valid changes\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Valider les modifications\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Changes validated\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Modifications validées\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Finish and keep this version\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Terminer et garder cette version\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"This image is not used\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Cette image n'est pas utilisée\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Finish and discard this version\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Terminer et oublier cette version\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Are you sure to delete this image?\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Êtes-vous sûr de vouloir supprimer cette image ?\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Blur and sharpen\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Flou et netteté\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Blur\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Flou\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Sharpen\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Netteté\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Image modified ! (Not saved yet)\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Image modifiée ! (Non sauvegardée)\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Image restored\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Image restaurée\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"No modification has been made\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Aucune modification n'a été apportée à l'image\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Image changes applied successfully\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Modifications de l'image appliquées avec succès\"</span>\n</code></pre>","children":[]}],"payload":{"lines":"8250,8251","fold":1}}],"payload":{"lines":"7861,7862","fold":1}}],"payload":{"lines":"7830,7831","fold":1}},{"content":"Réf.: <em><strong><a href=\"https://laravel.sillo.org/posts/mon-cms-les-medias-partie-2\">https://laravel.sillo.org/posts/mon-cms-les-medias-partie-2</a></strong></em>","children":[],"payload":{"lines":"8281,8282"}}],"payload":{"lines":"7506,7507","fold":1}},{"content":"- Les Paramètres (<em>Setting</em>)","children":[{"content":"Route Setting","children":[{"content":"<pre><code class=\"language-php\"><span class=\"hljs-title class_\">Route</span>::<span class=\"hljs-title function_ invoke__\">middleware</span>(<span class=\"hljs-string\">'auth'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">group</span>(function () {\n    ...\n    <span class=\"hljs-title class_\">Route</span>::<span class=\"hljs-title function_ invoke__\">middleware</span>(<span class=\"hljs-title class_\">IsAdminOrRedac</span>::<span class=\"hljs-variable language_\">class</span>)-&gt;<span class=\"hljs-title function_ invoke__\">prefix</span>(<span class=\"hljs-string\">'admin'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">group</span>(function () {\n        ...\n        <span class=\"hljs-title class_\">Route</span>::<span class=\"hljs-title function_ invoke__\">middleware</span>(<span class=\"hljs-title class_\">IsAdmin</span>::<span class=\"hljs-variable language_\">class</span>)-&gt;<span class=\"hljs-title function_ invoke__\">group</span>(function () {\n            ...\n            <span class=\"hljs-title class_\">Volt</span>::<span class=\"hljs-title function_ invoke__\">route</span>(<span class=\"hljs-string\">'/settings'</span>, <span class=\"hljs-string\">'admin.settings'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">name</span>(<span class=\"hljs-string\">'settings'</span>);\n</code></pre>","children":[]}],"payload":{"lines":"8285,8286","fold":1}},{"content":"Création composant Setting","children":[{"content":"<pre><code class=\"language-php\">php artisan make:volt admin/settings --<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span>\n</span></code></pre>","children":[]}],"payload":{"lines":"8297,8298","fold":1}},{"content":"Lien Setting dans admin.sidebar","children":[{"content":"<pre><code class=\"language-php\">@if (Auth::user()-&gt;isAdmin())\n    ... images.index\n    &lt;x-menu-item icon=\"m-cog-8-tooth\" title=\"{{ __('Settings') }}\"\n    link=\"{{ route('settings') }}\" :class=\"App::isDownForMaintenance() ? 'bg-red-300' : ''\" /&gt;\n@endif\n</code></pre>","children":[]}],"payload":{"lines":"8303,8304","fold":1}},{"content":"Variables Setting (.env)","children":[{"content":"<pre><code class=\"language-php\">APP_MAINTENANCE_DRIVER=file\nAPP_MAINTENANCE_STORE=database\nAPP_MAINTENANCE_SECRET=230542a-177b-4b66-ffb1-dd77g4c93515\n</code></pre>","children":[]}],"payload":{"lines":"8313,8314","fold":1}},{"content":"Le rendu Front-End de Setting","children":[{"content":"layout.app","children":[{"content":"<pre><code class=\"language-php\">&lt;div class=\"text-center hero-content text-neutral-content\"&gt;\n    &lt;div&gt;\n        &lt;h1 class=\"mb-5 text-4xl font-bold sm:text-5xl md:text-6xl lg:text-7xl xl:text-8xl\"&gt;\n            {{ config('app.title') }}\n        &lt;/h1&gt;\n        &lt;p class=\"mb-1 text-lg sm:text-xl md:text-2xl lg:text-3xl xl:text-4xl\"&gt;\n            {{ config('app.subTitle') }}\n        &lt;/p&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>","children":[]}],"payload":{"lines":"8323,8324"}},{"content":"index","children":[{"content":"<pre><code class=\"language-php\">@if ($post-&gt;pinned)\n    &lt;x-badge value=\"{{ __('Pinned') }}\" class=\"p-3 badge-warning\" /&gt;\n@elseif($post-&gt;created_at-&gt;gt(now()-&gt;subWeeks(config('app.newPost'))))\n    &lt;x-badge value=\"{{ __('New') }}\" class=\"p-3 badge-success\" /&gt;\n@endif\n</code></pre>","children":[]}],"payload":{"lines":"8338,8339"}}],"payload":{"lines":"8321,8322","fold":1}},{"content":"Les données pour Setting","children":[{"content":"Model &amp; Migration Setting","children":[{"content":"<pre><code class=\"language-php\">php artisan make:model Setting -m\n</code></pre>","children":[]},{"content":"<pre><code class=\"language-php\"><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Setting</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">Model</span> </span>{\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-variable\">$timestamps</span> = <span class=\"hljs-literal\">false</span>;\n    <span class=\"hljs-keyword\">protected</span> <span class=\"hljs-variable\">$fillable</span> = [<span class=\"hljs-string\">'key'</span>, <span class=\"hljs-string\">'value'</span>];\n}\n</code></pre>","children":[]},{"content":"<pre><code class=\"language-php\">    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">up</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">void</span> </span>{\n    <span class=\"hljs-title class_\">Schema</span>::<span class=\"hljs-title function_ invoke__\">create</span>(<span class=\"hljs-string\">'settings'</span>, function (Blueprint <span class=\"hljs-variable\">$table</span>) {\n        <span class=\"hljs-variable\">$table</span>-&gt;<span class=\"hljs-title function_ invoke__\">id</span>();\n        <span class=\"hljs-variable\">$table</span>-&gt;<span class=\"hljs-keyword\">string</span>(<span class=\"hljs-string\">'key'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">unique</span>();\n        <span class=\"hljs-variable\">$table</span>-&gt;<span class=\"hljs-title function_ invoke__\">text</span>(<span class=\"hljs-string\">'value'</span>);\n    });\n}\n</code></pre>","children":[]}],"payload":{"lines":"8350,8351","fold":1}},{"content":"Seeder Setting","children":[{"content":"<pre><code class=\"language-php\">php artisan make:seeder SettingSeeder\n</code></pre>","children":[]},{"content":"<pre><code class=\"language-php\"><span class=\"hljs-meta\">&lt;?php</span>\n<span class=\"hljs-keyword\">namespace</span> <span class=\"hljs-title class_\">Database</span>\\<span class=\"hljs-title class_\">seeders</span>;\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Database</span>\\<span class=\"hljs-title\">Seeder</span>;\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Support</span>\\<span class=\"hljs-title\">Facades</span>\\<span class=\"hljs-title\">DB</span>;\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">SettingSeeder</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">Seeder</span> </span>{\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">run</span>(<span class=\"hljs-params\"></span>) </span>{\n        <span class=\"hljs-variable\">$settings</span> = [\n            [<span class=\"hljs-string\">'key'</span> =&gt; <span class=\"hljs-string\">'pagination'</span>, <span class=\"hljs-string\">'value'</span> =&gt; <span class=\"hljs-number\">6</span>],\n            [<span class=\"hljs-string\">'key'</span> =&gt; <span class=\"hljs-string\">'excerptSize'</span>, <span class=\"hljs-string\">'value'</span> =&gt; <span class=\"hljs-number\">30</span>],\n            [<span class=\"hljs-string\">'key'</span> =&gt; <span class=\"hljs-string\">'title'</span>, <span class=\"hljs-string\">'value'</span> =&gt; <span class=\"hljs-string\">'Mon titre'</span>],\n            [<span class=\"hljs-string\">'key'</span> =&gt; <span class=\"hljs-string\">'subTitle'</span>, <span class=\"hljs-string\">'value'</span> =&gt; <span class=\"hljs-string\">'Mon sous-titre'</span>],\n            [<span class=\"hljs-string\">'key'</span> =&gt; <span class=\"hljs-string\">'newPost'</span>, <span class=\"hljs-string\">'value'</span> =&gt; <span class=\"hljs-number\">4</span>],\n        ];\n    \n        DB::<span class=\"hljs-title function_ invoke__\">table</span>(<span class=\"hljs-string\">'settings'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">insert</span>(<span class=\"hljs-variable\">$settings</span>);\n    }\n}\n</code></pre>","children":[]}],"payload":{"lines":"8373,8374","fold":1}},{"content":"DatabaseSeeder Setting","children":[{"content":"<pre><code class=\"language-php\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">run</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">void</span>\n</span>{\n    <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">call</span>([\n        ...\n        <span class=\"hljs-title class_\">SettingSeeder</span>::<span class=\"hljs-variable language_\">class</span>,\n    ]);\n}\n</code></pre>","children":[]},{"content":"<pre><code class=\"language-php\">php artisan migrate:fresh --seed\n</code></pre>","children":[]}],"payload":{"lines":"8399,8400","fold":1}}],"payload":{"lines":"8348,8349","fold":1}},{"content":"Chargement systématique des paramètres","children":[{"content":"<pre data-lines=\"8417,8418\"><code>Dans AppServiceProvider.php :\n</code></pre>","children":[],"payload":{"lines":"8417,8418"}},{"content":"<pre><code class=\"language-php\"><span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">App</span>\\<span class=\"hljs-title\">Models</span>\\{<span class=\"hljs-title\">Menu</span>, <span class=\"hljs-title\">Setting</span>};\n...\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">boot</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">void</span> </span>{\n        <span class=\"hljs-keyword\">if</span> (!<span class=\"hljs-variable language_\">$this</span>-&gt;app-&gt;<span class=\"hljs-title function_ invoke__\">runningInConsole</span>()) {\n            <span class=\"hljs-variable\">$settings</span> = <span class=\"hljs-title class_\">Setting</span>::<span class=\"hljs-title function_ invoke__\">all</span>();\n                <span class=\"hljs-keyword\">foreach</span> (<span class=\"hljs-variable\">$settings</span> <span class=\"hljs-keyword\">as</span> <span class=\"hljs-variable\">$setting</span>) {\n                    <span class=\"hljs-title function_ invoke__\">config</span>([<span class=\"hljs-string\">'app.'</span> . <span class=\"hljs-variable\">$setting</span>-&gt;key =&gt; <span class=\"hljs-variable\">$setting</span>-&gt;value]);\n                }\n            }\n      ...\n    }\n</code></pre>","children":[]}],"payload":{"lines":"8415,8416","fold":1}},{"content":"Code composant Setting","children":[{"content":"<pre><code class=\"language-php\">&lt;?php\nuse Mary\\Traits\\Toast;\nuse App\\Models\\Setting;\nuse Livewire\\Volt\\Component;\nuse Illuminate\\Support\\Facades\\Artisan;\nuse Livewire\\Attributes\\{Layout, Validate};\nuse Illuminate\\Database\\Eloquent\\Collection;\n\nnew #[Title('Settings')] #[Layout('components.layouts.admin')] class extends Component {\n    use Toast;\n\n    private const SETTINGS_KEYS = ['pagination', 'excerptSize', 'title', 'subTitle', 'newPost'];\n\n    #[Validate('required|max:30')]\n    public string $title;\n\n    #[Validate('required|max:50')]\n    public string $subTitle;\n\n    #[Validate('required|integer|between:2,12')]\n    public int $pagination;\n\n    #[Validate('required|integer|between:10,60')]\n    public int $excerptSize;\n\n    #[Validate('required|integer|between:1,12')]\n    public int $newPost;\n\n    public bool $maintenance = false;\n    public Collection $settings;\n\n    public function mount(): void {\n        $this-&gt;settings = Setting::all();\n\n        $this-&gt;maintenance = App::isDownForMaintenance();\n\n        foreach (self::SETTINGS_KEYS as $key) {\n            $this-&gt;{$key} = $this-&gt;settings-&gt;where('key', $key)-&gt;first()-&gt;value ?? null;\n        }\n    }\n\n    public function updatedMaintenance(): void {\n        if ($this-&gt;maintenance) {\n            Artisan::call('down', ['--secret' =&gt; env('APP_MAINTENANCE_SECRET')]);\n        } else {\n            Artisan::call('up'); // → php artisan up\n        }\n    }\n\n    public function save() {\n        $data = $this-&gt;validate();\n\n        DB::transaction(function () use ($data) {\n            foreach (self::SETTINGS_KEYS as $key) {\n                $setting = $this-&gt;settings-&gt;where('key', $key)-&gt;first();\n                if ($setting) {\n                    $setting-&gt;value = $data[$key];\n                    $setting-&gt;save();\n                }\n            }\n        });\n\n        $this-&gt;success(__('Settings updated successfully!'));\n    }\n}; ?&gt;\n&lt;div&gt;\n    &lt;x-header title=\"{{ __('Settings') }}\" separator progress-indicator&gt;\n        &lt;x-slot:actions&gt;\n            &lt;x-button icon=\"s-building-office-2\" label=\"{{ __('Dashboard') }}\" class=\"btn-outline lg:hidden\"\n                link=\"{{ route('admin') }}\" /&gt;\n        &lt;/x-slot:actions&gt;\n    &lt;/x-header&gt;\n    &lt;x-card&gt;\n        &lt;x-card separator class=\"mb-6 border-4 {{ $maintenance ? 'bg-red-300' : 'bg-zinc-100' }} border-zinc-950\"&gt;\n            &lt;div class=\"flex items-center justify-between\"&gt;\n                &lt;x-toggle label=\"{{ __('Maintenance Mode') }}\" wire:model=\"maintenance\" wire:change=\"$refresh\" /&gt;\n                @if($maintenance)\n                    &lt;x-button label=\"{{ __('Go to bypass page')}}\" link=\"/{{ env('APP_MAINTENANCE_SECRET') }}\"  /&gt;\n                @endif\n            &lt;/div&gt;\n        &lt;/x-card&gt;\n        &lt;x-form wire:submit=\"save\"&gt;\n            &lt;x-card separator class=\"border-4 bg-zinc-100 border-zinc-950\"&gt;\n                &lt;x-input label=\"{{ __('Site title') }}\" wire:model=\"title\" /&gt;\n                &lt;br&gt;\n                &lt;x-input label=\"{{ __('Site sub title') }}\" wire:model=\"subTitle\" /&gt;\n            &lt;/x-card&gt;\n            &lt;x-card separator class=\"border-4 bg-zinc-100 border-zinc-950\"&gt;\n                &lt;x-range min=\"2\" max=\"12\" wire:model=\"pagination\" label=\"{!! __('Home pagination') !!}\"\n                    hint=\"{{ __('Between 2 and 12.') }}\" class=\"range-info\" wire:change=\"$refresh\" /&gt;\n                &lt;x-badge value=\"{{ $pagination }}\" class=\"my-2 badge-neutral\" /&gt;\n            &lt;/x-card&gt;\n            &lt;x-card separator class=\"border-4 bg-zinc-100 border-zinc-950\"&gt;\n                &lt;x-range min=\"10\" max=\"60\" step=\"5\" wire:model=\"excerptSize\"\n                    label=\"{!! __('Post excerpt (number of words)') !!}\" hint=\"{{ __('Between 10 and 60.') }}\" class=\"range-info\"\n                    wire:change=\"$refresh\" /&gt;\n                &lt;x-badge value=\"{{ $excerptSize }}\" class=\"my-2 badge-neutral\" /&gt;\n            &lt;/x-card&gt;\n            &lt;x-card separator class=\"border-4 bg-zinc-100 border-zinc-950\"&gt;\n                &lt;x-range min=\"1\" max=\"12\" step=\"1\" wire:model=\"newPost\"\n                    label=\"{!! __('Number of weeks a post is marked new') !!}\" hint=\"{{ __('Between 1 and 12.') }}\" class=\"range-info\"\n                    wire:change=\"$refresh\" /&gt;\n                &lt;x-badge value=\"{{ $newPost }}\" class=\"my-2 badge-neutral\" /&gt;\n            &lt;/x-card&gt;\n            &lt;x-slot:actions&gt;\n                &lt;x-button label=\"{{ __('Save') }}\" icon=\"o-paper-airplane\" spinner=\"save\" type=\"submit\"\n                    class=\"btn-primary\" /&gt;\n            &lt;/x-slot:actions&gt;\n        &lt;/x-form&gt;\n    &lt;/x-card&gt;\n&lt;/div&gt;\n</code></pre>","children":[]}],"payload":{"lines":"8433,8434","fold":1}},{"content":"Nettoyage code (Code cleaning)","children":[{"content":"<pre data-lines=\"8551,8552\"><code>Suppression de code (Devenu inutile) dans config/app.php :\n</code></pre>","children":[],"payload":{"lines":"8551,8552"}},{"content":"<pre><code class=\"language-php\">    <span class=\"hljs-string\">'pagination'</span>  =&gt; <span class=\"hljs-number\">6</span>,\n    <span class=\"hljs-string\">'excerptSize'</span> =&gt; <span class=\"hljs-number\">30</span>,\n</code></pre>","children":[]}],"payload":{"lines":"8549,8550","fold":1}},{"content":"Traductions Setting","children":[{"content":"<pre><code class=\"language-json\"><span class=\"hljs-attr\">\"Home pagination\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Pagination de la page d'accueil\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Between 2 and 12.\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Entre 2 et 12.\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Post excerpt (number of words)\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Extrait de l'article (nombre de mots)\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Between 30 and 60.\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Entre 10 et 60.\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Site title\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Titre du site\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Site sub title\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Sous-titre\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Settings updated successfully!\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Paramètres bien enregistrés !\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Number of weeks a post is marked new\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Nombre de semaines qu'un article est marqué comme nouveau\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Between 1 and 12.\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Entre 1 et 12\"</span><span class=\"hljs-punctuation\">,</span>\n<span class=\"hljs-attr\">\"Go to bypass page\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Aller sur la page de bypass\"</span>\n</code></pre>","children":[]}],"payload":{"lines":"8558,8559","fold":1}},{"content":"Réf. Maintenance : <a href=\"https://laravel.com/docs/11.x/configuration#maintenance-mode\">Doc Laravel // Maintenance</a>","children":[],"payload":{"lines":"8573,8574"}},{"content":"Réf.: <em><strong><a href=\"https://laravel.sillo.org/posts/mon-cms-les-parametres\">https://laravel.sillo.org/posts/mon-cms-les-parametres</a></strong></em>","children":[],"payload":{"lines":"8575,8576"}},{"content":"Fin du tutoriel - Vérification &lt;!-- markmap: fold --&gt;","children":[{"content":"\n<p data-lines=\"8579,8580\">Si tout s'est bien passé, voilà l'admin sidebar obtenue :</p>","children":[],"payload":{"lines":"8579,8581"}},{"content":"\n<p data-lines=\"8581,8582\">- <a href=\"https://prnt.sc/eiWO3i8mkUwz\">Pour les'Admin'</a></p>","children":[],"payload":{"lines":"8581,8583"}},{"content":"\n<p data-lines=\"8583,8584\">- <a href=\"https://prnt.sc/2xoEMOFJF-ZT\">Pour les 'Redac'</a></p>","children":[],"payload":{"lines":"8583,8585"}}],"payload":{"lines":"8577,8578"}}],"payload":{"lines":"8283,8284","fold":1}},{"content":"- Et après ? Optimisations diverses","children":[{"content":"Bien évidemment, ce qui suit n'est en rien exhaustif !","children":[{"content":"\n<p data-lines=\"8589,8590\">...Car ON PEUT TOUJOURS TOUT AMÉLIORER !</p>","children":[],"payload":{"lines":"8589,8591"}},{"content":"\n<p data-lines=\"8591,8594\">Donc, si VOUS y 'voyez' un manquement...<br>\n... Reportez-vous au point 1 de AIDE &amp; CONTACT ;-) !<br>\n( <em>Le faible critique... Le FORT agit !</em> :-) )</p>","children":[],"payload":{"lines":"8591,8595"}}],"payload":{"lines":"8587,8588","fold":1}},{"content":"Données &lt;!-- markmap: fold --&gt;","children":[{"content":"DataBaseSeeder","children":[{"content":"Principe: Pour l'instant, nous avons beaucoup (trop) de seeders dans la racine du dossier seeders/","children":[{"content":"<pre data-lines=\"8601,8604\"><code>Aussi, il est possible qu'à l'avenir, notre application s'étoffe, et recèle d'autres parties très distinctes...\nAlors, pour plus de clarté, isolons les seeders propres à la base de l'app., pour ultérieurement pouvoir,\nselon le même principe, isoler dans d'autres dossiers, des seeders qui seront plus spécifiques...\n</code></pre>","children":[],"payload":{"lines":"8601,8604"}}],"payload":{"lines":"8599,8600","fold":1}},{"content":"Modus operandi","children":[{"content":"\n<p data-lines=\"8607,8608\">1 ) &nbsp; Créer un dossier <strong>database/seeders/main</strong></p>","children":[],"payload":{"lines":"8607,8609"}},{"content":"\n<p data-lines=\"8609,8613\">2 ) &nbsp; Y copier dedans tous les seeders nécessaires à la base de l'app à ce stade, soit :<br>\nCategorySeeder, CommentSeeder, ContactSeeder, FooterSeeder, MenusSeeder, PageSeeder, PostSeeder, SettingSeeder et UserSeeder<br>\n&nbsp; &nbsp; &nbsp; &nbsp; ... Mais attention, car du coup, leur espace de nom change... :<br>\n&nbsp; &nbsp; &nbsp; &nbsp; → Donc, dans chacun d'eux, changer celui-ci: '<strong>namespace Database\\Seeders;</strong>' → '<strong>namespace Database\\Seeders\\Main;</strong>'</p>","children":[],"payload":{"lines":"8609,8614"}},{"content":"\n<p data-lines=\"8614,8617\">3 ) &nbsp; Créer un fichier database/seeders/<strong>MainDatabaseSeeder.php</strong><br>\n&nbsp; &nbsp; &nbsp; &nbsp; → Y copier le code de DataBaseSeeder.php<br>\n&nbsp; &nbsp; &nbsp; &nbsp; → Mais y remplacer la classe ainsi pour facorisation des call() :</p>\n<pre><code class=\"language-php\"><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">MainDatabaseSeeder</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">Seeder</span> </span>{\n    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">string</span> <span class=\"hljs-variable\">$namespace</span> = <span class=\"hljs-string\">'Database\\\\Seeders\\\\Main\\\\'</span>;\n    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">array</span> <span class=\"hljs-variable\">$seeders</span>   = [<span class=\"hljs-string\">'User'</span>, <span class=\"hljs-string\">'Category'</span>, <span class=\"hljs-string\">'Post'</span>, <span class=\"hljs-string\">'Page'</span>, <span class=\"hljs-string\">'Contact'</span>, <span class=\"hljs-string\">'Menus'</span>, <span class=\"hljs-string\">'Footer'</span>, <span class=\"hljs-string\">'Comment'</span>, <span class=\"hljs-string\">'Setting'</span>];\n\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">run</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">void</span> </span>{\n        <span class=\"hljs-keyword\">foreach</span> (<span class=\"hljs-variable language_\">$this</span>-&gt;seeders <span class=\"hljs-keyword\">as</span> <span class=\"hljs-variable\">$seeder</span>) {\n            <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">call</span>(<span class=\"hljs-string\">\"<span class=\"hljs-subst\">{$this-&gt;namespace}</span><span class=\"hljs-subst\">{$seeder}</span>Seeder\"</span>);\n        }\n    }\n}\n</code></pre>","children":[],"payload":{"lines":"8614,8631"}},{"content":"\n<p data-lines=\"8631,8632\">4 ) &nbsp; Modifier database/seeders/<strong>DatabaseSeeder.php</strong> qui se résume alors à :</p>\n<pre><code class=\"language-php\"><span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">call</span>([\n    <span class=\"hljs-title class_\">MainDatabaseSeeder</span>::<span class=\"hljs-variable language_\">class</span>,\n]);\n</code></pre>","children":[],"payload":{"lines":"8631,8639"}}],"payload":{"lines":"8605,8606","fold":1}},{"content":"Résultat <em>(L'instant de vérité...)</em>","children":[{"content":"<pre><code class=\"language-php\">php artisan migrate:refresh --seed\n</code></pre>","children":[]}],"payload":{"lines":"8639,8640","fold":1}}],"payload":{"lines":"8597,8598","fold":1}},{"content":"Modification du ContactSeeder","children":[{"content":"Problème &amp; Solution","children":[{"content":"\n<p data-lines=\"8649,8650\">Situation actuelle :</p>\n<p data-lines=\"8651,8654\">Voir dans la base de données : Dans les enregistrements fakes de<br>\nla table contacts, le champs \"message\" contient des phrases qui<br>\nse terminent souvent de façon bizarre...</p>","children":[],"payload":{"lines":"8649,8655"}},{"content":"\n<p data-lines=\"8655,8656\">Situation proposée :</p>\n<p data-lines=\"8657,8659\">Faire une sorte d'helper* pour améliorer la terminaison des phrases, en<br>\nfonction de la ponctuation contenue dans le texte généré par le Faker.</p>","children":[],"payload":{"lines":"8655,8660"}},{"content":"\n<p data-lines=\"8660,8663\">* : Cependant, comme ceci n'a pas besoin d'être chargé systématiquement<br>\npar l'appli, puisque juste nécessaire à priori pour la population (<em>seed</em>)<br>\nde la table 'contacts', nous le ferons en dehors des 'vrais' helpers...</p>","children":[],"payload":{"lines":"8660,8664"}}],"payload":{"lines":"8647,8648","fold":1}},{"content":"Création d'outils (<em>Tools</em>)","children":[{"content":"<pre data-lines=\"8666,8667\"><code>Créer app/Http/Tools/Fakers.php \n</code></pre>","children":[],"payload":{"lines":"8666,8667"}},{"content":"<pre><code class=\"language-php\"><span class=\"hljs-meta\">&lt;?php</span>\n<span class=\"hljs-keyword\">namespace</span> <span class=\"hljs-title class_\">App</span>\\<span class=\"hljs-title class_\">Http</span>\\<span class=\"hljs-title class_\">Tools</span>;\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Faker</span>\\<span class=\"hljs-title\">Factory</span> <span class=\"hljs-keyword\">as</span> <span class=\"hljs-title\">FakerBase</span>;\n\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Fakers</span> </span>{\n    <span class=\"hljs-comment\">/**\n     * Generates a fake sentence (a paragraph with 3 sentences)\n     * which is cut at a hyphen (., ;, !, ...) which is the closest\n     * to the given length.\n     *\n     * <span class=\"hljs-doctag\">@param</span> int $length The length of the sentence to generate.\n     * <span class=\"hljs-doctag\">@return</span> object Contains properties 'complete' and 'wellCut'.\n     */</span>\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">fakerSentence</span>(<span class=\"hljs-params\"><span class=\"hljs-variable\">$length</span> = <span class=\"hljs-number\">250</span></span>): <span class=\"hljs-title\">object</span> </span>{\n        <span class=\"hljs-variable\">$locale</span> = (<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">TimeFcts</span>())-&gt;<span class=\"hljs-title function_ invoke__\">appLocale</span>();\n    \n        <span class=\"hljs-variable\">$faker</span>                = <span class=\"hljs-title class_\">FakerBase</span>::<span class=\"hljs-title function_ invoke__\">create</span>(<span class=\"hljs-variable\">$locale</span>);\n        <span class=\"hljs-variable\">$completeFakeSentence</span> = <span class=\"hljs-variable\">$faker</span>-&gt;<span class=\"hljs-title function_ invoke__\">realText</span>(<span class=\"hljs-variable\">$length</span> + <span class=\"hljs-number\">100</span>, <span class=\"hljs-number\">3</span>);\n    \n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">cutSentence</span>(<span class=\"hljs-variable\">$completeFakeSentence</span>);\n    }\n    \n    <span class=\"hljs-comment\">/**\n     * Cut a sentence at the hyphen (., ;, !, ...) which is the closest to the given length.\n     *\n     * <span class=\"hljs-doctag\">@param</span> string $completeFakeSentence The sentence to cut.\n     * <span class=\"hljs-doctag\">@param</span> int $length The length of the sentence to generate.\n     * <span class=\"hljs-doctag\">@return</span> object Contains properties 'complete' and 'wellCut'.\n     */</span>\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">cutSentence</span>(<span class=\"hljs-params\"><span class=\"hljs-variable\">$completeFakeSentence</span>, <span class=\"hljs-variable\">$length</span> = <span class=\"hljs-number\">200</span></span>): <span class=\"hljs-title\">object</span> </span>{\n        <span class=\"hljs-variable\">$hyphens</span>  = [<span class=\"hljs-string\">'.'</span>, <span class=\"hljs-string\">';'</span>, <span class=\"hljs-string\">'!'</span>, <span class=\"hljs-string\">'...'</span>];\n        <span class=\"hljs-variable\">$position</span> = <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">findLastHyphenPosition</span>(<span class=\"hljs-variable\">$completeFakeSentence</span>, <span class=\"hljs-variable\">$length</span>, <span class=\"hljs-variable\">$hyphens</span>);\n    \n        <span class=\"hljs-variable\">$etc</span> = (<span class=\"hljs-variable\">$position</span> === <span class=\"hljs-variable\">$length</span>) ? <span class=\"hljs-string\">' [...]'</span> : <span class=\"hljs-string\">''</span>;\n        <span class=\"hljs-comment\">// echo \"{$position} - {$length}\";</span>\n        <span class=\"hljs-variable\">$wellCut</span> = <span class=\"hljs-title function_ invoke__\">substr</span>(<span class=\"hljs-variable\">$completeFakeSentence</span>, <span class=\"hljs-number\">0</span>, <span class=\"hljs-variable\">$position</span>) . <span class=\"hljs-variable\">$etc</span>;\n    \n        <span class=\"hljs-keyword\">return</span> (<span class=\"hljs-keyword\">object</span>) [\n            <span class=\"hljs-string\">'complete'</span> =&gt; <span class=\"hljs-variable\">$completeFakeSentence</span>,\n            <span class=\"hljs-string\">'wellCut'</span>  =&gt; <span class=\"hljs-variable\">$wellCut</span>,\n        ];\n    \n        <span class=\"hljs-comment\">// echo '&lt;pre&gt;';</span>\n        <span class=\"hljs-comment\">// print_r($this-&gt;sentence);</span>\n        <span class=\"hljs-comment\">// echo '&lt;/pre&gt;';</span>\n    }\n    \n    <span class=\"hljs-comment\">/**\n     * Finds the position of the last hyphen in a string, given the length\n     * and the hyphens to search for.\n     *\n     * <span class=\"hljs-doctag\">@param</span> string $text The string to search.\n     * <span class=\"hljs-doctag\">@param</span> int $length The length of the string to search.\n     * <span class=\"hljs-doctag\">@param</span> array $hyphens The hyphens to search for.\n     * <span class=\"hljs-doctag\">@return</span> int The position of the last hyphen, or the length of the string if no hyphen is found.\n     */</span>\n    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">findLastHyphenPosition</span>(<span class=\"hljs-params\"><span class=\"hljs-variable\">$text</span>, <span class=\"hljs-variable\">$length</span>, <span class=\"hljs-variable\">$hyphens</span></span>): <span class=\"hljs-title\">int</span> </span>{\n        <span class=\"hljs-variable\">$positions</span> = <span class=\"hljs-title function_ invoke__\">array_map</span>(function (<span class=\"hljs-variable\">$hyphen</span>) <span class=\"hljs-keyword\">use</span> ($<span class=\"hljs-title\">text</span>, $<span class=\"hljs-title\">length</span>) {\n            <span class=\"hljs-title\">return</span> <span class=\"hljs-title\">strrpos</span>(<span class=\"hljs-title\">substr</span>($<span class=\"hljs-title\">text</span>, 0, $<span class=\"hljs-title\">length</span>), $<span class=\"hljs-title\">hyphen</span>);\n        }, <span class=\"hljs-variable\">$hyphens</span>);\n    \n        <span class=\"hljs-comment\">// Supprime les valeurs false et obtient la position maximale</span>\n        <span class=\"hljs-variable\">$positions</span> = <span class=\"hljs-title function_ invoke__\">array_filter</span>(<span class=\"hljs-variable\">$positions</span>, fn (<span class=\"hljs-variable\">$pos</span>) =&gt; <span class=\"hljs-literal\">false</span> !== <span class=\"hljs-variable\">$pos</span>);\n    \n        <span class=\"hljs-keyword\">return</span> !<span class=\"hljs-keyword\">empty</span>(<span class=\"hljs-variable\">$positions</span>) ? <span class=\"hljs-title function_ invoke__\">max</span>(<span class=\"hljs-variable\">$positions</span>) + <span class=\"hljs-number\">1</span> : <span class=\"hljs-variable\">$length</span>;\n    }\n}\n</code></pre>","children":[]},{"content":"<pre data-lines=\"8738,8739\"><code>Cette classe utilise app/Http/Tools/TimeFcts.php (À créer)\n</code></pre>","children":[],"payload":{"lines":"8738,8739"}},{"content":"<pre><code class=\"language-php\"><span class=\"hljs-meta\">&lt;?php</span>\n<span class=\"hljs-keyword\">namespace</span> <span class=\"hljs-title class_\">App</span>\\<span class=\"hljs-title class_\">Http</span>\\<span class=\"hljs-title class_\">Tools</span>;\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Support</span>\\<span class=\"hljs-title\">Facades</span>\\<span class=\"hljs-title\">Config</span>;\n\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">TimeFcts</span> </span>{\n    <span class=\"hljs-comment\">/**\n     * Return the locale for a given language code\n     *\n     * <span class=\"hljs-doctag\">@return</span> string The locale, ex.: fr → fr_FR\n     */</span>\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">appLocale</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">bool</span>|<span class=\"hljs-title\">string</span> </span>{\n        <span class=\"hljs-variable\">$languageCode</span> = <span class=\"hljs-title class_\">Config</span>::<span class=\"hljs-title function_ invoke__\">get</span>(<span class=\"hljs-string\">'app.locale'</span>);\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title class_\">\\Locale</span>::<span class=\"hljs-title function_ invoke__\">composeLocale</span>([<span class=\"hljs-string\">'language'</span> =&gt; <span class=\"hljs-variable\">$languageCode</span>, <span class=\"hljs-string\">'region'</span> =&gt; <span class=\"hljs-title function_ invoke__\">strtoupper</span>(<span class=\"hljs-variable\">$languageCode</span>)]);\n  }\n}\n</code></pre>","children":[]}],"payload":{"lines":"8664,8665","fold":1}},{"content":"Modification de ContactFactory","children":[{"content":"<pre><code class=\"language-php\"><span class=\"hljs-meta\">&lt;?php</span>\n<span class=\"hljs-keyword\">namespace</span> <span class=\"hljs-title class_\">Database</span>\\<span class=\"hljs-title class_\">Factories</span>;\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">App</span>\\<span class=\"hljs-title\">Models</span>\\<span class=\"hljs-title\">Contact</span>;\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Faker</span>\\<span class=\"hljs-title\">Factory</span> <span class=\"hljs-keyword\">as</span> <span class=\"hljs-title\">Faker</span>;\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">App</span>\\<span class=\"hljs-title\">Http</span>\\<span class=\"hljs-title\">Tools</span>\\{<span class=\"hljs-title\">Fakers</span>, <span class=\"hljs-title\">TimeFcts</span>};\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Illuminate</span>\\<span class=\"hljs-title\">Database</span>\\<span class=\"hljs-title\">Eloquent</span>\\<span class=\"hljs-title\">Factories</span>\\<span class=\"hljs-title\">Factory</span>;\n\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">ContactFactory</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">Factory</span> </span>{\n    <span class=\"hljs-keyword\">protected</span> <span class=\"hljs-variable\">$model</span> = <span class=\"hljs-title class_\">Contact</span>::<span class=\"hljs-variable language_\">class</span>;\n\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">definition</span>(<span class=\"hljs-params\"></span>): <span class=\"hljs-title\">array</span> </span>{\n        <span class=\"hljs-variable\">$localeConverter</span> = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">TimeFcts</span>();\n        <span class=\"hljs-variable\">$locale</span>          = <span class=\"hljs-variable\">$localeConverter</span>-&gt;<span class=\"hljs-title function_ invoke__\">appLocale</span>();\n        <span class=\"hljs-variable\">$faker</span>           = <span class=\"hljs-title class_\">Faker</span>::<span class=\"hljs-title function_ invoke__\">create</span>(<span class=\"hljs-variable\">$locale</span>);\n        <span class=\"hljs-variable\">$fakerTool</span>       = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Fakers</span>();\n    \n        <span class=\"hljs-keyword\">return</span> [\n            <span class=\"hljs-string\">'name'</span>    =&gt; <span class=\"hljs-variable\">$faker</span>-&gt;name,\n            <span class=\"hljs-string\">'email'</span>   =&gt; <span class=\"hljs-variable\">$faker</span>-&gt;<span class=\"hljs-title function_ invoke__\">unique</span>()-&gt;safeEmail,\n            <span class=\"hljs-string\">'message'</span> =&gt; <span class=\"hljs-variable\">$fakerTool</span>-&gt;<span class=\"hljs-title function_ invoke__\">fakerSentence</span>()-&gt;wellCut,\n      ];\n    }\n}\n</code></pre>","children":[]}],"payload":{"lines":"8758,8759","fold":1}}],"payload":{"lines":"8645,8646","fold":1}}],"payload":{"lines":"8595,8596"}},{"content":"Front-End &lt;!-- markmap: fold --&gt;","children":[{"content":"Espace de test","children":[{"content":"Objectif","children":[{"content":"\n<p data-lines=\"8792,8793\"><small>En phase de dev, on a fréquemment besoin de tester une function native, perso, bref, un bout de code...</small></p>\n  <br>\n<pre data-lines=\"8796,8807\"><code>    En effet, par exemple, pour définir cutSentence(), qui est destiné au ContactSeeder,\nil faudra à chaque avancée, relancer le process de *migration:(re)fresh --seed* puis aller\nconsulter la BdD..., et en particuliers, la table *contacts*... Plutôt fastidieux !\n\n    Pour avoir l'aisance d'obtenir le rendu de notre code, sans avoir besoin de lancer quelque\ncommande que se soit, une extension de BdD de VSC, ou d'actualiser quoique ce soit, voire pire\nencore, de passer sur une autre appli (Style HeidiSQL, SQLite Studio, MySQL Workbench, etc...),\nl'idéal est d'avoir un espace d'accès rapide, isolé du reste pour simplifier la problématique,\net aussi éviter de s'immiscer dans le script principal...\n\n    Voyons ci-après comment cela a été réalisé ici, grâce à un nouveau composant spécifique :\n</code></pre>","children":[],"payload":{"lines":"8792,8808"}}],"payload":{"lines":"8790,8791","fold":1}},{"content":"Exemple de Test avec <em>cutSentence()</em>","children":[{"content":"\n<p data-lines=\"8810,8813\">Route Test : <em>Pour des raisons de sécurité, cette page ne sera accessible qu'aux admins.<br>\n(Donc sa route sera par exemple juste après celle nommée <strong>settings</strong>). Et bien-sûr, rien ne vous empêche d'ajouter<br>\nà la suite d'autres routes pour d'autres tests, quitte à transformer à terme, le lien ci-après, en dropdown...</em> :</p>\n <br>\n<pre><code class=\"language-php\">    <span class=\"hljs-title class_\">Volt</span>::<span class=\"hljs-title function_ invoke__\">route</span>(<span class=\"hljs-string\">'/test'</span>, <span class=\"hljs-string\">'various.test'</span>)-&gt;<span class=\"hljs-title function_ invoke__\">name</span>(<span class=\"hljs-string\">'various.test'</span>);\n</code></pre>","children":[],"payload":{"lines":"8810,8820"}},{"content":"\n<p data-lines=\"8820,8822\">Lien d'accès dans Navbar aisément, rapidement accessible et réservé aux 'admin' uniquement :<br>\n<br></p>\n<pre><code class=\"language-php\">            ...\n            &lt;x-menu-item title=\"{{ __('Logout') }}\" wire:click=\"logout\" /&gt;\n        &lt;/x-dropdown&gt;\n        @if ($user-&gt;isAdmin())\n            &lt;a href=\"{{ route('various.test') }}\" title=\" {{ __('Test page') }} \"&gt;\n                &lt;x-icon name=\"c-cog-6-tooth\" /&gt;\n            &lt;/a&gt;\n        @endif\n    @else\n        &lt;x-button label=\"{{ __('Login') }}\" link=\"/login\" class=\"btn-ghost\" /&gt;\n    ...\n</code></pre>","children":[],"payload":{"lines":"8820,8836"}},{"content":"\n<p data-lines=\"8836,8838\">Layout épuré pour Test :<br>\n<br></p>\n<pre><code class=\"language-html\">    <span class=\"hljs-meta\">&lt;!DOCTYPE <span class=\"hljs-keyword\">html</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">html</span> <span class=\"hljs-attr\">lang</span>=<span class=\"hljs-string\">\"{{ str_replace('_', '-', app()-&gt;getLocale()) }}\"</span>&gt;</span>\n\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">head</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">charset</span>=<span class=\"hljs-string\">\"utf-8\"</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"viewport\"</span> <span class=\"hljs-attr\">content</span>=<span class=\"hljs-string\">\"width=device-width, initial-scale=1.0, maximum-scale=1.0, viewport-fit=cover\"</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"csrf-token\"</span> <span class=\"hljs-attr\">content</span>=<span class=\"hljs-string\">\"{{ csrf_token() }}\"</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">title</span>&gt;</span>\n            {{ (isset($title) ? $title . ' | ' : (View::hasSection('title') ? View::getSection('title') . ' | ' : '')) . config('app.name') }}\n        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">title</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"description\"</span> <span class=\"hljs-attr\">content</span>=<span class=\"hljs-string\">\"@yield('description')\"</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"keywords\"</span> <span class=\"hljs-attr\">content</span>=<span class=\"hljs-string\">\"@yield('keywords')\"</span>&gt;</span>\n    \n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">link</span> <span class=\"hljs-attr\">rel</span>=<span class=\"hljs-string\">\"stylesheet\"</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">\"{{ asset('storage/css/prism.css') }}\"</span>&gt;</span>\n        @vite(['resources/css/app.css', 'resources/js/app.js'])\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">head</span>&gt;</span>\n    \n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">body</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">\"h-[96vh] font-sans antialiased bg-base-200/50 dark:bg-base-200 my-3\"</span>&gt;</span>\n    \n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">x-main</span> <span class=\"hljs-attr\">full-width</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">x-slot:content</span>&gt;</span>\n                {{ $slot }}\n            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">x-slot:content</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">x-main</span>&gt;</span>\n    \n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">x-toast</span> /&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">\"{{ asset('storage/scripts/prism.js') }}\"</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">body</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">html</span>&gt;</span>\n</code></pre>","children":[],"payload":{"lines":"8836,8870"}},{"content":"\n<p data-lines=\"8870,8871\">Traductions pour le test courant :</p>","children":[{"content":"\n<p data-lines=\"8872,8873\">Dans <strong>lang/fr.json</strong>, ajouter :</p>\n<pre><code class=\"language-json\">    <span class=\"hljs-attr\">\"Test page\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Page de test\"</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">\"Study\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Étude\"</span>\n</code></pre>","children":[],"payload":{"lines":"8872,8879"}},{"content":"\n<p data-lines=\"8879,8880\">Créer <strong>lang/de.json</strong> :</p>\n<pre><code class=\"language-json\">  <span class=\"hljs-punctuation\">{</span>\n    <span class=\"hljs-attr\">\"Study\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Studie\"</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">\"Test page\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Testseite\"</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">\"of\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"von\"</span>\n  <span class=\"hljs-punctuation\">}</span>\n</code></pre>","children":[],"payload":{"lines":"8879,8889"}},{"content":"\n<p data-lines=\"8889,8890\">Créer <strong>es.json</strong> :</p>\n<pre><code class=\"language-json\">  <span class=\"hljs-punctuation\">{</span>\n    <span class=\"hljs-attr\">\"Study\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Estudio\"</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">\"Test page\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"Página de prueba\"</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">\"of\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"de\"</span>\n  <span class=\"hljs-punctuation\">}</span>\n</code></pre>","children":[],"payload":{"lines":"8889,8899"}}],"payload":{"lines":"8870,8899"}},{"content":"\n<p data-lines=\"8899,8901\">Composant Test (<em>Le fichier est scindé, cette fois non pas qu'il soit long, mais afin d'optimiser le travail du formateur de l'IDE...</em>)<br>\n<br></p>\n<pre><code class=\"language-bash\">    php artisan make:volt various/test\n</code></pre>","children":[],"payload":{"lines":"8899,8905"}},{"content":"\n<p data-lines=\"8905,8907\">Créer various/<strong>test.php</strong> :<br>\n<br></p>\n<pre><code class=\"language-php\">    <span class=\"hljs-meta\">&lt;?php</span>\n    <span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">App</span>\\<span class=\"hljs-title\">Http</span>\\<span class=\"hljs-title\">Tools</span>\\<span class=\"hljs-title\">Fakers</span>;\n    <span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Livewire</span>\\<span class=\"hljs-title\">Volt</span>\\<span class=\"hljs-title\">Component</span>;\n    <span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">Livewire</span>\\<span class=\"hljs-title\">Attributes</span>\\{<span class=\"hljs-title\">Layout</span>, <span class=\"hljs-title\">Title</span>};\n\n    <span class=\"hljs-keyword\">new</span> <span class=\"hljs-meta\">#[Layout</span>(<span class=\"hljs-string\">'components.layouts.test'</span>)<span class=\"hljs-meta\">]</span> <span class=\"hljs-meta\">#[Title</span>(<span class=\"hljs-string\">'Test'</span>)<span class=\"hljs-meta\">]</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">Component</span> </span>{\n        <span class=\"hljs-keyword\">public</span> <span class=\"hljs-variable\">$sentence</span>;\n        <span class=\"hljs-keyword\">private</span> <span class=\"hljs-variable\">$faker</span>;\n\n        <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">mount</span>(<span class=\"hljs-params\"></span>) </span>{\n            <span class=\"hljs-variable language_\">$this</span>-&gt;faker = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Fakers</span>();\n            <span class=\"hljs-comment\">/* À noter : Cette classe utilise un autre outil : TimeFcts()-&gt;getLocale() qui extrait la variable d'environnement APP_LOCALE\n            de votre .env... Essayer de lui affecter 'de', 'es', 'it', 'nl', ou 'ru'... Tout en regardant : http://127.0.0.1:8000/test */</span>\n            <span class=\"hljs-variable\">$completeFakeSentence</span> = <span class=\"hljs-variable language_\">$this</span>-&gt;<span class=\"hljs-title function_ invoke__\">completeFixedOrRealSentence</span>(); <span class=\"hljs-comment\">// 1 param.: 0 ou rien pour avoir fake || Autre valeur pour avoir fixe</span>\n            <span class=\"hljs-variable language_\">$this</span>-&gt;sentence       = <span class=\"hljs-variable language_\">$this</span>-&gt;faker-&gt;<span class=\"hljs-title function_ invoke__\">cutSentence</span>(<span class=\"hljs-variable\">$completeFakeSentence</span>);\n        }\n\n        <span class=\"hljs-keyword\">private</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">completeFixedOrRealSentence</span>(<span class=\"hljs-params\"><span class=\"hljs-variable\">$fixedSentence</span> = <span class=\"hljs-number\">0</span></span>) </span>{\n            <span class=\"hljs-comment\">// Cas le + fréquent en 1er</span>\n              <span class=\"hljs-keyword\">return</span> !<span class=\"hljs-variable\">$fixedSentence</span> ? <span class=\"hljs-variable language_\">$this</span>-&gt;faker-&gt;<span class=\"hljs-title function_ invoke__\">fakerSentence</span>()-&gt;complete : <span class=\"hljs-string\">\"La belle-mère répondit n'avoir plus rien de la liquidation\n                      qui était close, et qu'il leur restait, outre Belleville, six cents livres de rente. Quoiqu'elle fût laide, sèche comme\n                      un cotret. et bourgeonnée comme un printemps, certes madame Martin ne manquait pas de lui en procurer une autre plus\n                      riche commode. Le médecin, bien entendu, fit encore les frais de...\"</span>;\n        }\n    };\n</code></pre>","children":[],"payload":{"lines":"8905,8935"}},{"content":"\n<p data-lines=\"8935,8937\">Et dans various/<strong>test.blade.php</strong> (<em>Déjà créée par la commande en CLI ci-avant</em>) :<br>\n<br></p>\n<pre><code class=\"language-html\">  <span class=\"hljs-meta\">&lt;?php\n  include_once 'test.php';\n  ?&gt;</span>\n\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">\"/\"</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">\"{{ __('Return on site') }}\"</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">x-header</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">\"text-lg m-0\"</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">\"{{ __('Test page') }}\"</span> <span class=\"hljs-attr\">shadow</span> <span class=\"hljs-attr\">separator</span> <span class=\"hljs-attr\">progress-indicator</span> /&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span>\n\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">\"text-2xl mb-5\"</span>&gt;</span>{{ __('Study') }} {{ __('of') }} app/Http/Tools/Fakers.php-&gt;<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">b</span>&gt;</span>cutSentence()<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">b</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">\"w-full text-justify\"</span>&gt;</span>\n          {{ $sentence-&gt;complete }}\n          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">hr</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">\"my-3\"</span>&gt;</span>\n          {{ $sentence-&gt;wellCut }}\n      <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n</code></pre>","children":[],"payload":{"lines":"8935,8954"}}],"payload":{"lines":"8808,8809","fold":1}}],"payload":{"lines":"8788,8789","fold":1}}],"payload":{"lines":"8786,8787"}},{"content":"Back-End-End &lt;!-- markmap: fold --&gt;","children":[{"content":"Ajout d'un lien Front-End &amp; bouton Annuler (BLADE) &lt;!-- markmap: fold --&gt;","children":[{"content":"admin.posts","children":[{"content":"\n<p data-lines=\"8961,8963\">- index :<br>\n<br></p>\n<pre><code class=\"language-php\">    ...\n    uuu tt → <span class=\"hljs-comment\">//2do component x-headerLk ?</span>\n        ...\n</code></pre>","children":[],"payload":{"lines":"8961,8969"}},{"content":"\n<p data-lines=\"8969,8971\">- edit :<br>\n<br></p>\n<pre><code class=\"language-php\">    uuu tt\n    ...\n    &lt;x-slot:actions&gt;\n        &lt;x-button label=\"{{ __('Cancel') }}\" icon=\"o-hand-thumb-down\" class=\"btn-outline\" link=\"/admin/posts/index\" /&gt;\n        &lt;x-button label=\"{{ __('Preview') }}\" icon=\"m-sun\" link=\"{{ '/posts/' . $post-&gt;slug }}\" external class=\"btn-outline\" /&gt;\n        ...\n    ...//2do component x-cancelLk\n    &lt;x-slot:actions&gt;\n        &lt;x-button label=\"{{ __('Cancel') }}\" icon=\"o-hand-thumb-down\" class=\"btn-outline\" link=\"/admin/posts/index\" /&gt;\n        &lt;x-button label=\"{{ __('Preview') }}\" icon=\"m-sun\" link=\"{{ '/posts/' . $post-&gt;slug }}\" external class=\"btn-outline\" /&gt;\n        ...\n</code></pre>","children":[],"payload":{"lines":"8969,8985"}},{"content":"\n<p data-lines=\"8985,8995\">- create :<br>\n<br><br>\nuuu tt<br>\n...<br>\n<a href=\"x-slot:actions\">x-slot:actions</a><br>\n<x-button label=\"{{ __('Cancel') }}\" icon=\"o-hand-thumb-down\" class=\"btn-outline\" link=\"/admin/posts/index\"><br>\n<x-button label=\"{{ __('Save') }}\" icon=\"o-paper-airplane\" spinner=\"save\" type=\"submit\" class=\"btn-primary\"><br>\n...</x-button></x-button></p>","children":[],"payload":{"lines":"8985,8996"}}],"payload":{"lines":"8958,8959","fold":1}},{"content":"admin.categories","children":[{"content":"\n<p data-lines=\"8999,9001\">- admin.categories.index :<br>\n<br></p>\n<pre><code class=\"language-php\">    ...\n    uuu tt\n        ...\n    ...\n    uuu cc\n        ...\n</code></pre>","children":[],"payload":{"lines":"8999,9010"}},{"content":"\n<p data-lines=\"9010,9012\">- admin.categories.edit :<br>\n<br></p>\n<pre><code class=\"language-php\">    ...\n    uuu tt\n        ...\n    ...\n    uuu cc\n        ...\n</code></pre>","children":[],"payload":{"lines":"9010,9021"}}],"payload":{"lines":"8996,8997","fold":1}},{"content":"admin.pages","children":[{"content":"\n<p data-lines=\"9024,9026\">- index :<br>\n<br></p>\n<pre><code class=\"language-php\">    ...\n    uuu tt\n        ...\n</code></pre>","children":[],"payload":{"lines":"9024,9032"}},{"content":"\n<p data-lines=\"9032,9034\">- edit :<br>\n<br></p>\n<pre><code class=\"language-php\">    ...\n    uuu tt\n\n    ...\n    uuu cc\n        ...\n</code></pre>","children":[],"payload":{"lines":"9032,9043"}},{"content":"\n<p data-lines=\"9043,9045\">- create :<br>\n<br></p>\n<pre><code class=\"language-php\">    ...\n    uuu tt\n    ...\n    uuu cc\n        ...\n</code></pre>","children":[],"payload":{"lines":"9043,9053"}}],"payload":{"lines":"9021,9022","fold":1}},{"content":"admin.users","children":[{"content":"\n<p data-lines=\"9056,9058\">- index :<br>\n<br></p>\n<pre><code class=\"language-php\">    ...\n    uuu tt\n        ...\n</code></pre>","children":[],"payload":{"lines":"9056,9064"}},{"content":"\n<p data-lines=\"9064,9066\">- edit :<br>\n<br></p>\n<pre><code class=\"language-php\">    ...\n    uuu tt\n\n    ...\n    uuu cc\n        ...\n</code></pre>","children":[],"payload":{"lines":"9064,9075"}}],"payload":{"lines":"9053,9054","fold":1}},{"content":"admin.comments","children":[{"content":"\n<p data-lines=\"9078,9080\">- index :<br>\n<br></p>\n<pre><code class=\"language-php\">    ...\n    uuu tt\n        ...\n</code></pre>","children":[],"payload":{"lines":"9078,9086"}},{"content":"\n<p data-lines=\"9086,9088\">- edit :<br>\n<br></p>\n<pre><code class=\"language-php\">    ...\n    uuu tt\n\n    ...\n    uuu cc\n        ...\n</code></pre>","children":[],"payload":{"lines":"9086,9097"}},{"content":"\n<p data-lines=\"9097,9099\">- create :<br>\n<br></p>\n<pre><code class=\"language-php\">    ...\n    uuu tt\n    ...\n    uuu cc\n        ...\n</code></pre>","children":[],"payload":{"lines":"9097,9107"}}],"payload":{"lines":"9075,9076","fold":1}},{"content":"admin.menus","children":[{"content":"\n<p data-lines=\"9110,9112\">- index :<br>\n<br></p>\n<pre><code class=\"language-php\">    ...\n    uuu tt\n        ...\n</code></pre>","children":[],"payload":{"lines":"9110,9118"}},{"content":"\n<p data-lines=\"9118,9120\">- edit :<br>\n<br></p>\n<pre><code class=\"language-php\">    ...\n    uuu tt\n\n    ...\n    uuu cc\n        ...\n</code></pre>","children":[],"payload":{"lines":"9118,9129"}},{"content":"\n<p data-lines=\"9129,9131\">- create :<br>\n<br></p>\n<pre><code class=\"language-php\">    ...\n    uuu tt\n    ...\n    uuu cc\n        ...\n</code></pre>","children":[],"payload":{"lines":"9129,9139"}}],"payload":{"lines":"9107,9108","fold":1}},{"content":"admin.images","children":[{"content":"\n<p data-lines=\"9142,9144\">- index :<br>\n<br></p>\n<pre><code class=\"language-php\">    ...\n    uuu tt\n        ...\n</code></pre>","children":[],"payload":{"lines":"9142,9150"}},{"content":"\n<p data-lines=\"9150,9152\">- edit :<br>\n<br></p>\n<pre><code class=\"language-php\">    ...\n    uuu tt\n\n    ...\n    uuu cc\n        ...\n</code></pre>","children":[],"payload":{"lines":"9150,9161"}},{"content":"\n<p data-lines=\"9161,9163\">- create :<br>\n<br></p>\n<pre><code class=\"language-php\">    ...\n    uuu tt\n    ...\n    uuu cc\n        ...\n</code></pre>","children":[],"payload":{"lines":"9161,9171"}}],"payload":{"lines":"9139,9140","fold":1}},{"content":"admin.settings","children":[{"content":"\n<p data-lines=\"9174,9176\">- index :<br>\n<br></p>\n<pre><code class=\"language-php\">    ...\n    uuu tt\n        ...\n    uuu cc\n  uuu AVEC progressbar en + en bas\n            ...\n            &lt;/x-form&gt;\n            &lt;x-header separator progress-indicator /&gt;\n        &lt;/x-card&gt;\n    &lt;/div&gt;\n</code></pre>","children":[],"payload":{"lines":"9174,9189"}},{"content":"\n<p data-lines=\"9189,9191\">- edit :<br>\n<br></p>\n<pre><code class=\"language-php\">    ...\n    uuu tt\n\n    ...\n    uuu cc\n        ...\n</code></pre>","children":[],"payload":{"lines":"9189,9200"}},{"content":"\n<p data-lines=\"9200,9202\">- create :<br>\n<br></p>\n<pre><code class=\"language-php\">    ...\n    uuu tt\n    ...\n    uuu cc\n        ...\n</code></pre>","children":[],"payload":{"lines":"9200,9210"}}],"payload":{"lines":"9171,9172","fold":1}}],"payload":{"lines":"8956,8957"}}],"payload":{"lines":"8954,8955"}},{"content":"//2do cf si meilleur icone pour tests","children":[],"payload":{"lines":"9210,9211"}},{"content":"//2do admin.posts.index → paginate selon config","children":[],"payload":{"lines":"9212,9213","fold":1}},{"content":"//2fix link category-2 ie","children":[],"payload":{"lines":"9214,9215"}},{"content":"//2fix Edit menu si 'Autre' : Pas besoin du 1er champs (Article, Page, Category)","children":[],"payload":{"lines":"9216,9217"}},{"content":"//2do admin contact cf Sillo","children":[],"payload":{"lines":"9218,9219"}},{"content":"//2do Dans optimisation Sub-Menus 'Autre' → Vu Ajouté dans Traits/ManageMenus.php + traduction","children":[],"payload":{"lines":"9220,9221"}},{"content":"//2do Lien menus list (admin.menu.index) dans header de editsub","children":[],"payload":{"lines":"9222,9223"}},{"content":"//2do tester sidebar // categories","children":[],"payload":{"lines":"9224,9225"}},{"content":"Pour aller + loin","children":[{"content":"//2do txt pour Academy","children":[],"payload":{"lines":"9228,9230"}}],"payload":{"lines":"9226,9227","fold":1}}],"payload":{"lines":"8585,8586","fold":1}},{"content":"III &nbsp;/ &nbsp; <strong>A I D E &nbsp; &amp; &nbsp; C O N T A C T</strong>","children":[{"content":"<strong>0 / Liens clés techniques</strong>","children":[{"content":"<a href=\"http://127.0.0.1:8025\">MailHog</a>","children":[{"content":"<em>Le service doit être démarré...</em>","children":[],"payload":{"lines":"9236,9238"}}],"payload":{"lines":"9234,9235","fold":1}}],"payload":{"lines":"9232,9233"}},{"content":"<strong><a href=\"https://github.com/bestmomo/sillo\">1 / Le TOP: Le dépôt GIT officiel</a></strong>","children":[{"content":"En <a href=\"https://github.com/bestmomo/sillo/blob/master/doc/installation.md\">récupérant le code complet du projet</a>","children":[],"payload":{"lines":"9240,9241"}},{"content":"Puis, en y faisant un Pull Request (Et là... : BRAVOs (<em>Mabrouk</em>) !!!)","children":[],"payload":{"lines":"9241,9242"}},{"content":"Ou au pire, en y levant une issue... Mais pas si gravissime (<em>Malich</em>) ;-)","children":[],"payload":{"lines":"9242,9244"}}],"payload":{"lines":"9238,9239"}},{"content":"<strong><a href=\"https://laravel.sillo.org/login\">2 / Le site officiel</a></strong>","children":[{"content":"Message possible en bas de chaque article<br>\n(<em>Vous devez alors vous loguer ou créer un compte</em>)","children":[],"payload":{"lines":"9246,9249"}}],"payload":{"lines":"9244,9245"}},{"content":"<strong><a href=\"https://discord.com/channels/1258750464800063640/1258750464800063646\">3 / Le canal officiel DISCORD</a></strong>","children":[{"content":"Pour discuter en LIVE","children":[],"payload":{"lines":"9251,9253"}}],"payload":{"lines":"9249,9250"}},{"content":"<strong><a href=\"https://laravel.sillo.org/contact\">4 / Un message personnel</a></strong>","children":[],"payload":{"lines":"9253,9254"}}],"payload":{"lines":"9230,9231","fold":1}}],"payload":{"lines":"0,1"}},{"duration":2000,"initialExpandLevel":-1})</script>
</body>
</html>
